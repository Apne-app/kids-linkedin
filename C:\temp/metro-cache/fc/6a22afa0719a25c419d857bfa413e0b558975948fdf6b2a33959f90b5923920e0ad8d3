{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false,"locs":[]}},{"name":"react","data":{"isAsync":false,"locs":[]}},{"name":"react-native","data":{"isAsync":false,"locs":[]}},{"name":"../utils","data":{"isAsync":false,"locs":[]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _react = _$$_REQUIRE(_dependencyMap[2], \"react\");\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[3], \"react-native\");\n\n  var _utils = _$$_REQUIRE(_dependencyMap[4], \"../utils\");\n\n  var CACHE_SIZE = 50;\n  var imageDimensionsCache = (0, _utils.createCache)(CACHE_SIZE);\n\n  var useImageDimensions = function useImageDimensions(image) {\n    var _useState = (0, _react.useState)(null),\n        _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n        dimensions = _useState2[0],\n        setDimensions = _useState2[1];\n\n    var getImageDimensions = function getImageDimensions(image) {\n      return new Promise(function (resolve) {\n        if (typeof image == \"number\") {\n          var cacheKey = \"\" + image;\n          var imageDimensions = imageDimensionsCache.get(cacheKey);\n\n          if (!imageDimensions) {\n            var _Image$resolveAssetSo = _reactNative.Image.resolveAssetSource(image),\n                width = _Image$resolveAssetSo.width,\n                height = _Image$resolveAssetSo.height;\n\n            imageDimensions = {\n              width: width,\n              height: height\n            };\n            imageDimensionsCache.set(cacheKey, imageDimensions);\n          }\n\n          resolve(imageDimensions);\n          return;\n        }\n\n        if (image.uri) {\n          var source = image;\n          var _cacheKey = source.uri;\n\n          var _imageDimensions = imageDimensionsCache.get(_cacheKey);\n\n          if (_imageDimensions) {\n            resolve(_imageDimensions);\n          } else {\n            _reactNative.Image.getSizeWithHeaders(source.uri, source.headers, function (width, height) {\n              imageDimensionsCache.set(_cacheKey, {\n                width: width,\n                height: height\n              });\n              resolve({\n                width: width,\n                height: height\n              });\n            }, function () {\n              resolve({\n                width: 0,\n                height: 0\n              });\n            });\n          }\n        } else {\n          resolve({\n            width: 0,\n            height: 0\n          });\n        }\n      });\n    };\n\n    var isImageUnmounted = false;\n    (0, _react.useEffect)(function () {\n      getImageDimensions(image).then(function (dimensions) {\n        if (!isImageUnmounted) {\n          setDimensions(dimensions);\n        }\n      });\n      return function () {\n        isImageUnmounted = true;\n      };\n    }, [image]);\n    return dimensions;\n  };\n\n  var _default = useImageDimensions;\n  exports.default = _default;\n});","lineCount":98,"map":[[11,0,8,0],[13,0,9,0],[15,0,10,0],[17,0,11,0],[17,6,11,6,"CACHE_SIZE"],[17,16,11,16],[17,19,11,19],[17,21,11,0],[18,0,12,0],[18,6,12,6,"imageDimensionsCache"],[18,26,12,26],[18,29,12,29],[18,53,12,41,"CACHE_SIZE"],[18,63,12,29],[18,64,12,0],[20,0,13,0],[20,6,13,6,"useImageDimensions"],[20,24,13,24],[20,27,13,27],[20,36,13,6,"useImageDimensions"],[20,54,13,27],[20,55,13,28,"image"],[20,60,13,27],[20,62,13,38],[21,0,13,38],[21,20,14,40],[21,41,14,49],[21,45,14,40],[21,46,13,38],[22,0,13,38],[23,0,13,38],[23,8,14,11,"dimensions"],[23,18,13,38],[24,0,13,38],[24,8,14,23,"setDimensions"],[24,21,13,38],[26,0,15,4],[26,8,15,10,"getImageDimensions"],[26,26,15,28],[26,29,15,31],[26,38,15,10,"getImageDimensions"],[26,56,15,31],[26,57,15,32,"image"],[26,62,15,31],[26,64,15,42],[27,0,16,8],[27,13,16,15],[27,17,16,19,"Promise"],[27,24,16,15],[27,25,16,27],[27,35,16,28,"resolve"],[27,42,16,27],[27,44,16,40],[28,0,17,12],[28,12,17,16],[28,19,17,23,"image"],[28,24,17,16],[28,28,17,32],[28,36,17,12],[28,38,17,42],[29,0,18,16],[29,14,18,22,"cacheKey"],[29,22,18,30],[29,30,18,36,"image"],[29,35,18,16],[30,0,19,16],[30,14,19,20,"imageDimensions"],[30,29,19,35],[30,32,19,38,"imageDimensionsCache"],[30,52,19,58],[30,53,19,59,"get"],[30,56,19,38],[30,57,19,63,"cacheKey"],[30,65,19,38],[30,66,19,16],[32,0,20,16],[32,14,20,20],[32,15,20,21,"imageDimensions"],[32,30,20,16],[32,32,20,38],[33,0,20,38],[33,40,21,46,"Image"],[33,59,21,52,"resolveAssetSource"],[33,77,21,46],[33,78,21,71,"image"],[33,83,21,46],[33,84,20,38],[34,0,20,38],[34,16,21,28,"width"],[34,21,20,38],[34,46,21,28,"width"],[34,51,20,38],[35,0,20,38],[35,16,21,35,"height"],[35,22,20,38],[35,47,21,35,"height"],[35,53,20,38],[37,0,22,20,"imageDimensions"],[37,12,22,20,"imageDimensions"],[37,27,22,35],[37,30,22,38],[38,0,22,40,"width"],[38,14,22,40,"width"],[38,19,22,45],[38,21,22,40,"width"],[38,26,22,38],[39,0,22,47,"height"],[39,14,22,47,"height"],[39,20,22,53],[39,22,22,47,"height"],[40,0,22,38],[40,13,22,20],[41,0,23,20,"imageDimensionsCache"],[41,12,23,20,"imageDimensionsCache"],[41,32,23,40],[41,33,23,41,"set"],[41,36,23,20],[41,37,23,45,"cacheKey"],[41,45,23,20],[41,47,23,55,"imageDimensions"],[41,62,23,20],[42,0,24,17],[44,0,25,16,"resolve"],[44,10,25,16,"resolve"],[44,17,25,23],[44,18,25,24,"imageDimensions"],[44,33,25,23],[44,34,25,16],[45,0,26,16],[46,0,27,13],[48,0,29,12],[48,12,29,16,"image"],[48,17,29,21],[48,18,29,22,"uri"],[48,21,29,12],[48,23,29,27],[49,0,30,16],[49,14,30,22,"source"],[49,20,30,28],[49,23,30,31,"image"],[49,28,30,16],[50,0,31,16],[50,14,31,22,"cacheKey"],[50,23,31,30],[50,26,31,33,"source"],[50,32,31,39],[50,33,31,40,"uri"],[50,36,31,16],[52,0,32,16],[52,14,32,22,"imageDimensions"],[52,30,32,37],[52,33,32,40,"imageDimensionsCache"],[52,53,32,60],[52,54,32,61,"get"],[52,57,32,40],[52,58,32,65,"cacheKey"],[52,67,32,40],[52,68,32,16],[54,0,33,16],[54,14,33,20,"imageDimensions"],[54,30,33,16],[54,32,33,37],[55,0,34,20,"resolve"],[55,12,34,20,"resolve"],[55,19,34,27],[55,20,34,28,"imageDimensions"],[55,36,34,27],[55,37,34,20],[56,0,35,17],[56,11,33,16],[56,17,36,21],[57,0,38,20,"Image"],[57,31,38,26,"getSizeWithHeaders"],[57,49,38,20],[57,50,38,45,"source"],[57,56,38,51],[57,57,38,52,"uri"],[57,60,38,20],[57,62,38,57,"source"],[57,68,38,63],[57,69,38,64,"headers"],[57,76,38,20],[57,78,38,73],[57,88,38,74,"width"],[57,93,38,73],[57,95,38,81,"height"],[57,101,38,73],[57,103,38,92],[58,0,39,24,"imageDimensionsCache"],[58,14,39,24,"imageDimensionsCache"],[58,34,39,44],[58,35,39,45,"set"],[58,38,39,24],[58,39,39,49,"cacheKey"],[58,48,39,24],[58,50,39,59],[59,0,39,61,"width"],[59,16,39,61,"width"],[59,21,39,66],[59,23,39,61,"width"],[59,28,39,59],[60,0,39,68,"height"],[60,16,39,68,"height"],[60,22,39,74],[60,24,39,68,"height"],[61,0,39,59],[61,15,39,24],[62,0,40,24,"resolve"],[62,14,40,24,"resolve"],[62,21,40,31],[62,22,40,32],[63,0,40,34,"width"],[63,16,40,34,"width"],[63,21,40,39],[63,23,40,34,"width"],[63,28,40,32],[64,0,40,41,"height"],[64,16,40,41,"height"],[64,22,40,47],[64,24,40,41,"height"],[65,0,40,32],[65,15,40,31],[65,16,40,24],[66,0,41,21],[66,13,38,20],[66,15,41,23],[66,27,41,29],[67,0,42,24,"resolve"],[67,14,42,24,"resolve"],[67,21,42,31],[67,22,42,32],[68,0,42,34,"width"],[68,16,42,34,"width"],[68,21,42,39],[68,23,42,41],[68,24,42,32],[69,0,42,44,"height"],[69,16,42,44,"height"],[69,22,42,50],[69,24,42,52],[70,0,42,32],[70,15,42,31],[70,16,42,24],[71,0,43,21],[71,13,38,20],[72,0,44,17],[73,0,45,13],[73,9,29,12],[73,15,46,17],[74,0,47,16,"resolve"],[74,10,47,16,"resolve"],[74,17,47,23],[74,18,47,24],[75,0,47,26,"width"],[75,12,47,26,"width"],[75,17,47,31],[75,19,47,33],[75,20,47,24],[76,0,47,36,"height"],[76,12,47,36,"height"],[76,18,47,42],[76,20,47,44],[77,0,47,24],[77,11,47,23],[77,12,47,16],[78,0,48,13],[79,0,49,9],[79,7,16,15],[79,8,16,8],[80,0,50,5],[80,5,15,4],[82,0,51,4],[82,8,51,8,"isImageUnmounted"],[82,24,51,24],[82,27,51,27],[82,32,51,4],[83,0,52,4],[83,26,52,14],[83,38,52,20],[84,0,53,8,"getImageDimensions"],[84,6,53,8,"getImageDimensions"],[84,24,53,26],[84,25,53,27,"image"],[84,30,53,26],[84,31,53,8],[84,32,53,34,"then"],[84,36,53,8],[84,37,53,39],[84,47,53,40,"dimensions"],[84,57,53,39],[84,59,53,55],[85,0,54,12],[85,12,54,16],[85,13,54,17,"isImageUnmounted"],[85,29,54,12],[85,31,54,35],[86,0,55,16,"setDimensions"],[86,10,55,16,"setDimensions"],[86,23,55,29],[86,24,55,30,"dimensions"],[86,34,55,29],[86,35,55,16],[87,0,56,13],[88,0,57,9],[88,7,53,8],[89,0,58,8],[89,13,58,15],[89,25,58,21],[90,0,59,12,"isImageUnmounted"],[90,8,59,12,"isImageUnmounted"],[90,24,59,28],[90,27,59,31],[90,31,59,12],[91,0,60,9],[91,7,58,8],[92,0,61,5],[92,5,52,4],[92,7,61,7],[92,8,61,8,"image"],[92,13,61,7],[92,14,52,4],[93,0,62,4],[93,11,62,11,"dimensions"],[93,21,62,4],[94,0,63,1],[94,3,13,0],[96,17,64,15,"useImageDimensions"],[96,35]],"functionMap":{"names":["<global>","useImageDimensions","getImageDimensions","Promise$argument_0","Image.getSizeWithHeaders$argument_2","Image.getSizeWithHeaders$argument_3","useEffect$argument_0","getImageDimensions.then$argument_0","<anonymous>"],"mappings":"AAA;2BCY;+BCE;2BCC;yECsB;qBDG,EE;qBFE;SDM;KDC;cKE;uCCC;SDI;eEC;SFE;KLC;CDE"}},"type":"js/module"}]}