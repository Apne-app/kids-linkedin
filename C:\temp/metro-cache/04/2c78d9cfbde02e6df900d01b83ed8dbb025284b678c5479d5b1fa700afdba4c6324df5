{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false,"locs":[]}},{"name":"../Utilities/infoLog","data":{"isAsync":false,"locs":[{"start":{"line":13,"column":16},"end":{"line":13,"column":47}}]}},{"name":"invariant","data":{"isAsync":false,"locs":[{"start":{"line":14,"column":18},"end":{"line":14,"column":38}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]);function s(t,n){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function o(n){for(var u=1;u<arguments.length;u++){var o=null!=arguments[u]?arguments[u]:{};u%2?s(Object(o),!0).forEach(function(u){t(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}r(d[3]);var c=r(d[4]),h=(function(){function t(u){var s=u.onMoreTasks;n(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return u(t,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var n=this;t.forEach(function(t){return n.enqueue(t)})}},{key:\"cancelTasks\",value:function(t){this._queueStack=this._queueStack.map(function(n){return o(o({},n),{},{tasks:n.tasks.filter(function(n){return-1===t.indexOf(n)})})}).filter(function(t,n){return t.tasks.length>0||0===n})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var n=t.shift();try{n.gen?this._genPromise(n):n.run?n.run():(c('function'==typeof n,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(n,null,2)),n())}catch(t){throw t.message='TaskQueue: Error with task '+(n.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,n=this._queueStack[t];return n.popable&&0===n.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}},{key:\"_genPromise\",value:function(t){var n=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1;t.gen().then(function(){n._queueStack[u].popable=!0,n.hasTasksToProcess()&&n._onMoreTasks()}).catch(function(n){throw n.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+n.message,n}).done()}}]),t})();m.exports=h});","lineCount":1,"map":[[1,28,11,0],[1,644,13,16,"require"],[1,646,13,23,"d"],[1,648,13,23],[1,652,13,0],[1,656,14,6,"invariant"],[1,658,14,18,"require"],[1,660,14,25,"d"],[1,662,14,25],[1,666,46,6,"TaskQueue"],[1,680,54,2],[1,689,54,2,"TaskQueue"],[1,691,54,2,"_ref"],[1,694,54,61],[1,698,54,15,"onMoreTasks"],[1,700,54,61,"_ref"],[1,702,54,15,"onMoreTasks"],[1,714,54,61,"_classCallCheck"],[1,716,54,61,"this"],[1,721,54,61,"TaskQueue"],[1,724,55,4,"this"],[1,729,55,9,"_onMoreTasks"],[1,742,55,24,"onMoreTasks"],[1,744,56,4,"this"],[1,749,56,9,"_queueStack"],[1,763,56,25,"tasks"],[1,772,56,36,"popable"],[1,781,56,45],[1,818,64,2],[1,827,64,10,"task"],[1,830,65,4,"this"],[1,835,65,9,"_getCurrentQueue"],[1,854,65,28,"push"],[1,859,65,33,"task"],[1,890,68,2],[1,899,68,15,"tasks"],[1,902,68,41],[1,906,68,41,"_this"],[1,908,68,41,"this"],[1,913,69,4,"tasks"],[1,915,69,10,"forEach"],[1,923,69,18],[1,932,69,18,"task"],[1,935,69,22],[1,942,69,26,"_this"],[1,944,69,31,"enqueue"],[1,952,69,39,"task"],[1,984,72,2],[1,993,72,14,"tasksToCancel"],[1,996,74,4,"this"],[1,1001,74,9,"_queueStack"],[1,1013,74,23,"this"],[1,1018,74,28,"_queueStack"],[1,1030,75,7,"map"],[1,1034,75,11],[1,1043,75,11,"queue"],[1,1046,75,16],[1,1053,75,16,"_objectSpread"],[1,1055,75,16,"_objectSpread"],[1,1060,76,11,"queue"],[1,1067,77,8,"tasks"],[1,1073,77,15,"queue"],[1,1075,77,21,"tasks"],[1,1081,77,27,"filter"],[1,1088,77,34],[1,1097,77,34,"task"],[1,1100,77,38],[1,1107,77,42],[1,1111,77,42,"tasksToCancel"],[1,1113,77,56,"indexOf"],[1,1121,77,64,"task"],[1,1130,79,7,"filter"],[1,1137,79,14],[1,1146,79,15,"queue"],[1,1148,79,22,"idx"],[1,1151,79,14],[1,1158,79,30,"queue"],[1,1160,79,36,"tasks"],[1,1166,79,42,"length"],[1,1173,79,51],[1,1176,79,64],[1,1180,79,56,"idx"],[1,1217,92,2],[1,1228,93,4],[1,1235,93,11,"this"],[1,1240,93,16,"_getCurrentQueue"],[1,1259,93,35,"length"],[1,1266,93,44],[1,1295,99,2],[1,1306,100,4],[1,1310,100,10,"queue"],[1,1312,100,18,"this"],[1,1317,100,23,"_getCurrentQueue"],[1,1336,101,4],[1,1339,101,8,"queue"],[1,1341,101,14,"length"],[1,1348,101,22],[1,1349,102,6],[1,1353,102,12,"task"],[1,1355,102,19,"queue"],[1,1357,102,25,"shift"],[1,1365,103,6],[1,1369,104,12,"task"],[1,1371,104,17,"gen"],[1,1375,106,10,"this"],[1,1380,106,15,"_genPromise"],[1,1392,106,28,"task"],[1,1395,107,19,"task"],[1,1397,107,24,"run"],[1,1401,109,10,"task"],[1,1403,109,15,"run"],[1,1410,111,10,"invariant"],[1,1412,112,28],[1,1431,112,19,"task"],[1,1433,113,12],[1,1493,114,14,"JSON"],[1,1498,114,19,"stringify"],[1,1508,114,29,"task"],[1,1510,114,35],[1,1515,114,41],[1,1519,117,10,"task"],[1,1524,119,8],[1,1530,119,15,"e"],[1,1533,122,8],[1,1539,120,8,"e"],[1,1541,120,10,"message"],[1,1549,121,10],[1,1580,121,43,"task"],[1,1582,121,48,"name"],[1,1588,121,56],[1,1592,121,62],[1,1597,121,69,"e"],[1,1599,121,71,"message"],[1,1607,122,14,"e"],[1,1643,134,2],[1,1654,135,4],[1,1658,135,10,"stackIdx"],[1,1660,135,21,"this"],[1,1665,135,26,"_queueStack"],[1,1677,135,38,"length"],[1,1684,135,47],[1,1686,136,10,"queue"],[1,1688,136,18,"this"],[1,1693,136,23,"_queueStack"],[1,1705,136,35,"stackIdx"],[1,1708,137,4],[1,1715,138,6,"queue"],[1,1717,138,12,"popable"],[1,1726,139,29],[1,1730,139,6,"queue"],[1,1732,139,12,"tasks"],[1,1738,139,18,"length"],[1,1746,140,6,"this"],[1,1751,140,11,"_queueStack"],[1,1763,140,23,"length"],[1,1770,140,32],[1,1773,142,6,"this"],[1,1778,142,11,"_queueStack"],[1,1790,142,23,"pop"],[1,1796,148,13,"this"],[1,1801,148,18,"_getCurrentQueue"],[1,1821,150,13,"queue"],[1,1823,150,19,"tasks"],[1,1856,154,2],[1,1865,154,14,"task"],[1,1868,154,33],[1,1872,154,33,"_this2"],[1,1874,154,33,"this"],[1,1879,159,4,"this"],[1,1884,159,9,"_queueStack"],[1,1896,159,21,"push"],[1,1902,159,27,"tasks"],[1,1911,159,38,"popable"],[1,1920,159,47],[1,1924,160,4],[1,1928,160,10,"stackIdx"],[1,1930,160,21,"this"],[1,1935,160,26,"_queueStack"],[1,1947,160,38,"length"],[1,1954,160,47],[1,1956,163,4,"task"],[1,1958,164,7,"gen"],[1,1964,165,7,"then"],[1,1969,165,12],[1,1980,171,8,"_this2"],[1,1982,171,13,"_queueStack"],[1,1994,171,25,"stackIdx"],[1,1997,171,35,"popable"],[1,2006,171,45],[1,2008,172,8,"_this2"],[1,2010,172,13,"hasTasksToProcess"],[1,2031,172,36,"_this2"],[1,2033,172,41,"_onMoreTasks"],[1,2050,174,7,"catch"],[1,2056,174,13],[1,2065,174,13,"ex"],[1,2068,178,8],[1,2074,175,8,"ex"],[1,2076,175,11,"message"],[1,2084,175,8],[1,2130,176,10,"task"],[1,2132,176,15,"name"],[1,2137,175,8],[1,2142,177,13,"ex"],[1,2144,177,16,"message"],[1,2152,178,14,"ex"],[1,2156,180,7,"done"],[1,2173,184,0,"module"],[1,2175,184,7,"exports"],[1,2183,184,17,"TaskQueue"]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0"],"mappings":"AAA;AC6C;ECQ;GDG;EEO;GFE;EGE;kBCC,0BD;GHC;EKE;WCG;kCCE,0CD;QDC;cGC,mDH;GLC;ESY;GTE;EUK;GV0B;EWS;GXkB;EYE;YCW;ODQ;aEC;OFK;GZE;CDC"}},"type":"js/module"}]}