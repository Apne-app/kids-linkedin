{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"./logging","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/extends\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[4], \"react-native\");\n\n  var _logging = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./logging\"));\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  module.exports = function (NativeCodePush) {\n    var remote = function remote(reportStatusDownload) {\n      return {\n        download: function download(downloadProgressCallback) {\n          var downloadProgressSubscription, codePushEventEmitter, updatePackageCopy, downloadedPackage;\n          return _regenerator.default.async(function download$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (this.downloadUrl) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot download an update without a download url\");\n\n                case 2:\n                  if (downloadProgressCallback) {\n                    codePushEventEmitter = new _reactNative.NativeEventEmitter(NativeCodePush);\n                    downloadProgressSubscription = codePushEventEmitter.addListener(\"CodePushDownloadProgress\", downloadProgressCallback);\n                  }\n\n                  _context.prev = 3;\n                  updatePackageCopy = (0, _extends2.default)({}, this);\n                  Object.keys(updatePackageCopy).forEach(function (key) {\n                    return typeof updatePackageCopy[key] === 'function' && delete updatePackageCopy[key];\n                  });\n                  _context.next = 8;\n                  return _regenerator.default.awrap(NativeCodePush.downloadUpdate(updatePackageCopy, !!downloadProgressCallback));\n\n                case 8:\n                  downloadedPackage = _context.sent;\n\n                  if (reportStatusDownload) {\n                    reportStatusDownload(this).catch(function (err) {\n                      (0, _logging.default)(\"Report download status failed: \" + err);\n                    });\n                  }\n\n                  return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, downloadedPackage), local));\n\n                case 11:\n                  _context.prev = 11;\n                  downloadProgressSubscription && downloadProgressSubscription.remove();\n                  return _context.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, null, this, [[3,, 11, 14]], Promise);\n        },\n        isPending: false\n      };\n    };\n\n    var local = {\n      install: function install() {\n        var installMode,\n            minimumBackgroundDuration,\n            updateInstalledCallback,\n            localPackage,\n            localPackageCopy,\n            _args2 = arguments;\n        return _regenerator.default.async(function install$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                installMode = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : NativeCodePush.codePushInstallModeOnNextRestart;\n                minimumBackgroundDuration = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 0;\n                updateInstalledCallback = _args2.length > 2 ? _args2[2] : undefined;\n                localPackage = this;\n                localPackageCopy = (0, _extends2.default)({}, localPackage);\n                _context2.next = 7;\n                return _regenerator.default.awrap(NativeCodePush.installUpdate(localPackageCopy, installMode, minimumBackgroundDuration));\n\n              case 7:\n                updateInstalledCallback && updateInstalledCallback();\n\n                if (installMode == NativeCodePush.codePushInstallModeImmediate) {\n                  NativeCodePush.restartApp(false);\n                } else {\n                  NativeCodePush.clearPendingRestart();\n                  localPackage.isPending = true;\n                }\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, this, null, Promise);\n      },\n      isPending: false\n    };\n    return {\n      local: local,\n      remote: remote\n    };\n  };\n});","lineCount":119,"map":[[10,0,1,0],[12,0,2,0],[18,0,7,0,"module"],[18,2,7,0,"module"],[18,8,7,6],[18,9,7,7,"exports"],[18,16,7,0],[18,19,7,17],[18,29,7,18,"NativeCodePush"],[18,43,7,17],[18,45,7,37],[19,0,8,2],[19,8,8,8,"remote"],[19,14,8,14],[19,17,8,17],[19,26,8,8,"remote"],[19,32,8,17],[19,33,8,18,"reportStatusDownload"],[19,53,8,17],[19,55,8,43],[20,0,9,4],[20,13,9,11],[21,0,10,12,"download"],[21,8,10,12,"download"],[21,16,9,11],[21,36,10,21,"downloadProgressCallback"],[21,60,9,11],[22,0,9,11],[23,0,9,11],[24,0,9,11],[25,0,9,11],[26,0,9,11],[27,0,9,11],[27,22,11,13],[27,27,11,18,"downloadUrl"],[27,38,9,11],[28,0,9,11],[29,0,9,11],[30,0,9,11],[32,0,9,11],[32,24,12,16],[32,28,12,20,"Error"],[32,33,12,16],[32,34,12,26],[32,84,12,16],[32,85,9,11],[34,0,9,11],[35,0,16,8],[35,22,16,12,"downloadProgressCallback"],[35,46,16,8],[35,48,16,38],[36,0,17,16,"codePushEventEmitter"],[36,20,17,16,"codePushEventEmitter"],[36,40,16,38],[36,43,17,39],[36,47,17,43,"NativeEventEmitter"],[36,78,17,39],[36,79,17,62,"NativeCodePush"],[36,93,17,39],[36,94,16,38],[37,0,19,10,"downloadProgressSubscription"],[37,20,19,10,"downloadProgressSubscription"],[37,48,19,38],[37,51,19,41,"codePushEventEmitter"],[37,71,19,61],[37,72,19,62,"addListener"],[37,83,19,41],[37,84,20,12],[37,110,19,41],[37,112,21,12,"downloadProgressCallback"],[37,136,19,41],[37,137,19,10],[38,0,23,9],[40,0,9,11],[41,0,28,16,"updatePackageCopy"],[41,18,28,16,"updatePackageCopy"],[41,35,9,11],[41,38,28,36],[41,61,28,50],[41,63,28,36],[41,65,28,54],[41,69,28,36],[41,70,9,11],[42,0,29,10,"Object"],[42,18,29,10,"Object"],[42,24,29,16],[42,25,29,17,"keys"],[42,29,29,10],[42,30,29,22,"updatePackageCopy"],[42,47,29,10],[42,49,29,41,"forEach"],[42,56,29,10],[42,57,29,49],[42,67,29,50,"key"],[42,70,29,49],[43,0,29,49],[43,27,29,59],[43,34,29,66,"updatePackageCopy"],[43,51,29,83],[43,52,29,84,"key"],[43,55,29,83],[43,56,29,59],[43,61,29,93],[43,71,29,58],[43,75,29,108],[43,82,29,115,"updatePackageCopy"],[43,99,29,132],[43,100,29,133,"key"],[43,103,29,132],[43,104,29,49],[44,0,29,49],[44,19,29,10],[45,0,9,11],[46,0,9,11],[46,52,31,42,"NativeCodePush"],[46,66,31,56],[46,67,31,57,"downloadUpdate"],[46,81,31,42],[46,82,31,72,"updatePackageCopy"],[46,99,31,42],[46,101,31,91],[46,102,31,92],[46,103,31,93,"downloadProgressCallback"],[46,127,31,42],[46,128,9,11],[48,0,9,11],[49,0,31,16,"downloadedPackage"],[49,18,31,16,"downloadedPackage"],[49,35,9,11],[51,0,33,10],[51,22,33,14,"reportStatusDownload"],[51,42,33,10],[51,44,33,36],[52,0,34,12,"reportStatusDownload"],[52,20,34,12,"reportStatusDownload"],[52,40,34,32],[52,41,34,33],[52,45,34,32],[52,46,34,12],[52,47,35,13,"catch"],[52,52,34,12],[52,53,35,19],[52,63,35,20,"err"],[52,66,35,19],[52,68,35,28],[53,0,36,14],[53,80,36,52,"err"],[53,83,36,14],[54,0,37,13],[54,21,34,12],[55,0,38,11],[57,0,9,11],[57,83,40,22,"downloadedPackage"],[57,100,9,11],[57,103,40,44,"local"],[57,108,9,11],[59,0,9,11],[60,0,9,11],[61,0,42,10,"downloadProgressSubscription"],[61,18,42,10,"downloadProgressSubscription"],[61,46,42,38],[61,50,42,42,"downloadProgressSubscription"],[61,78,42,70],[61,79,42,71,"remove"],[61,85,42,42],[61,87,42,10],[62,0,9,11],[64,0,9,11],[65,0,9,11],[66,0,9,11],[67,0,9,11],[68,0,9,11],[69,0,9,11],[70,0,9,11],[71,0,46,6,"isPending"],[71,8,46,6,"isPending"],[71,17,46,15],[71,19,46,17],[72,0,9,11],[72,7,9,4],[73,0,48,3],[73,5,8,2],[75,0,50,2],[75,8,50,8,"local"],[75,13,50,13],[75,16,50,16],[76,0,51,10,"install"],[76,6,51,10,"install"],[76,13,50,16],[77,0,50,16],[78,0,50,16],[79,0,50,16],[80,0,50,16],[81,0,50,16],[82,0,50,16],[83,0,50,16],[84,0,50,16],[85,0,50,16],[86,0,50,16],[87,0,51,18,"installMode"],[87,16,51,18,"installMode"],[87,27,50,16],[87,89,51,32,"NativeCodePush"],[87,103,51,46],[87,104,51,47,"codePushInstallModeOnNextRestart"],[87,136,50,16],[88,0,51,81,"minimumBackgroundDuration"],[88,16,51,81,"minimumBackgroundDuration"],[88,41,50,16],[88,103,51,109],[88,104,50,16],[89,0,51,112,"updateInstalledCallback"],[89,16,51,112,"updateInstalledCallback"],[89,39,50,16],[90,0,52,12,"localPackage"],[90,16,52,12,"localPackage"],[90,28,50,16],[90,31,52,27],[90,35,50,16],[91,0,53,12,"localPackageCopy"],[91,16,53,12,"localPackageCopy"],[91,32,50,16],[91,35,53,31],[91,58,53,45],[91,60,53,31],[91,62,53,49,"localPackage"],[91,74,53,31],[91,75,50,16],[92,0,50,16],[93,0,50,16],[93,50,54,12,"NativeCodePush"],[93,64,54,26],[93,65,54,27,"installUpdate"],[93,78,54,12],[93,79,54,41,"localPackageCopy"],[93,95,54,12],[93,97,54,59,"installMode"],[93,108,54,12],[93,110,54,72,"minimumBackgroundDuration"],[93,135,54,12],[93,136,50,16],[95,0,50,16],[96,0,55,6,"updateInstalledCallback"],[96,16,55,6,"updateInstalledCallback"],[96,39,55,29],[96,43,55,33,"updateInstalledCallback"],[96,66,55,56],[96,68,55,6],[98,0,56,6],[98,20,56,10,"installMode"],[98,31,56,21],[98,35,56,25,"NativeCodePush"],[98,49,56,39],[98,50,56,40,"codePushInstallModeImmediate"],[98,78,56,6],[98,80,56,70],[99,0,57,8,"NativeCodePush"],[99,18,57,8,"NativeCodePush"],[99,32,57,22],[99,33,57,23,"restartApp"],[99,43,57,8],[99,44,57,34],[99,49,57,8],[100,0,58,7],[100,17,56,6],[100,23,58,13],[101,0,59,8,"NativeCodePush"],[101,18,59,8,"NativeCodePush"],[101,32,59,22],[101,33,59,23,"clearPendingRestart"],[101,52,59,8],[102,0,60,8,"localPackage"],[102,18,60,8,"localPackage"],[102,30,60,20],[102,31,60,21,"isPending"],[102,40,60,8],[102,43,60,33],[102,47,60,8],[103,0,61,7],[105,0,50,16],[106,0,50,16],[107,0,50,16],[108,0,50,16],[109,0,50,16],[110,0,50,16],[111,0,50,16],[112,0,64,4,"isPending"],[112,6,64,4,"isPending"],[112,15,64,13],[112,17,64,15],[113,0,50,16],[113,5,50,2],[114,0,67,2],[114,11,67,9],[115,0,67,11,"local"],[115,6,67,11,"local"],[115,11,67,16],[115,13,67,11,"local"],[115,18,67,9],[116,0,67,18,"remote"],[116,6,67,18,"remote"],[116,12,67,24],[116,14,67,18,"remote"],[117,0,67,9],[117,5,67,2],[118,0,68,1],[118,3,7,0]],"functionMap":{"names":["<global>","module.exports","remote","download","Object.keys.forEach$argument_0","reportStatusDownload._catch$argument_0","local.install"],"mappings":"AAA;iBCM;iBCC;MCE;iDCmB,wFD;mBEM;aFE;ODO;GDI;IKG;KLW;CDM"}},"type":"js/module"}]}