{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false,"locs":[{"start":{"line":3,"column":29},"end":{"line":3,"column":84}}]}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false,"locs":[{"start":{"line":11,"column":46},"end":{"line":11,"column":94}}]}},{"name":"jsonwebtoken","data":{"isAsync":false,"locs":[{"start":{"line":13,"column":43},"end":{"line":13,"column":66}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.JWTScopeToken = JWTScopeToken;\n  exports.JWTUserSessionToken = JWTUserSessionToken;\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _jsonwebtoken = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"jsonwebtoken\"));\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          (0, _defineProperty2.default)(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function joinClaimValue(items) {\n    var values = Array.isArray(items) ? items : [items];\n    var claims = [];\n\n    for (var i = 0; i < values.length; i += 1) {\n      var s = values[i].trim();\n      if (s === '*') return s;\n      claims.push(s);\n    }\n\n    return claims.join(',');\n  }\n\n  function JWTScopeToken(apiSecret, resource, action) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var noTimestamp = options.expireTokens ? !options.expireTokens : true;\n    var payload = {\n      resource: joinClaimValue(resource),\n      action: joinClaimValue(action)\n    };\n    if (options.feedId) payload.feed_id = joinClaimValue(options.feedId);\n    if (options.userId) payload.user_id = options.userId;\n    return _jsonwebtoken.default.sign(payload, apiSecret, {\n      algorithm: 'HS256',\n      noTimestamp: noTimestamp\n    });\n  }\n\n  function JWTUserSessionToken(apiSecret, userId) {\n    var extraData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var jwtOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    if (typeof userId !== 'string') {\n      throw new TypeError('userId should be a string');\n    }\n\n    var payload = _objectSpread({\n      user_id: userId\n    }, extraData);\n\n    var opts = _objectSpread({\n      algorithm: 'HS256',\n      noTimestamp: true\n    }, jwtOptions);\n\n    return _jsonwebtoken.default.sign(payload, apiSecret, opts);\n  }\n});","lineCount":97,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,42,3,36],[4,109,3,0],[6,0,5,0,"Object"],[6,2,5,0,"Object"],[6,8,5,6],[6,9,5,7,"defineProperty"],[6,23,5,0],[6,24,5,22,"exports"],[6,31,5,0],[6,33,5,31],[6,45,5,0],[6,47,5,45],[7,0,6,2,"value"],[7,4,6,2,"value"],[7,9,6,7],[7,11,6,9],[8,0,5,45],[8,3,5,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"JWTScopeToken"],[9,23,8,0],[9,26,8,24,"JWTScopeToken"],[9,39,8,0],[10,0,9,0,"exports"],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"JWTUserSessionToken"],[10,29,9,0],[10,32,9,30,"JWTUserSessionToken"],[10,51,9,0],[12,0,11,0],[12,6,11,4,"_defineProperty2"],[12,22,11,20],[12,25,11,23,"_interopRequireDefault"],[12,47,11,45],[12,48,11,46,"require"],[12,59,11,53],[12,119,11,45],[12,120,11,0],[14,0,13,0],[14,6,13,4,"_jsonwebtoken"],[14,19,13,17],[14,22,13,20,"_interopRequireDefault"],[14,44,13,42],[14,45,13,43,"require"],[14,56,13,50],[14,91,13,42],[14,92,13,0],[16,0,15,0],[16,11,15,9,"ownKeys"],[16,18,15,0],[16,19,15,17,"object"],[16,25,15,0],[16,27,15,25,"enumerableOnly"],[16,41,15,0],[16,43,15,41],[17,0,15,43],[17,8,15,47,"keys"],[17,12,15,51],[17,15,15,54,"Object"],[17,21,15,60],[17,22,15,61,"keys"],[17,26,15,54],[17,27,15,66,"object"],[17,33,15,54],[17,34,15,43],[19,0,15,75],[19,8,15,79,"Object"],[19,14,15,85],[19,15,15,86,"getOwnPropertySymbols"],[19,36,15,75],[19,38,15,109],[20,0,15,111],[20,10,15,115,"symbols"],[20,17,15,122],[20,20,15,125,"Object"],[20,26,15,131],[20,27,15,132,"getOwnPropertySymbols"],[20,48,15,125],[20,49,15,154,"object"],[20,55,15,125],[20,56,15,111],[21,0,15,163],[21,10,15,167,"enumerableOnly"],[21,24,15,163],[21,26,15,183,"symbols"],[21,33,15,190],[21,36,15,193,"symbols"],[21,43,15,200],[21,44,15,201,"filter"],[21,50,15,193],[21,51,15,208],[21,61,15,218,"sym"],[21,64,15,208],[21,66,15,223],[22,0,15,225],[22,15,15,232,"Object"],[22,21,15,238],[22,22,15,239,"getOwnPropertyDescriptor"],[22,46,15,232],[22,47,15,264,"object"],[22,53,15,232],[22,55,15,272,"sym"],[22,58,15,232],[22,60,15,277,"enumerable"],[22,70,15,225],[23,0,15,290],[23,7,15,193],[23,8,15,183],[24,0,15,293,"keys"],[24,6,15,293,"keys"],[24,10,15,297],[24,11,15,298,"push"],[24,15,15,293],[24,16,15,303,"apply"],[24,21,15,293],[24,22,15,309,"keys"],[24,26,15,293],[24,28,15,315,"symbols"],[24,35,15,293],[25,0,15,326],[27,0,15,327],[27,11,15,334,"keys"],[27,15,15,327],[28,0,15,341],[30,0,17,0],[30,11,17,9,"_objectSpread"],[30,24,17,0],[30,25,17,23,"target"],[30,31,17,0],[30,33,17,31],[31,0,17,33],[31,9,17,38],[31,13,17,42,"i"],[31,14,17,43],[31,17,17,46],[31,18,17,33],[31,20,17,49,"i"],[31,21,17,50],[31,24,17,53,"arguments"],[31,33,17,62],[31,34,17,63,"length"],[31,40,17,33],[31,42,17,71,"i"],[31,43,17,72],[31,45,17,33],[31,47,17,76],[32,0,17,78],[32,10,17,82,"source"],[32,16,17,88],[32,19,17,91,"arguments"],[32,28,17,100],[32,29,17,101,"i"],[32,30,17,100],[32,31,17,91],[32,35,17,107],[32,39,17,91],[32,42,17,114,"arguments"],[32,51,17,123],[32,52,17,124,"i"],[32,53,17,123],[32,54,17,91],[32,57,17,129],[32,59,17,78],[34,0,17,133],[34,10,17,137,"i"],[34,11,17,138],[34,14,17,141],[34,15,17,133],[34,17,17,144],[35,0,17,146,"ownKeys"],[35,8,17,146,"ownKeys"],[35,15,17,153],[35,16,17,154,"Object"],[35,22,17,160],[35,23,17,161,"source"],[35,29,17,160],[35,30,17,153],[35,32,17,170],[35,36,17,153],[35,37,17,146],[35,38,17,176,"forEach"],[35,45,17,146],[35,46,17,184],[35,56,17,194,"key"],[35,59,17,184],[35,61,17,199],[36,0,17,201],[36,11,17,202],[36,14,17,205,"_defineProperty2"],[36,30,17,221],[36,31,17,222,"default"],[36,38,17,201],[36,40,17,231,"target"],[36,46,17,201],[36,48,17,239,"key"],[36,51,17,201],[36,53,17,244,"source"],[36,59,17,250],[36,60,17,251,"key"],[36,63,17,250],[36,64,17,201],[37,0,17,259],[37,9,17,146],[38,0,17,263],[38,7,17,133],[38,13,17,269],[38,17,17,273,"Object"],[38,23,17,279],[38,24,17,280,"getOwnPropertyDescriptors"],[38,49,17,269],[38,51,17,307],[39,0,17,309,"Object"],[39,8,17,309,"Object"],[39,14,17,315],[39,15,17,316,"defineProperties"],[39,31,17,309],[39,32,17,333,"target"],[39,38,17,309],[39,40,17,341,"Object"],[39,46,17,347],[39,47,17,348,"getOwnPropertyDescriptors"],[39,72,17,341],[39,73,17,374,"source"],[39,79,17,341],[39,80,17,309],[40,0,17,385],[40,7,17,269],[40,13,17,391],[41,0,17,393,"ownKeys"],[41,8,17,393,"ownKeys"],[41,15,17,400],[41,16,17,401,"Object"],[41,22,17,407],[41,23,17,408,"source"],[41,29,17,407],[41,30,17,400],[41,31,17,393],[41,32,17,417,"forEach"],[41,39,17,393],[41,40,17,425],[41,50,17,435,"key"],[41,53,17,425],[41,55,17,440],[42,0,17,442,"Object"],[42,10,17,442,"Object"],[42,16,17,448],[42,17,17,449,"defineProperty"],[42,31,17,442],[42,32,17,464,"target"],[42,38,17,442],[42,40,17,472,"key"],[42,43,17,442],[42,45,17,477,"Object"],[42,51,17,483],[42,52,17,484,"getOwnPropertyDescriptor"],[42,76,17,477],[42,77,17,509,"source"],[42,83,17,477],[42,85,17,517,"key"],[42,88,17,477],[42,89,17,442],[43,0,17,525],[43,9,17,393],[44,0,17,529],[45,0,17,531],[47,0,17,532],[47,11,17,539,"target"],[47,17,17,532],[48,0,17,548],[50,0,20,0],[50,11,20,9,"joinClaimValue"],[50,25,20,0],[50,26,20,24,"items"],[50,31,20,0],[50,33,20,31],[51,0,21,2],[51,8,21,6,"values"],[51,14,21,12],[51,17,21,15,"Array"],[51,22,21,20],[51,23,21,21,"isArray"],[51,30,21,15],[51,31,21,29,"items"],[51,36,21,15],[51,40,21,38,"items"],[51,45,21,15],[51,48,21,46],[51,49,21,47,"items"],[51,54,21,46],[51,55,21,2],[52,0,22,2],[52,8,22,6,"claims"],[52,14,22,12],[52,17,22,15],[52,19,22,2],[54,0,24,2],[54,9,24,7],[54,13,24,11,"i"],[54,14,24,12],[54,17,24,15],[54,18,24,2],[54,20,24,18,"i"],[54,21,24,19],[54,24,24,22,"values"],[54,30,24,28],[54,31,24,29,"length"],[54,37,24,2],[54,39,24,37,"i"],[54,40,24,38],[54,44,24,42],[54,45,24,2],[54,47,24,45],[55,0,25,4],[55,10,25,8,"s"],[55,11,25,9],[55,14,25,12,"values"],[55,20,25,18],[55,21,25,19,"i"],[55,22,25,18],[55,23,25,12],[55,24,25,22,"trim"],[55,28,25,12],[55,30,25,4],[56,0,26,4],[56,10,26,8,"s"],[56,11,26,9],[56,16,26,14],[56,19,26,4],[56,21,26,19],[56,28,26,26,"s"],[56,29,26,19],[57,0,27,4,"claims"],[57,6,27,4,"claims"],[57,12,27,10],[57,13,27,11,"push"],[57,17,27,4],[57,18,27,16,"s"],[57,19,27,4],[58,0,28,3],[60,0,30,2],[60,11,30,9,"claims"],[60,17,30,15],[60,18,30,16,"join"],[60,22,30,9],[60,23,30,21],[60,26,30,9],[60,27,30,2],[61,0,31,1],[63,0,48,0],[63,11,48,9,"JWTScopeToken"],[63,24,48,0],[63,25,48,23,"apiSecret"],[63,34,48,0],[63,36,48,34,"resource"],[63,44,48,0],[63,46,48,44,"action"],[63,52,48,0],[63,54,48,52],[64,0,49,2],[64,8,49,6,"options"],[64,15,49,13],[64,18,49,16,"arguments"],[64,27,49,25],[64,28,49,26,"length"],[64,34,49,16],[64,37,49,35],[64,38,49,16],[64,42,49,40,"arguments"],[64,51,49,49],[64,52,49,50],[64,53,49,49],[64,54,49,40],[64,59,49,57,"undefined"],[64,68,49,16],[64,71,49,69,"arguments"],[64,80,49,78],[64,81,49,79],[64,82,49,78],[64,83,49,16],[64,86,49,84],[64,88,49,2],[65,0,50,2],[65,8,50,6,"noTimestamp"],[65,19,50,17],[65,22,50,20,"options"],[65,29,50,27],[65,30,50,28,"expireTokens"],[65,42,50,20],[65,45,50,43],[65,46,50,44,"options"],[65,53,50,51],[65,54,50,52,"expireTokens"],[65,66,50,20],[65,69,50,67],[65,73,50,2],[66,0,51,2],[66,8,51,6,"payload"],[66,15,51,13],[66,18,51,16],[67,0,52,4,"resource"],[67,6,52,4,"resource"],[67,14,52,12],[67,16,52,14,"joinClaimValue"],[67,30,52,28],[67,31,52,29,"resource"],[67,39,52,28],[67,40,51,16],[68,0,53,4,"action"],[68,6,53,4,"action"],[68,12,53,10],[68,14,53,12,"joinClaimValue"],[68,28,53,26],[68,29,53,27,"action"],[68,35,53,26],[69,0,51,16],[69,5,51,2],[70,0,55,2],[70,8,55,6,"options"],[70,15,55,13],[70,16,55,14,"feedId"],[70,22,55,2],[70,24,55,22,"payload"],[70,31,55,29],[70,32,55,30,"feed_id"],[70,39,55,22],[70,42,55,40,"joinClaimValue"],[70,56,55,54],[70,57,55,55,"options"],[70,64,55,62],[70,65,55,63,"feedId"],[70,71,55,54],[70,72,55,22],[71,0,56,2],[71,8,56,6,"options"],[71,15,56,13],[71,16,56,14,"userId"],[71,22,56,2],[71,24,56,22,"payload"],[71,31,56,29],[71,32,56,30,"user_id"],[71,39,56,22],[71,42,56,40,"options"],[71,49,56,47],[71,50,56,48,"userId"],[71,56,56,22],[72,0,57,2],[72,11,57,9,"_jsonwebtoken"],[72,24,57,22],[72,25,57,23,"default"],[72,32,57,9],[72,33,57,31,"sign"],[72,37,57,9],[72,38,57,36,"payload"],[72,45,57,9],[72,47,57,45,"apiSecret"],[72,56,57,9],[72,58,57,56],[73,0,58,4,"algorithm"],[73,6,58,4,"algorithm"],[73,15,58,13],[73,17,58,15],[73,24,57,56],[74,0,59,4,"noTimestamp"],[74,6,59,4,"noTimestamp"],[74,17,59,15],[74,19,59,17,"noTimestamp"],[75,0,57,56],[75,5,57,9],[75,6,57,2],[76,0,61,1],[78,0,75,0],[78,11,75,9,"JWTUserSessionToken"],[78,30,75,0],[78,31,75,29,"apiSecret"],[78,40,75,0],[78,42,75,40,"userId"],[78,48,75,0],[78,50,75,48],[79,0,76,2],[79,8,76,6,"extraData"],[79,17,76,15],[79,20,76,18,"arguments"],[79,29,76,27],[79,30,76,28,"length"],[79,36,76,18],[79,39,76,37],[79,40,76,18],[79,44,76,42,"arguments"],[79,53,76,51],[79,54,76,52],[79,55,76,51],[79,56,76,42],[79,61,76,59,"undefined"],[79,70,76,18],[79,73,76,71,"arguments"],[79,82,76,80],[79,83,76,81],[79,84,76,80],[79,85,76,18],[79,88,76,86],[79,90,76,2],[80,0,77,2],[80,8,77,6,"jwtOptions"],[80,18,77,16],[80,21,77,19,"arguments"],[80,30,77,28],[80,31,77,29,"length"],[80,37,77,19],[80,40,77,38],[80,41,77,19],[80,45,77,43,"arguments"],[80,54,77,52],[80,55,77,53],[80,56,77,52],[80,57,77,43],[80,62,77,60,"undefined"],[80,71,77,19],[80,74,77,72,"arguments"],[80,83,77,81],[80,84,77,82],[80,85,77,81],[80,86,77,19],[80,89,77,87],[80,91,77,2],[82,0,79,2],[82,8,79,6],[82,15,79,13,"userId"],[82,21,79,6],[82,26,79,24],[82,34,79,2],[82,36,79,34],[83,0,80,4],[83,12,80,10],[83,16,80,14,"TypeError"],[83,25,80,10],[83,26,80,24],[83,53,80,10],[83,54,80,4],[84,0,81,3],[86,0,83,2],[86,8,83,6,"payload"],[86,15,83,13],[86,18,83,16,"_objectSpread"],[86,31,83,29],[86,32,83,30],[87,0,84,4,"user_id"],[87,6,84,4,"user_id"],[87,13,84,11],[87,15,84,13,"userId"],[88,0,83,30],[88,5,83,29],[88,7,85,5,"extraData"],[88,16,83,29],[88,17,83,2],[90,0,87,2],[90,8,87,6,"opts"],[90,12,87,10],[90,15,87,13,"_objectSpread"],[90,28,87,26],[90,29,87,27],[91,0,88,4,"algorithm"],[91,6,88,4,"algorithm"],[91,15,88,13],[91,17,88,15],[91,24,87,27],[92,0,89,4,"noTimestamp"],[92,6,89,4,"noTimestamp"],[92,17,89,15],[92,19,89,17],[93,0,87,27],[93,5,87,26],[93,7,90,5,"jwtOptions"],[93,17,87,26],[93,18,87,2],[95,0,92,2],[95,11,92,9,"_jsonwebtoken"],[95,24,92,22],[95,25,92,23,"default"],[95,32,92,9],[95,33,92,31,"sign"],[95,37,92,9],[95,38,92,36,"payload"],[95,45,92,9],[95,47,92,45,"apiSecret"],[95,56,92,9],[95,58,92,56,"opts"],[95,62,92,9],[95,63,92,2],[96,0,93,1]],"functionMap":{"names":["<global>","ownKeys","symbols.filter$argument_0","_objectSpread","ownKeys.forEach$argument_0","joinClaimValue","JWTScopeToken","JWTUserSessionToken"],"mappings":"AAA;ACc,gNC,kFD,mDD;AGE,wLC,2ED,sKC,oGD,uBH;AKG;CLW;AMiB;CNa;AOc"}},"type":"js/module"}]}