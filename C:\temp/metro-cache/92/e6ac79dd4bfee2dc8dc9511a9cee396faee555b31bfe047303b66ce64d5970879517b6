{"dependencies":[{"name":"react","data":{"isAsync":false,"locs":[{"start":{"line":15,"column":14},"end":{"line":15,"column":30}}]}},{"name":"./use-websocket","data":{"isAsync":false,"locs":[{"start":{"line":16,"column":22},"end":{"line":16,"column":48}}]}},{"name":"./constants","data":{"isAsync":false,"locs":[{"start":{"line":17,"column":18},"end":{"line":17,"column":40}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __assign = this && this.__assign || function () {\n    __assign = Object.assign || function (t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useSocketIO = void 0;\n\n  var react_1 = _$$_REQUIRE(_dependencyMap[0], \"react\");\n\n  var use_websocket_1 = _$$_REQUIRE(_dependencyMap[1], \"./use-websocket\");\n\n  var constants_1 = _$$_REQUIRE(_dependencyMap[2], \"./constants\");\n\n  var emptyEvent = {\n    type: 'empty',\n    payload: null\n  };\n\n  var getSocketData = function getSocketData(event) {\n    if (!event || !event.data) {\n      return emptyEvent;\n    }\n\n    var match = event.data.match(/\\[.*]/);\n\n    if (!match) {\n      return emptyEvent;\n    }\n\n    var data = JSON.parse(match);\n\n    if (!Array.isArray(data) || !data[1]) {\n      return emptyEvent;\n    }\n\n    return {\n      type: data[0],\n      payload: data[1]\n    };\n  };\n\n  exports.useSocketIO = function (url, options, connect) {\n    if (options === void 0) {\n      options = constants_1.DEFAULT_OPTIONS;\n    }\n\n    if (connect === void 0) {\n      connect = true;\n    }\n\n    var optionsWithSocketIO = react_1.useMemo(function () {\n      return __assign(__assign({}, options), {\n        fromSocketIO: true\n      });\n    }, []);\n\n    var _a = use_websocket_1.useWebSocket(url, optionsWithSocketIO, connect),\n        sendMessage = _a.sendMessage,\n        sendJsonMessage = _a.sendJsonMessage,\n        lastMessage = _a.lastMessage,\n        readyState = _a.readyState,\n        getWebSocket = _a.getWebSocket;\n\n    var socketIOLastMessage = react_1.useMemo(function () {\n      return getSocketData(lastMessage);\n    }, [lastMessage]);\n    return {\n      sendMessage: sendMessage,\n      sendJsonMessage: sendJsonMessage,\n      lastMessage: socketIOLastMessage,\n      lastJsonMessage: socketIOLastMessage,\n      readyState: readyState,\n      getWebSocket: getWebSocket\n    };\n  };\n});","lineCount":93,"map":[[2,0,1,0],[4,0,2,0],[4,6,2,4,"__assign"],[4,14,2,12],[4,17,2,16],[4,25,2,24],[4,30,2,29,"__assign"],[4,38,2,15],[4,42,2,42],[4,54,2,54],[5,0,3,4,"__assign"],[5,4,3,4,"__assign"],[5,12,3,12],[5,15,3,15,"Object"],[5,21,3,21],[5,22,3,22,"assign"],[5,28,3,15],[5,32,3,32],[5,42,3,41,"t"],[5,43,3,32],[5,45,3,44],[6,0,4,8],[6,11,4,13],[6,15,4,17,"s"],[6,16,4,13],[6,18,4,20,"i"],[6,19,4,21],[6,22,4,24],[6,23,4,13],[6,25,4,27,"n"],[6,26,4,28],[6,29,4,31,"arguments"],[6,38,4,40],[6,39,4,41,"length"],[6,45,4,8],[6,47,4,49,"i"],[6,48,4,50],[6,51,4,53,"n"],[6,52,4,8],[6,54,4,56,"i"],[6,55,4,57],[6,57,4,8],[6,59,4,61],[7,0,5,12,"s"],[7,8,5,12,"s"],[7,9,5,13],[7,12,5,16,"arguments"],[7,21,5,25],[7,22,5,26,"i"],[7,23,5,25],[7,24,5,12],[9,0,6,12],[9,13,6,17],[9,17,6,21,"p"],[9,18,6,12],[9,22,6,26,"s"],[9,23,6,12],[10,0,6,29],[10,14,6,33,"Object"],[10,20,6,39],[10,21,6,40,"prototype"],[10,30,6,33],[10,31,6,50,"hasOwnProperty"],[10,45,6,33],[10,46,6,65,"call"],[10,50,6,33],[10,51,6,70,"s"],[10,52,6,33],[10,54,6,73,"p"],[10,55,6,33],[10,56,6,29],[10,58,7,16,"t"],[10,59,7,17],[10,60,7,18,"p"],[10,61,7,17],[10,62,7,16],[10,65,7,23,"s"],[10,66,7,24],[10,67,7,25,"p"],[10,68,7,24],[10,69,7,16],[11,0,6,12],[12,0,8,9],[14,0,9,8],[14,13,9,15,"t"],[14,14,9,8],[15,0,10,5],[15,5,3,4],[17,0,11,4],[17,11,11,11,"__assign"],[17,19,11,19],[17,20,11,20,"apply"],[17,25,11,11],[17,26,11,26],[17,30,11,11],[17,32,11,32,"arguments"],[17,41,11,11],[17,42,11,4],[18,0,12,1],[18,3,2,0],[20,0,13,0,"Object"],[20,2,13,0,"Object"],[20,8,13,6],[20,9,13,7,"defineProperty"],[20,23,13,0],[20,24,13,22,"exports"],[20,31,13,0],[20,33,13,31],[20,45,13,0],[20,47,13,45],[21,0,13,47,"value"],[21,4,13,47,"value"],[21,9,13,52],[21,11,13,54],[22,0,13,45],[22,3,13,0],[23,0,14,0,"exports"],[23,2,14,0,"exports"],[23,9,14,7],[23,10,14,8,"useSocketIO"],[23,21,14,0],[23,24,14,22],[23,29,14,27],[23,30,14,0],[25,0,15,0],[25,6,15,4,"react_1"],[25,13,15,11],[25,16,15,14,"require"],[25,27,15,21],[25,55,15,0],[27,0,16,0],[27,6,16,4,"use_websocket_1"],[27,21,16,19],[27,24,16,22,"require"],[27,35,16,29],[27,73,16,0],[29,0,17,0],[29,6,17,4,"constants_1"],[29,17,17,15],[29,20,17,18,"require"],[29,31,17,25],[29,65,17,0],[31,0,18,0],[31,6,18,4,"emptyEvent"],[31,16,18,14],[31,19,18,17],[32,0,19,4,"type"],[32,4,19,4,"type"],[32,8,19,8],[32,10,19,10],[32,17,18,17],[33,0,20,4,"payload"],[33,4,20,4,"payload"],[33,11,20,11],[33,13,20,13],[34,0,18,17],[34,3,18,0],[36,0,22,0],[36,6,22,4,"getSocketData"],[36,19,22,17],[36,22,22,20],[36,31,22,4,"getSocketData"],[36,44,22,20],[36,45,22,30,"event"],[36,50,22,20],[36,52,22,37],[37,0,23,4],[37,8,23,8],[37,9,23,9,"event"],[37,14,23,8],[37,18,23,18],[37,19,23,19,"event"],[37,24,23,24],[37,25,23,25,"data"],[37,29,23,4],[37,31,23,31],[38,0,24,8],[38,13,24,15,"emptyEvent"],[38,23,24,8],[39,0,25,5],[41,0,26,4],[41,8,26,8,"match"],[41,13,26,13],[41,16,26,16,"event"],[41,21,26,21],[41,22,26,22,"data"],[41,26,26,16],[41,27,26,27,"match"],[41,32,26,16],[41,33,26,33],[41,40,26,16],[41,41,26,4],[43,0,27,4],[43,8,27,8],[43,9,27,9,"match"],[43,14,27,4],[43,16,27,16],[44,0,28,8],[44,13,28,15,"emptyEvent"],[44,23,28,8],[45,0,29,5],[47,0,30,4],[47,8,30,8,"data"],[47,12,30,12],[47,15,30,15,"JSON"],[47,19,30,19],[47,20,30,20,"parse"],[47,25,30,15],[47,26,30,26,"match"],[47,31,30,15],[47,32,30,4],[49,0,31,4],[49,8,31,8],[49,9,31,9,"Array"],[49,14,31,14],[49,15,31,15,"isArray"],[49,22,31,9],[49,23,31,23,"data"],[49,27,31,9],[49,28,31,8],[49,32,31,32],[49,33,31,33,"data"],[49,37,31,37],[49,38,31,38],[49,39,31,37],[49,40,31,4],[49,42,31,42],[50,0,32,8],[50,13,32,15,"emptyEvent"],[50,23,32,8],[51,0,33,5],[53,0,34,4],[53,11,34,11],[54,0,35,8,"type"],[54,6,35,8,"type"],[54,10,35,12],[54,12,35,14,"data"],[54,16,35,18],[54,17,35,19],[54,18,35,18],[54,19,34,11],[55,0,36,8,"payload"],[55,6,36,8,"payload"],[55,13,36,15],[55,15,36,17,"data"],[55,19,36,21],[55,20,36,22],[55,21,36,21],[56,0,34,11],[56,5,34,4],[57,0,38,1],[57,3,22,0],[59,0,39,0,"exports"],[59,2,39,0,"exports"],[59,9,39,7],[59,10,39,8,"useSocketIO"],[59,21,39,0],[59,24,39,22],[59,34,39,32,"url"],[59,37,39,22],[59,39,39,37,"options"],[59,46,39,22],[59,48,39,46,"connect"],[59,55,39,22],[59,57,39,55],[60,0,40,4],[60,8,40,8,"options"],[60,15,40,15],[60,20,40,20],[60,25,40,25],[60,26,40,4],[60,28,40,28],[61,0,40,30,"options"],[61,6,40,30,"options"],[61,13,40,37],[61,16,40,40,"constants_1"],[61,27,40,51],[61,28,40,52,"DEFAULT_OPTIONS"],[61,43,40,30],[62,0,40,70],[64,0,41,4],[64,8,41,8,"connect"],[64,15,41,15],[64,20,41,20],[64,25,41,25],[64,26,41,4],[64,28,41,28],[65,0,41,30,"connect"],[65,6,41,30,"connect"],[65,13,41,37],[65,16,41,40],[65,20,41,30],[66,0,41,47],[68,0,42,4],[68,8,42,8,"optionsWithSocketIO"],[68,27,42,27],[68,30,42,30,"react_1"],[68,37,42,37],[68,38,42,38,"useMemo"],[68,45,42,30],[68,46,42,46],[68,58,42,58],[69,0,42,60],[69,13,42,68,"__assign"],[69,21,42,76],[69,22,42,77,"__assign"],[69,30,42,85],[69,31,42,86],[69,33,42,85],[69,35,42,90,"options"],[69,42,42,85],[69,43,42,76],[69,45,42,100],[70,0,42,102,"fromSocketIO"],[70,8,42,102,"fromSocketIO"],[70,20,42,114],[70,22,42,116],[71,0,42,100],[71,7,42,76],[71,8,42,60],[72,0,42,127],[72,5,42,30],[72,7,42,129],[72,9,42,30],[72,10,42,4],[74,0,43,4],[74,8,43,8,"_a"],[74,10,43,10],[74,13,43,13,"use_websocket_1"],[74,28,43,28],[74,29,43,29,"useWebSocket"],[74,41,43,13],[74,42,43,42,"url"],[74,45,43,13],[74,47,43,47,"optionsWithSocketIO"],[74,66,43,13],[74,68,43,68,"connect"],[74,75,43,13],[74,76,43,4],[75,0,43,4],[75,8,43,78,"sendMessage"],[75,19,43,89],[75,22,43,92,"_a"],[75,24,43,94],[75,25,43,95,"sendMessage"],[75,36,43,4],[76,0,43,4],[76,8,43,108,"sendJsonMessage"],[76,23,43,123],[76,26,43,126,"_a"],[76,28,43,128],[76,29,43,129,"sendJsonMessage"],[76,44,43,4],[77,0,43,4],[77,8,43,146,"lastMessage"],[77,19,43,157],[77,22,43,160,"_a"],[77,24,43,162],[77,25,43,163,"lastMessage"],[77,36,43,4],[78,0,43,4],[78,8,43,176,"readyState"],[78,18,43,186],[78,21,43,189,"_a"],[78,23,43,191],[78,24,43,192,"readyState"],[78,34,43,4],[79,0,43,4],[79,8,43,204,"getWebSocket"],[79,20,43,216],[79,23,43,219,"_a"],[79,25,43,221],[79,26,43,222,"getWebSocket"],[79,38,43,4],[81,0,44,4],[81,8,44,8,"socketIOLastMessage"],[81,27,44,27],[81,30,44,30,"react_1"],[81,37,44,37],[81,38,44,38,"useMemo"],[81,45,44,30],[81,46,44,46],[81,58,44,58],[82,0,45,8],[82,13,45,15,"getSocketData"],[82,26,45,28],[82,27,45,29,"lastMessage"],[82,38,45,28],[82,39,45,8],[83,0,46,5],[83,5,44,30],[83,7,46,7],[83,8,46,8,"lastMessage"],[83,19,46,7],[83,20,44,30],[83,21,44,4],[84,0,47,4],[84,11,47,11],[85,0,48,8,"sendMessage"],[85,6,48,8,"sendMessage"],[85,17,48,19],[85,19,48,21,"sendMessage"],[85,30,47,11],[86,0,49,8,"sendJsonMessage"],[86,6,49,8,"sendJsonMessage"],[86,21,49,23],[86,23,49,25,"sendJsonMessage"],[86,38,47,11],[87,0,50,8,"lastMessage"],[87,6,50,8,"lastMessage"],[87,17,50,19],[87,19,50,21,"socketIOLastMessage"],[87,38,47,11],[88,0,51,8,"lastJsonMessage"],[88,6,51,8,"lastJsonMessage"],[88,21,51,23],[88,23,51,25,"socketIOLastMessage"],[88,42,47,11],[89,0,52,8,"readyState"],[89,6,52,8,"readyState"],[89,16,52,18],[89,18,52,20,"readyState"],[89,28,47,11],[90,0,53,8,"getWebSocket"],[90,6,53,8,"getWebSocket"],[90,18,53,20],[90,20,53,22,"getWebSocket"],[91,0,47,11],[91,5,47,4],[92,0,55,1],[92,3,39,0]],"functionMap":{"names":["<global>","<anonymous>","getSocketData","exports.useSocketIO","react_1.useMemo$argument_0"],"mappings":"AAA;0CCC;CDU;oBEU;CFgB;sBGC;8CCG,iFD;8CCE;KDE;CHS"}},"type":"js/module"}]}