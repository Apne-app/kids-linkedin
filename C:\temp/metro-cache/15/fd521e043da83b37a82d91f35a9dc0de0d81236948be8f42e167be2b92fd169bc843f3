{"dependencies":[{"name":"react","data":{"isAsync":false}},{"name":"./use-websocket","data":{"isAsync":false}},{"name":"./constants","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var __assign = this && this.__assign || function () {\n    __assign = Object.assign || function (t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return __assign.apply(this, arguments);\n  };\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var react_1 = _$$_REQUIRE(_dependencyMap[0], \"react\");\n\n  var use_websocket_1 = _$$_REQUIRE(_dependencyMap[1], \"./use-websocket\");\n\n  var constants_1 = _$$_REQUIRE(_dependencyMap[2], \"./constants\");\n\n  var emptyEvent = {\n    type: 'empty',\n    payload: null\n  };\n\n  var getSocketData = function getSocketData(event) {\n    if (!event || !event.data) {\n      return emptyEvent;\n    }\n\n    var match = event.data.match(/\\[.*]/);\n\n    if (!match) {\n      return emptyEvent;\n    }\n\n    var data = JSON.parse(match);\n\n    if (!Array.isArray(data) || !data[1]) {\n      return emptyEvent;\n    }\n\n    return {\n      type: data[0],\n      payload: data[1]\n    };\n  };\n\n  exports.useSocketIO = function (url, options, connect) {\n    if (options === void 0) {\n      options = constants_1.DEFAULT_OPTIONS;\n    }\n\n    if (connect === void 0) {\n      connect = true;\n    }\n\n    var optionsWithSocketIO = react_1.useMemo(function () {\n      return __assign(__assign({}, options), {\n        fromSocketIO: true\n      });\n    }, []);\n\n    var _a = use_websocket_1.useWebSocket(url, optionsWithSocketIO, connect),\n        sendMessage = _a.sendMessage,\n        sendJsonMessage = _a.sendJsonMessage,\n        lastMessage = _a.lastMessage,\n        readyState = _a.readyState,\n        getWebSocket = _a.getWebSocket;\n\n    var socketIOLastMessage = react_1.useMemo(function () {\n      return getSocketData(lastMessage);\n    }, [lastMessage]);\n    return {\n      sendMessage: sendMessage,\n      sendJsonMessage: sendJsonMessage,\n      lastMessage: socketIOLastMessage,\n      lastJsonMessage: socketIOLastMessage,\n      readyState: readyState,\n      getWebSocket: getWebSocket\n    };\n  };\n});","lineCount":92,"map":[[2,0,1,0],[4,0,2,0],[4,6,2,4,"__assign"],[4,14,2,12],[4,17,2,16],[4,25,2,24],[4,30,2,29,"__assign"],[4,38,2,15],[4,42,2,42],[4,54,2,54],[5,0,3,4,"__assign"],[5,4,3,4,"__assign"],[5,12,3,12],[5,15,3,15,"Object"],[5,21,3,21],[5,22,3,22,"assign"],[5,28,3,15],[5,32,3,32],[5,42,3,41,"t"],[5,43,3,32],[5,45,3,44],[6,0,4,8],[6,11,4,13],[6,15,4,17,"s"],[6,16,4,13],[6,18,4,20,"i"],[6,19,4,21],[6,22,4,24],[6,23,4,13],[6,25,4,27,"n"],[6,26,4,28],[6,29,4,31,"arguments"],[6,38,4,40],[6,39,4,41,"length"],[6,45,4,8],[6,47,4,49,"i"],[6,48,4,50],[6,51,4,53,"n"],[6,52,4,8],[6,54,4,56,"i"],[6,55,4,57],[6,57,4,8],[6,59,4,61],[7,0,5,12,"s"],[7,8,5,12,"s"],[7,9,5,13],[7,12,5,16,"arguments"],[7,21,5,25],[7,22,5,26,"i"],[7,23,5,25],[7,24,5,12],[9,0,6,12],[9,13,6,17],[9,17,6,21,"p"],[9,18,6,12],[9,22,6,26,"s"],[9,23,6,12],[10,0,6,29],[10,14,6,33,"Object"],[10,20,6,39],[10,21,6,40,"prototype"],[10,30,6,33],[10,31,6,50,"hasOwnProperty"],[10,45,6,33],[10,46,6,65,"call"],[10,50,6,33],[10,51,6,70,"s"],[10,52,6,33],[10,54,6,73,"p"],[10,55,6,33],[10,56,6,29],[10,58,7,16,"t"],[10,59,7,17],[10,60,7,18,"p"],[10,61,7,17],[10,62,7,16],[10,65,7,23,"s"],[10,66,7,24],[10,67,7,25,"p"],[10,68,7,24],[10,69,7,16],[11,0,6,12],[12,0,8,9],[14,0,9,8],[14,13,9,15,"t"],[14,14,9,8],[15,0,10,5],[15,5,3,4],[17,0,11,4],[17,11,11,11,"__assign"],[17,19,11,19],[17,20,11,20,"apply"],[17,25,11,11],[17,26,11,26],[17,30,11,11],[17,32,11,32,"arguments"],[17,41,11,11],[17,42,11,4],[18,0,12,1],[18,3,2,0],[20,0,13,0,"Object"],[20,2,13,0,"Object"],[20,8,13,6],[20,9,13,7,"defineProperty"],[20,23,13,0],[20,24,13,22,"exports"],[20,31,13,0],[20,33,13,31],[20,45,13,0],[20,47,13,45],[21,0,13,47,"value"],[21,4,13,47,"value"],[21,9,13,52],[21,11,13,54],[22,0,13,45],[22,3,13,0],[24,0,14,0],[24,6,14,4,"react_1"],[24,13,14,11],[24,16,14,14,"require"],[24,27,14,21],[24,55,14,0],[26,0,15,0],[26,6,15,4,"use_websocket_1"],[26,21,15,19],[26,24,15,22,"require"],[26,35,15,29],[26,73,15,0],[28,0,16,0],[28,6,16,4,"constants_1"],[28,17,16,15],[28,20,16,18,"require"],[28,31,16,25],[28,65,16,0],[30,0,17,0],[30,6,17,4,"emptyEvent"],[30,16,17,14],[30,19,17,17],[31,0,18,4,"type"],[31,4,18,4,"type"],[31,8,18,8],[31,10,18,10],[31,17,17,17],[32,0,19,4,"payload"],[32,4,19,4,"payload"],[32,11,19,11],[32,13,19,13],[33,0,17,17],[33,3,17,0],[35,0,21,0],[35,6,21,4,"getSocketData"],[35,19,21,17],[35,22,21,20],[35,31,21,4,"getSocketData"],[35,44,21,20],[35,45,21,30,"event"],[35,50,21,20],[35,52,21,37],[36,0,22,4],[36,8,22,8],[36,9,22,9,"event"],[36,14,22,8],[36,18,22,18],[36,19,22,19,"event"],[36,24,22,24],[36,25,22,25,"data"],[36,29,22,4],[36,31,22,31],[37,0,23,8],[37,13,23,15,"emptyEvent"],[37,23,23,8],[38,0,24,5],[40,0,25,4],[40,8,25,8,"match"],[40,13,25,13],[40,16,25,16,"event"],[40,21,25,21],[40,22,25,22,"data"],[40,26,25,16],[40,27,25,27,"match"],[40,32,25,16],[40,33,25,33],[40,40,25,16],[40,41,25,4],[42,0,26,4],[42,8,26,8],[42,9,26,9,"match"],[42,14,26,4],[42,16,26,16],[43,0,27,8],[43,13,27,15,"emptyEvent"],[43,23,27,8],[44,0,28,5],[46,0,29,4],[46,8,29,8,"data"],[46,12,29,12],[46,15,29,15,"JSON"],[46,19,29,19],[46,20,29,20,"parse"],[46,25,29,15],[46,26,29,26,"match"],[46,31,29,15],[46,32,29,4],[48,0,30,4],[48,8,30,8],[48,9,30,9,"Array"],[48,14,30,14],[48,15,30,15,"isArray"],[48,22,30,9],[48,23,30,23,"data"],[48,27,30,9],[48,28,30,8],[48,32,30,32],[48,33,30,33,"data"],[48,37,30,37],[48,38,30,38],[48,39,30,37],[48,40,30,4],[48,42,30,42],[49,0,31,8],[49,13,31,15,"emptyEvent"],[49,23,31,8],[50,0,32,5],[52,0,33,4],[52,11,33,11],[53,0,34,8,"type"],[53,6,34,8,"type"],[53,10,34,12],[53,12,34,14,"data"],[53,16,34,18],[53,17,34,19],[53,18,34,18],[53,19,33,11],[54,0,35,8,"payload"],[54,6,35,8,"payload"],[54,13,35,15],[54,15,35,17,"data"],[54,19,35,21],[54,20,35,22],[54,21,35,21],[55,0,33,11],[55,5,33,4],[56,0,37,1],[56,3,21,0],[58,0,38,0,"exports"],[58,2,38,0,"exports"],[58,9,38,7],[58,10,38,8,"useSocketIO"],[58,21,38,0],[58,24,38,22],[58,34,38,32,"url"],[58,37,38,22],[58,39,38,37,"options"],[58,46,38,22],[58,48,38,46,"connect"],[58,55,38,22],[58,57,38,55],[59,0,39,4],[59,8,39,8,"options"],[59,15,39,15],[59,20,39,20],[59,25,39,25],[59,26,39,4],[59,28,39,28],[60,0,39,30,"options"],[60,6,39,30,"options"],[60,13,39,37],[60,16,39,40,"constants_1"],[60,27,39,51],[60,28,39,52,"DEFAULT_OPTIONS"],[60,43,39,30],[61,0,39,70],[63,0,40,4],[63,8,40,8,"connect"],[63,15,40,15],[63,20,40,20],[63,25,40,25],[63,26,40,4],[63,28,40,28],[64,0,40,30,"connect"],[64,6,40,30,"connect"],[64,13,40,37],[64,16,40,40],[64,20,40,30],[65,0,40,47],[67,0,41,4],[67,8,41,8,"optionsWithSocketIO"],[67,27,41,27],[67,30,41,30,"react_1"],[67,37,41,37],[67,38,41,38,"useMemo"],[67,45,41,30],[67,46,41,46],[67,58,41,58],[68,0,41,60],[68,13,41,68,"__assign"],[68,21,41,76],[68,22,41,77,"__assign"],[68,30,41,85],[68,31,41,86],[68,33,41,85],[68,35,41,90,"options"],[68,42,41,85],[68,43,41,76],[68,45,41,100],[69,0,41,102,"fromSocketIO"],[69,8,41,102,"fromSocketIO"],[69,20,41,114],[69,22,41,116],[70,0,41,100],[70,7,41,76],[70,8,41,60],[71,0,41,127],[71,5,41,30],[71,7,41,129],[71,9,41,30],[71,10,41,4],[73,0,42,4],[73,8,42,8,"_a"],[73,10,42,10],[73,13,42,13,"use_websocket_1"],[73,28,42,28],[73,29,42,29,"useWebSocket"],[73,41,42,13],[73,42,42,42,"url"],[73,45,42,13],[73,47,42,47,"optionsWithSocketIO"],[73,66,42,13],[73,68,42,68,"connect"],[73,75,42,13],[73,76,42,4],[74,0,42,4],[74,8,42,78,"sendMessage"],[74,19,42,89],[74,22,42,92,"_a"],[74,24,42,94],[74,25,42,95,"sendMessage"],[74,36,42,4],[75,0,42,4],[75,8,42,108,"sendJsonMessage"],[75,23,42,123],[75,26,42,126,"_a"],[75,28,42,128],[75,29,42,129,"sendJsonMessage"],[75,44,42,4],[76,0,42,4],[76,8,42,146,"lastMessage"],[76,19,42,157],[76,22,42,160,"_a"],[76,24,42,162],[76,25,42,163,"lastMessage"],[76,36,42,4],[77,0,42,4],[77,8,42,176,"readyState"],[77,18,42,186],[77,21,42,189,"_a"],[77,23,42,191],[77,24,42,192,"readyState"],[77,34,42,4],[78,0,42,4],[78,8,42,204,"getWebSocket"],[78,20,42,216],[78,23,42,219,"_a"],[78,25,42,221],[78,26,42,222,"getWebSocket"],[78,38,42,4],[80,0,43,4],[80,8,43,8,"socketIOLastMessage"],[80,27,43,27],[80,30,43,30,"react_1"],[80,37,43,37],[80,38,43,38,"useMemo"],[80,45,43,30],[80,46,43,46],[80,58,43,58],[81,0,44,8],[81,13,44,15,"getSocketData"],[81,26,44,28],[81,27,44,29,"lastMessage"],[81,38,44,28],[81,39,44,8],[82,0,45,5],[82,5,43,30],[82,7,45,7],[82,8,45,8,"lastMessage"],[82,19,45,7],[82,20,43,30],[82,21,43,4],[83,0,46,4],[83,11,46,11],[84,0,47,8,"sendMessage"],[84,6,47,8,"sendMessage"],[84,17,47,19],[84,19,47,21,"sendMessage"],[84,30,46,11],[85,0,48,8,"sendJsonMessage"],[85,6,48,8,"sendJsonMessage"],[85,21,48,23],[85,23,48,25,"sendJsonMessage"],[85,38,46,11],[86,0,49,8,"lastMessage"],[86,6,49,8,"lastMessage"],[86,17,49,19],[86,19,49,21,"socketIOLastMessage"],[86,38,46,11],[87,0,50,8,"lastJsonMessage"],[87,6,50,8,"lastJsonMessage"],[87,21,50,23],[87,23,50,25,"socketIOLastMessage"],[87,42,46,11],[88,0,51,8,"readyState"],[88,6,51,8,"readyState"],[88,16,51,18],[88,18,51,20,"readyState"],[88,28,46,11],[89,0,52,8,"getWebSocket"],[89,6,52,8,"getWebSocket"],[89,18,52,20],[89,20,52,22,"getWebSocket"],[90,0,46,11],[90,5,46,4],[91,0,54,1],[91,3,38,0]],"functionMap":{"names":["<global>","<anonymous>","getSocketData","exports.useSocketIO","react_1.useMemo$argument_0"],"mappings":"AAA;0CCC;CDU;oBES;CFgB;sBGC;8CCG,iFD;8CCE;KDE;CHS"}},"type":"js/module"}]}