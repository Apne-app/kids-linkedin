{"dependencies":[{"name":"./commons","data":{"isAsync":false}},{"name":"base64-arraybuffer","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _require = _$$_REQUIRE(_dependencyMap[0], \"./commons\"),\n      PACKET_TYPES_REVERSE = _require.PACKET_TYPES_REVERSE,\n      ERROR_PACKET = _require.ERROR_PACKET;\n\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n  var base64decoder;\n\n  if (withNativeArrayBuffer) {\n    base64decoder = _$$_REQUIRE(_dependencyMap[1], \"base64-arraybuffer\");\n  }\n\n  var decodePacket = function decodePacket(encodedPacket, binaryType) {\n    if (typeof encodedPacket !== \"string\") {\n      return {\n        type: \"message\",\n        data: mapBinary(encodedPacket, binaryType)\n      };\n    }\n\n    var type = encodedPacket.charAt(0);\n\n    if (type === \"b\") {\n      return {\n        type: \"message\",\n        data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n      };\n    }\n\n    var packetType = PACKET_TYPES_REVERSE[type];\n\n    if (!packetType) {\n      return ERROR_PACKET;\n    }\n\n    return encodedPacket.length > 1 ? {\n      type: PACKET_TYPES_REVERSE[type],\n      data: encodedPacket.substring(1)\n    } : {\n      type: PACKET_TYPES_REVERSE[type]\n    };\n  };\n\n  var decodeBase64Packet = function decodeBase64Packet(data, binaryType) {\n    if (base64decoder) {\n      var decoded = base64decoder.decode(data);\n      return mapBinary(decoded, binaryType);\n    } else {\n      return {\n        base64: true,\n        data: data\n      };\n    }\n  };\n\n  var mapBinary = function mapBinary(data, binaryType) {\n    switch (binaryType) {\n      case \"blob\":\n        return data instanceof ArrayBuffer ? new Blob([data]) : data;\n\n      case \"arraybuffer\":\n      default:\n        return data;\n    }\n  };\n\n  module.exports = decodePacket;\n});","lineCount":68,"map":[[2,17,1,47,"require"],[2,28,1,54],[2,60],[3,6,1,8,"PACKET_TYPES_REVERSE"],[3,26],[3,38,1,8,"PACKET_TYPES_REVERSE"],[3,58],[4,6,1,30,"ERROR_PACKET"],[4,18],[4,30,1,30,"ERROR_PACKET"],[4,42],[6,0,3,0],[6,6,3,6,"withNativeArrayBuffer"],[6,27,3,27],[6,30,3,30],[6,37,3,37,"ArrayBuffer"],[6,48,3,30],[6,53,3,53],[6,63,3,0],[7,0,5,0],[7,6,5,4,"base64decoder"],[7,19,5,0],[9,0,6,0],[9,6,6,4,"withNativeArrayBuffer"],[9,27,6,0],[9,29,6,27],[10,0,7,2,"base64decoder"],[10,4,7,2,"base64decoder"],[10,17,7,15],[10,20,7,18,"require"],[10,31,7,25],[10,72,7,2],[11,0,8,1],[13,0,10,0],[13,6,10,6,"decodePacket"],[13,18,10,18],[13,21,10,21],[13,30,10,6,"decodePacket"],[13,42,10,21],[13,43,10,22,"encodedPacket"],[13,56,10,21],[13,58,10,37,"binaryType"],[13,68,10,21],[13,70,10,52],[14,0,11,2],[14,8,11,6],[14,15,11,13,"encodedPacket"],[14,28,11,6],[14,33,11,31],[14,41,11,2],[14,43,11,41],[15,0,12,4],[15,13,12,11],[16,0,13,6,"type"],[16,8,13,6,"type"],[16,12,13,10],[16,14,13,12],[16,23,12,11],[17,0,14,6,"data"],[17,8,14,6,"data"],[17,12,14,10],[17,14,14,12,"mapBinary"],[17,23,14,21],[17,24,14,22,"encodedPacket"],[17,37,14,21],[17,39,14,37,"binaryType"],[17,49,14,21],[18,0,12,11],[18,7,12,4],[19,0,16,3],[21,0,17,2],[21,8,17,8,"type"],[21,12,17,12],[21,15,17,15,"encodedPacket"],[21,28,17,28],[21,29,17,29,"charAt"],[21,35,17,15],[21,36,17,36],[21,37,17,15],[21,38,17,2],[23,0,18,2],[23,8,18,6,"type"],[23,12,18,10],[23,17,18,15],[23,20,18,2],[23,22,18,20],[24,0,19,4],[24,13,19,11],[25,0,20,6,"type"],[25,8,20,6,"type"],[25,12,20,10],[25,14,20,12],[25,23,19,11],[26,0,21,6,"data"],[26,8,21,6,"data"],[26,12,21,10],[26,14,21,12,"decodeBase64Packet"],[26,32,21,30],[26,33,21,31,"encodedPacket"],[26,46,21,44],[26,47,21,45,"substring"],[26,56,21,31],[26,57,21,55],[26,58,21,31],[26,59,21,30],[26,61,21,59,"binaryType"],[26,71,21,30],[27,0,19,11],[27,7,19,4],[28,0,23,3],[30,0,24,2],[30,8,24,8,"packetType"],[30,18,24,18],[30,21,24,21,"PACKET_TYPES_REVERSE"],[30,41,24,41],[30,42,24,42,"type"],[30,46,24,41],[30,47,24,2],[32,0,25,2],[32,8,25,6],[32,9,25,7,"packetType"],[32,19,25,2],[32,21,25,19],[33,0,26,4],[33,13,26,11,"ERROR_PACKET"],[33,25,26,4],[34,0,27,3],[36,0,28,2],[36,11,28,9,"encodedPacket"],[36,24,28,22],[36,25,28,23,"length"],[36,31,28,9],[36,34,28,32],[36,35,28,9],[36,38,29,6],[37,0,30,8,"type"],[37,6,30,8,"type"],[37,10,30,12],[37,12,30,14,"PACKET_TYPES_REVERSE"],[37,32,30,34],[37,33,30,35,"type"],[37,37,30,34],[37,38,29,6],[38,0,31,8,"data"],[38,6,31,8,"data"],[38,10,31,12],[38,12,31,14,"encodedPacket"],[38,25,31,27],[38,26,31,28,"substring"],[38,35,31,14],[38,36,31,38],[38,37,31,14],[39,0,29,6],[39,5,28,9],[39,8,33,6],[40,0,34,8,"type"],[40,6,34,8,"type"],[40,10,34,12],[40,12,34,14,"PACKET_TYPES_REVERSE"],[40,32,34,34],[40,33,34,35,"type"],[40,37,34,34],[41,0,33,6],[41,5,28,2],[42,0,36,1],[42,3,10,0],[44,0,38,0],[44,6,38,6,"decodeBase64Packet"],[44,24,38,24],[44,27,38,27],[44,36,38,6,"decodeBase64Packet"],[44,54,38,27],[44,55,38,28,"data"],[44,59,38,27],[44,61,38,34,"binaryType"],[44,71,38,27],[44,73,38,49],[45,0,39,2],[45,8,39,6,"base64decoder"],[45,21,39,2],[45,23,39,21],[46,0,40,4],[46,10,40,10,"decoded"],[46,17,40,17],[46,20,40,20,"base64decoder"],[46,33,40,33],[46,34,40,34,"decode"],[46,40,40,20],[46,41,40,41,"data"],[46,45,40,20],[46,46,40,4],[47,0,41,4],[47,13,41,11,"mapBinary"],[47,22,41,20],[47,23,41,21,"decoded"],[47,30,41,20],[47,32,41,30,"binaryType"],[47,42,41,20],[47,43,41,4],[48,0,42,3],[48,5,39,2],[48,11,42,9],[49,0,43,4],[49,13,43,11],[50,0,43,13,"base64"],[50,8,43,13,"base64"],[50,14,43,19],[50,16,43,21],[50,20,43,11],[51,0,43,27,"data"],[51,8,43,27,"data"],[51,12,43,31],[51,14,43,27,"data"],[52,0,43,11],[52,7,43,4],[53,0,44,3],[54,0,45,1],[54,3,38,0],[56,0,47,0],[56,6,47,6,"mapBinary"],[56,15,47,15],[56,18,47,18],[56,27,47,6,"mapBinary"],[56,36,47,18],[56,37,47,19,"data"],[56,41,47,18],[56,43,47,25,"binaryType"],[56,53,47,18],[56,55,47,40],[57,0,48,2],[57,12,48,10,"binaryType"],[57,22,48,2],[58,0,49,4],[58,11,49,9],[58,17,49,4],[59,0,50,6],[59,15,50,13,"data"],[59,19,50,17],[59,31,50,29,"ArrayBuffer"],[59,42,50,13],[59,45,50,43],[59,49,50,47,"Blob"],[59,53,50,43],[59,54,50,52],[59,55,50,53,"data"],[59,59,50,52],[59,60,50,43],[59,61,50,13],[59,64,50,62,"data"],[59,68,50,6],[61,0,51,4],[61,11,51,9],[61,24,51,4],[62,0,52,4],[63,0,53,6],[63,15,53,13,"data"],[63,19,53,6],[64,0,48,2],[65,0,55,1],[65,3,47,0],[67,0,57,0,"module"],[67,2,57,0,"module"],[67,8,57,6],[67,9,57,7,"exports"],[67,16,57,0],[67,19,57,17,"decodePacket"],[67,31,57,0]],"functionMap":{"names":["<global>","decodePacket","decodeBase64Packet","mapBinary"],"mappings":"AAA;qBCS;CD0B;2BEE;CFO;kBGE;CHQ"}},"type":"js/module"}]}