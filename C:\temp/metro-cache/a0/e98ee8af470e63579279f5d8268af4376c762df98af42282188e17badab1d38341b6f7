{"dependencies":[{"name":"request","data":{"isAsync":false}},{"name":"./errors.js","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var request = _$$_REQUIRE(_dependencyMap[0], \"request\");\n\n  var errors = _$$_REQUIRE(_dependencyMap[1], \"./errors.js\");\n\n  var Client = function Client() {\n    this.initialize.apply(this, arguments);\n  };\n\n  Client.prototype = {\n    baseUrl: 'https://analytics.stream-io-api.com/analytics/v1.0/',\n    initialize: function initialize(cfg) {\n      var configs = cfg || {};\n\n      if (!configs.apiKey || !configs.token) {\n        throw new errors.MisconfiguredClient('the client must be initialized with apiKey and token');\n      }\n\n      this.apiKey = configs.apiKey;\n      this.token = configs.token;\n    },\n    send: function send(resourceName, eventData) {\n      var callback = function callback(err, response) {\n        if (err) {\n          throw err;\n        }\n\n        if (!/^2\\d\\d$/.test(response.statusCode)) {\n          throw new errors.APIError(response.responseText);\n        }\n      };\n\n      return this.post({\n        'url': this.baseUrl + resourceName + '/',\n        'body': eventData\n      }, callback);\n    },\n    userAgent: function userAgent() {\n      var description = this.node ? 'node' : 'browser';\n      var version = 'unknown';\n      return 'stream-javascript-client-' + description + '-' + version;\n    },\n    enrichKwargs: function enrichKwargs(kwargs) {\n      if (kwargs.qs === undefined) {\n        kwargs.qs = {};\n      }\n\n      kwargs.qs['api_key'] = this.apiKey;\n      kwargs.json = true;\n      kwargs.headers = {};\n      kwargs.headers['stream-auth-type'] = 'jwt';\n      kwargs.headers.Authorization = this.token;\n      kwargs.headers['X-Stream-Client'] = this.userAgent();\n      kwargs.timeout = 10 * 1000;\n      return kwargs;\n    },\n    post: function post(kwargs, callback) {\n      kwargs = this.enrichKwargs(kwargs);\n      kwargs.method = 'POST';\n      return request(kwargs, callback);\n    }\n  };\n  module.exports = Client;\n});","lineCount":64,"map":[[2,0,1,0],[2,6,1,4,"request"],[2,13,1,11],[2,16,1,14,"require"],[2,27,1,21],[2,57,1,0],[4,0,2,0],[4,6,2,4,"errors"],[4,12,2,10],[4,15,2,13,"require"],[4,26,2,20],[4,60,2,0],[6,0,4,0],[6,6,4,4,"Client"],[6,12,4,10],[6,15,4,13],[6,24,4,4,"Client"],[6,30,4,13],[6,33,4,25],[7,0,5,2],[7,9,5,7,"initialize"],[7,19,5,2],[7,20,5,18,"apply"],[7,25,5,2],[7,26,5,24],[7,30,5,2],[7,32,5,30,"arguments"],[7,41,5,2],[8,0,6,1],[8,3,4,0],[10,0,8,0,"Client"],[10,2,8,0,"Client"],[10,8,8,6],[10,9,8,7,"prototype"],[10,18,8,0],[10,21,8,19],[11,0,9,2,"baseUrl"],[11,4,9,2,"baseUrl"],[11,11,9,9],[11,13,9,11],[11,66,8,19],[12,0,11,2,"initialize"],[12,4,11,2,"initialize"],[12,14,11,12],[12,16,11,14],[12,36,11,24,"cfg"],[12,39,11,14],[12,41,11,29],[13,0,12,4],[13,10,12,8,"configs"],[13,17,12,15],[13,20,12,18,"cfg"],[13,23,12,21],[13,27,12,25],[13,29,12,4],[15,0,13,4],[15,10,13,8],[15,11,13,9,"configs"],[15,18,13,16],[15,19,13,17,"apiKey"],[15,25,13,8],[15,29,13,27],[15,30,13,28,"configs"],[15,37,13,35],[15,38,13,36,"token"],[15,43,13,4],[15,45,13,43],[16,0,14,6],[16,14,14,12],[16,18,14,16,"errors"],[16,24,14,22],[16,25,14,23,"MisconfiguredClient"],[16,44,14,12],[16,45,14,43],[16,99,14,12],[16,100,14,6],[17,0,15,5],[19,0,17,4],[19,11,17,9,"apiKey"],[19,17,17,4],[19,20,17,18,"configs"],[19,27,17,25],[19,28,17,26,"apiKey"],[19,34,17,4],[20,0,18,4],[20,11,18,9,"token"],[20,16,18,4],[20,19,18,17,"configs"],[20,26,18,24],[20,27,18,25,"token"],[20,32,18,4],[21,0,19,3],[21,5,8,19],[22,0,21,2,"send"],[22,4,21,2,"send"],[22,8,21,6],[22,10,21,8],[22,24,21,18,"resourceName"],[22,36,21,8],[22,38,21,32,"eventData"],[22,47,21,8],[22,49,21,43],[23,0,22,4],[23,10,22,8,"callback"],[23,18,22,16],[23,21,22,19],[23,30,22,8,"callback"],[23,38,22,19],[23,39,22,29,"err"],[23,42,22,19],[23,44,22,34,"response"],[23,52,22,19],[23,54,22,44],[24,0,23,6],[24,12,23,10,"err"],[24,15,23,6],[24,17,23,15],[25,0,24,8],[25,16,24,14,"err"],[25,19,24,8],[26,0,25,7],[28,0,27,6],[28,12,27,10],[28,13,27,11],[28,23,27,21,"test"],[28,27,27,11],[28,28,27,26,"response"],[28,36,27,34],[28,37,27,35,"statusCode"],[28,47,27,11],[28,48,27,6],[28,50,27,48],[29,0,28,8],[29,16,28,14],[29,20,28,18,"errors"],[29,26,28,24],[29,27,28,25,"APIError"],[29,35,28,14],[29,36,28,34,"response"],[29,44,28,42],[29,45,28,43,"responseText"],[29,57,28,14],[29,58,28,8],[30,0,29,7],[31,0,31,5],[31,7,22,4],[33,0,33,4],[33,13,33,11],[33,18,33,16,"post"],[33,22,33,11],[33,23,34,6],[34,0,35,8],[34,15,35,15],[34,20,35,20,"baseUrl"],[34,27,35,15],[34,30,35,30,"resourceName"],[34,42,35,15],[34,45,35,45],[34,48,34,6],[35,0,36,8],[35,16,36,16,"eventData"],[36,0,34,6],[36,7,33,11],[36,9,37,9,"callback"],[36,17,33,11],[36,18,33,4],[37,0,38,3],[37,5,8,19],[38,0,40,2,"userAgent"],[38,4,40,2,"userAgent"],[38,13,40,11],[38,15,40,13],[38,36,40,25],[39,0,41,4],[39,10,41,8,"description"],[39,21,41,19],[39,24,41,23],[39,29,41,28,"node"],[39,33,41,22],[39,36,41,36],[39,42,41,22],[39,45,41,45],[39,54,41,4],[40,0,42,4],[40,10,42,8,"version"],[40,17,42,15],[40,20,42,18],[40,29,42,4],[41,0,43,4],[41,13,43,11],[41,43,43,41,"description"],[41,54,43,11],[41,57,43,55],[41,60,43,11],[41,63,43,61,"version"],[41,70,43,4],[42,0,44,3],[42,5,8,19],[43,0,46,2,"enrichKwargs"],[43,4,46,2,"enrichKwargs"],[43,16,46,14],[43,18,46,16],[43,40,46,26,"kwargs"],[43,46,46,16],[43,48,46,34],[44,0,47,4],[44,10,47,8,"kwargs"],[44,16,47,14],[44,17,47,15,"qs"],[44,19,47,8],[44,24,47,22,"undefined"],[44,33,47,4],[44,35,47,33],[45,0,48,6,"kwargs"],[45,8,48,6,"kwargs"],[45,14,48,12],[45,15,48,13,"qs"],[45,17,48,6],[45,20,48,18],[45,22,48,6],[46,0,49,5],[48,0,51,4,"kwargs"],[48,6,51,4,"kwargs"],[48,12,51,10],[48,13,51,11,"qs"],[48,15,51,4],[48,16,51,14],[48,25,51,4],[48,29,51,27],[48,34,51,32,"apiKey"],[48,40,51,4],[49,0,52,4,"kwargs"],[49,6,52,4,"kwargs"],[49,12,52,10],[49,13,52,11,"json"],[49,17,52,4],[49,20,52,18],[49,24,52,4],[50,0,53,4,"kwargs"],[50,6,53,4,"kwargs"],[50,12,53,10],[50,13,53,11,"headers"],[50,20,53,4],[50,23,53,21],[50,25,53,4],[51,0,54,4,"kwargs"],[51,6,54,4,"kwargs"],[51,12,54,10],[51,13,54,11,"headers"],[51,20,54,4],[51,21,54,19],[51,39,54,4],[51,43,54,41],[51,48,54,4],[52,0,55,4,"kwargs"],[52,6,55,4,"kwargs"],[52,12,55,10],[52,13,55,11,"headers"],[52,20,55,4],[52,21,55,19,"Authorization"],[52,34,55,4],[52,37,55,35],[52,42,55,40,"token"],[52,47,55,4],[53,0,56,4,"kwargs"],[53,6,56,4,"kwargs"],[53,12,56,10],[53,13,56,11,"headers"],[53,20,56,4],[53,21,56,19],[53,38,56,4],[53,42,56,40],[53,47,56,45,"userAgent"],[53,56,56,40],[53,58,56,4],[54,0,57,4,"kwargs"],[54,6,57,4,"kwargs"],[54,12,57,10],[54,13,57,11,"timeout"],[54,20,57,4],[54,23,57,21],[54,28,57,26],[54,32,57,4],[55,0,58,4],[55,13,58,11,"kwargs"],[55,19,58,4],[56,0,59,3],[56,5,8,19],[57,0,61,2,"post"],[57,4,61,2,"post"],[57,8,61,6],[57,10,61,8],[57,24,61,18,"kwargs"],[57,30,61,8],[57,32,61,26,"callback"],[57,40,61,8],[57,42,61,36],[58,0,62,4,"kwargs"],[58,6,62,4,"kwargs"],[58,12,62,10],[58,15,62,13],[58,20,62,18,"enrichKwargs"],[58,32,62,13],[58,33,62,31,"kwargs"],[58,39,62,13],[58,40,62,4],[59,0,63,4,"kwargs"],[59,6,63,4,"kwargs"],[59,12,63,10],[59,13,63,11,"method"],[59,19,63,4],[59,22,63,20],[59,28,63,4],[60,0,64,4],[60,13,64,11,"request"],[60,20,64,18],[60,21,64,19,"kwargs"],[60,27,64,18],[60,29,64,27,"callback"],[60,37,64,18],[60,38,64,4],[61,0,65,3],[62,0,8,19],[62,3,8,0],[63,0,68,0,"module"],[63,2,68,0,"module"],[63,8,68,6],[63,9,68,7,"exports"],[63,16,68,0],[63,19,68,17,"Client"],[63,25,68,0]],"functionMap":{"names":["<global>","Client","Client.prototype.initialize","Client.prototype.send","callback","Client.prototype.userAgent","Client.prototype.enrichKwargs","Client.prototype.post"],"mappings":"AAA;aCG;CDE;cEK;GFQ;QGE;mBCC;KDS;GHO;aKE;GLI;gBME;GNa;QOE;GPI"}},"type":"js/module"}]}