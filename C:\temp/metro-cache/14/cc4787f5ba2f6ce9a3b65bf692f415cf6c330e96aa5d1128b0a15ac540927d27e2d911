{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false,"locs":[]}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false,"locs":[]}},{"name":"invariant","data":{"isAsync":false,"locs":[{"start":{"line":13,"column":18},"end":{"line":13,"column":38}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}function u(t,n){var o;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=f(t))||n&&t&&\"number\"==typeof t.length){o&&(t=o);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(o=t[Symbol.iterator]()).next.bind(o)}function f(t,n){if(t){if(\"string\"==typeof t)return h(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===o&&t.constructor&&(o=t.constructor.name),\"Map\"===o||\"Set\"===o?Array.from(t):\"Arguments\"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(t,n):void 0}}function h(t,n){(null==n||n>t.length)&&(n=t.length);for(var o=0,s=new Array(n);o<n;o++)s[o]=t[o];return s}var v=r(d[4]),b=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,c){var l=this._config,u=l.itemVisiblePercentThreshold,f=l.viewAreaCoveragePercentThreshold,h=null!=f,b=h?f:u;v(null!=b&&null!=u!=(null!=f),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var j=I;j<=O;j++){var P=s(j);if(P){var S=P.offset-n,A=S+P.length;if(S<o&&A>0)w=j,y(h,b,S,A,o,P.length)&&p.push(j);else if(w>=0)break}}return p}},{key:\"onUpdate\",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});for(var f,h=this._viewableItems,v=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),b=[],y=u(v);!(f=y()).done;){var p=f.value,w=n(p,2),_=w[0],I=w[1];h.has(_)||b.push(I)}for(var O,j=u(h);!(O=j()).done;){var P=O.value,S=n(P,2),A=S[0],T=S[1];v.has(A)||b.push(l(l({},T),{},{isViewable:!1}))}b.length>0&&(this._viewableItems=v,o({viewableItems:Array.from(v.values()),changed:b,viewabilityConfig:this._config}))}}]),t})();function y(t,n,o,s,c,l){if(w(o,s,c))return!0;var u=p(o,s,c);return 100*(t?u/c:u/l)>=n}function p(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function w(t,n,o){return t>=0&&n<=o&&n>t}m.exports=b});","lineCount":1,"map":[[1,28,11,0],[1,1478,13,0],[1,1482,13,6,"invariant"],[1,1484,13,18,"require"],[1,1486,13,25,"d"],[1,1488,13,25],[1,1492,75,6,"ViewabilityHelper"],[1,1506,82,2],[1,1515,82,2,"ViewabilityHelper"],[1,1519,84,4],[1,1523,83,4,"config"],[1,1525,84,4,"arguments"],[1,1535,84,4,"length"],[1,1542,84,4],[1,1550,84,4,"undefined"],[1,1554,84,4,"arguments"],[1,1564,84,4],[1,1567,84,4,"arguments"],[1,1577,84,4],[1,1581,83,33,"viewAreaCoveragePercentThreshold"],[1,1614,83,67],[1,1617,84,4,"_classCallCheck"],[1,1619,84,4,"this"],[1,1624,84,4,"ViewabilityHelper"],[1,1627,84,4,"this"],[1,1632,77,2,"_hasInteracted"],[1,1648,77,28],[1,1650,84,4,"this"],[1,1655,78,2,"_timers"],[1,1663,78,25],[1,1667,78,29,"Set"],[1,1671,84,4,"this"],[1,1676,79,2,"_viewableIndices"],[1,1696,84,4,"this"],[1,1701,80,2,"_viewableItems"],[1,1716,80,43],[1,1720,80,47,"Map"],[1,1724,85,4,"this"],[1,1729,85,9,"_config"],[1,1737,85,19,"config"],[1,1772,91,2],[1,1783,95,4,"this"],[1,1788,95,9,"_timers"],[1,1796,95,17,"forEach"],[1,1804,95,25,"clearTimeout"],[1,1854,101,2],[1,1863,102,4,"itemCount"],[1,1865,103,4,"scrollOffset"],[1,1867,104,4,"viewportHeight"],[1,1869,105,4,"getFrameMetrics"],[1,1871,113,4,"renderRange"],[1,1874,118,19],[1,1878,118,19,"_this$_config"],[1,1880,122,8,"this"],[1,1885,122,13,"_config"],[1,1893,120,6,"itemVisiblePercentThreshold"],[1,1895,118,19,"_this$_config"],[1,1897,120,6,"itemVisiblePercentThreshold"],[1,1925,121,6,"viewAreaCoveragePercentThreshold"],[1,1927,118,19,"_this$_config"],[1,1929,121,6,"viewAreaCoveragePercentThreshold"],[1,1962,123,10,"viewAreaMode"],[1,1964,123,61],[1,1970,123,25,"viewAreaCoveragePercentThreshold"],[1,1972,124,10,"viewablePercentThreshold"],[1,1974,124,37,"viewAreaMode"],[1,1976,125,8,"viewAreaCoveragePercentThreshold"],[1,1978,126,8,"itemVisiblePercentThreshold"],[1,1980,127,4,"invariant"],[1,1982,128,34],[1,1988,128,6,"viewablePercentThreshold"],[1,1991,129,40],[1,1997,129,9,"itemVisiblePercentThreshold"],[1,2001,130,47],[1,2007,130,11,"viewAreaCoveragePercentThreshold"],[1,2010,131,6],[1,2101,133,4],[1,2105,133,10,"viewableIndices"],[1,2110,134,4],[1,2113,134,22],[1,2117,134,8,"itemCount"],[1,2119,135,6],[1,2126,135,13,"viewableIndices"],[1,2128,137,4],[1,2132,137,8,"firstVisible"],[1,2135,137,20],[1,2137,118,19,"_ref"],[1,2139,138,26,"renderRange"],[1,2143,138,42,"first"],[1,2149,138,49],[1,2151,138,52,"last"],[1,2156,138,58,"itemCount"],[1,2158,138,70],[1,2161,138,11,"first"],[1,2163,118,19,"_ref"],[1,2165,138,11,"first"],[1,2171,138,18,"last"],[1,2173,118,19,"_ref"],[1,2175,138,18,"last"],[1,2180,139,4],[1,2183,139,8,"last"],[1,2186,139,16,"itemCount"],[1,2188,144,6],[1,2195,140,6,"console"],[1,2203,140,14,"warn"],[1,2208,141,8],[1,2254,142,10,"JSON"],[1,2259,142,15,"stringify"],[1,2270,142,26,"renderRange"],[1,2282,142,26,"renderRange"],[1,2284,142,39,"itemCount"],[1,2294,142,39,"itemCount"],[1,2302,146,4],[1,2306,146,9],[1,2310,146,13,"idx"],[1,2312,146,19,"first"],[1,2314,146,26,"idx"],[1,2317,146,33,"last"],[1,2319,146,39,"idx"],[1,2323,146,46],[1,2324,147,6],[1,2328,147,12,"metrics"],[1,2330,147,22,"getFrameMetrics"],[1,2332,147,38,"idx"],[1,2335,148,6],[1,2338,148,11,"metrics"],[1,2340,148,6],[1,2341,151,6],[1,2345,151,12,"top"],[1,2347,151,18,"metrics"],[1,2349,151,26,"offset"],[1,2356,151,35,"scrollOffset"],[1,2358,152,12,"bottom"],[1,2360,152,21,"top"],[1,2362,152,27,"metrics"],[1,2364,152,35,"length"],[1,2371,153,6],[1,2374,153,10,"top"],[1,2376,153,16,"viewportHeight"],[1,2379,153,34,"bottom"],[1,2381,153,43],[1,2383,154,8,"firstVisible"],[1,2385,154,23,"idx"],[1,2387,156,10,"_isViewable"],[1,2389,157,12,"viewAreaMode"],[1,2391,158,12,"viewablePercentThreshold"],[1,2393,159,12,"top"],[1,2395,160,12,"bottom"],[1,2397,161,12,"viewportHeight"],[1,2399,162,12,"metrics"],[1,2401,162,20,"length"],[1,2410,165,10,"viewableIndices"],[1,2412,165,26,"push"],[1,2417,165,31,"idx"],[1,2425,167,13],[1,2428,167,17,"firstVisible"],[1,2431,167,33],[1,2433,168,8],[1,2440,171,4],[1,2447,171,11,"viewableIndices"],[1,2473,178,2],[1,2482,179,4,"itemCount"],[1,2484,180,4,"scrollOffset"],[1,2486,181,4,"viewportHeight"],[1,2488,182,4,"getFrameMetrics"],[1,2490,189,4,"createViewToken"],[1,2492,190,4,"onViewableItemsChanged"],[1,2494,196,4,"renderRange"],[1,2497,201,10],[1,2501,201,10,"_this"],[1,2503,201,10,"this"],[1,2508,202,4],[1,2513,203,7,"this"],[1,2518,203,12,"_config"],[1,2526,203,20,"waitForInteraction"],[1,2546,203,43,"this"],[1,2551,203,48,"_hasInteracted"],[1,2568,204,20],[1,2572,204,6,"itemCount"],[1,2575,205,7,"getFrameMetrics"],[1,2577,205,23],[1,2580,202,4],[1,2581,209,4],[1,2585,209,8,"viewableIndices"],[1,2590,219,4],[1,2593,210,8,"itemCount"],[1,2597,211,6,"viewableIndices"],[1,2599,211,24,"this"],[1,2604,211,29,"computeViewableItems"],[1,2625,212,8,"itemCount"],[1,2627,213,8,"scrollOffset"],[1,2629,214,8,"viewportHeight"],[1,2631,215,8,"getFrameMetrics"],[1,2633,216,8,"renderRange"],[1,2637,220,6,"this"],[1,2642,220,11,"_viewableIndices"],[1,2659,220,28,"length"],[1,2668,220,39,"viewableIndices"],[1,2670,220,55,"length"],[1,2679,221,6,"this"],[1,2684,221,11,"_viewableIndices"],[1,2701,221,28,"every"],[1,2707,221,34],[1,2716,221,35,"v"],[1,2718,221,38,"ii"],[1,2721,221,34],[1,2728,221,45,"v"],[1,2732,221,51,"viewableIndices"],[1,2734,221,67,"ii"],[1,2739,228,4],[1,2742,227,4,"this"],[1,2747,227,9,"_viewableIndices"],[1,2764,227,28,"viewableIndices"],[1,2766,228,8,"this"],[1,2771,228,13,"_config"],[1,2779,228,21,"minimumViewTime"],[1,2795,228,38],[1,2796,229,6],[1,2800,229,12,"handle"],[1,2802,229,21,"setTimeout"],[1,2813,229,32],[1,2824,233,8,"_this"],[1,2826,233,13,"_timers"],[1,2834,233,21,"delete"],[1,2841,233,28,"handle"],[1,2844,234,8,"_this"],[1,2846,234,13,"_onUpdateSync"],[1,2860,235,10,"viewableIndices"],[1,2862,236,10,"onViewableItemsChanged"],[1,2864,237,10,"createViewToken"],[1,2868,239,9,"this"],[1,2873,239,14,"_config"],[1,2881,239,22,"minimumViewTime"],[1,2898,243,6,"this"],[1,2903,243,11,"_timers"],[1,2911,243,19,"add"],[1,2915,243,23,"handle"],[1,2923,245,6,"this"],[1,2928,245,11,"_onUpdateSync"],[1,2942,246,8,"viewableIndices"],[1,2944,247,8,"onViewableItemsChanged"],[1,2946,248,8,"createViewToken"],[1,2986,256,2],[1,2997,257,4,"this"],[1,3002,257,9,"_viewableIndices"],[1,3055,263,2],[1,3066,264,4,"this"],[1,3071,264,9,"_hasInteracted"],[1,3087,264,26],[1,3118,267,2],[1,3127,268,4,"viewableIndicesToCheck"],[1,3129,269,4,"onViewableItemsChanged"],[1,3131,270,4,"createViewToken"],[1,3134,271,4],[1,3138,271,4,"_this2"],[1,3140,271,4,"this"],[1,3145,273,4,"viewableIndicesToCheck"],[1,3147,273,29,"viewableIndicesToCheck"],[1,3149,273,52,"filter"],[1,3156,273,59],[1,3165,273,59,"ii"],[1,3168,273,61],[1,3175,274,6,"_this2"],[1,3177,274,11,"_viewableIndices"],[1,3194,274,28,"includes"],[1,3203,274,37,"ii"],[1,3208,285,4],[1,3212,276,4],[1,3216,285,4,"_step"],[1,3218,276,10,"prevItems"],[1,3220,276,22,"this"],[1,3225,276,27,"_viewableItems"],[1,3240,277,10,"nextItems"],[1,3242,277,22],[1,3246,277,26,"Map"],[1,3250,278,6,"viewableIndicesToCheck"],[1,3252,278,29,"map"],[1,3256,278,33],[1,3265,278,33,"ii"],[1,3268,279,8],[1,3272,279,14,"viewable"],[1,3274,279,25,"createViewToken"],[1,3276,279,41,"ii"],[1,3279,279,45],[1,3282,280,8],[1,3289,280,16,"viewable"],[1,3291,280,25,"key"],[1,3295,280,30,"viewable"],[1,3301,284,10,"changed"],[1,3306,285,4,"_iterator"],[1,3308,285,4,"_createForOfIteratorHelperLoose"],[1,3310,285,34,"nextItems"],[1,3315,285,4,"_step"],[1,3317,285,4,"_iterator"],[1,3322,285,4,"done"],[1,3328,285,45],[1,3329,285,45],[1,3333,285,45,"_ref2"],[1,3335,285,45,"_step"],[1,3337,285,45,"value"],[1,3343,285,45,"_ref3"],[1,3345,285,45,"_slicedToArray"],[1,3347,285,45,"_ref2"],[1,3349,285,45],[1,3352,285,16,"key"],[1,3354,285,45,"_ref3"],[1,3356,285,45],[1,3359,285,21,"viewable"],[1,3361,285,45,"_ref3"],[1,3363,285,45],[1,3366,286,11,"prevItems"],[1,3368,286,21,"has"],[1,3372,286,25,"key"],[1,3376,287,8,"changed"],[1,3378,287,16,"push"],[1,3383,287,21,"viewable"],[1,3386,290,4],[1,3390,290,4],[1,3394,290,4,"_step2"],[1,3396,290,4,"_iterator2"],[1,3398,290,4,"_createForOfIteratorHelperLoose"],[1,3400,290,34,"prevItems"],[1,3405,290,4,"_step2"],[1,3407,290,4,"_iterator2"],[1,3412,290,4,"done"],[1,3418,290,45],[1,3419,290,45],[1,3423,290,45,"_ref4"],[1,3425,290,45,"_step2"],[1,3427,290,45,"value"],[1,3433,290,45,"_ref5"],[1,3435,290,45,"_slicedToArray"],[1,3437,290,45,"_ref4"],[1,3439,290,45],[1,3442,290,16,"key"],[1,3444,290,45,"_ref5"],[1,3446,290,45],[1,3449,290,21,"viewable"],[1,3451,290,45,"_ref5"],[1,3453,290,45],[1,3456,291,11,"nextItems"],[1,3458,291,21,"has"],[1,3462,291,25,"key"],[1,3466,292,8,"changed"],[1,3468,292,16,"push"],[1,3473,292,8,"_objectSpread"],[1,3475,292,8,"_objectSpread"],[1,3480,292,25,"viewable"],[1,3487,292,35,"isViewable"],[1,3499,292,47],[1,3504,295,8,"changed"],[1,3506,295,16,"length"],[1,3513,295,25],[1,3517,296,6,"this"],[1,3522,296,11,"_viewableItems"],[1,3537,296,28,"nextItems"],[1,3539,297,6,"onViewableItemsChanged"],[1,3542,298,8,"viewableItems"],[1,3556,298,23,"Array"],[1,3562,298,29,"from"],[1,3567,298,34,"nextItems"],[1,3569,298,44,"values"],[1,3579,299,8,"changed"],[1,3587,299,8,"changed"],[1,3589,300,8,"viewabilityConfig"],[1,3607,300,27,"this"],[1,3612,300,32,"_config"],[1,3633,306,0],[1,3642,306,9,"_isViewable"],[1,3644,307,2,"viewAreaMode"],[1,3646,308,2,"viewablePercentThreshold"],[1,3648,309,2,"top"],[1,3650,310,2,"bottom"],[1,3652,311,2,"viewportHeight"],[1,3654,312,2,"itemLength"],[1,3657,314,2],[1,3660,314,6,"_isEntirelyVisible"],[1,3662,314,25,"top"],[1,3664,314,30,"bottom"],[1,3666,314,38,"viewportHeight"],[1,3669,315,4],[1,3676,315,11],[1,3678,317,4],[1,3682,317,10,"pixels"],[1,3684,317,19,"_getPixelsVisible"],[1,3686,317,37,"top"],[1,3688,317,42,"bottom"],[1,3690,317,50,"viewportHeight"],[1,3693,320,4],[1,3700,319,6],[1,3705,319,13,"viewAreaMode"],[1,3707,319,28,"pixels"],[1,3709,319,37,"viewportHeight"],[1,3711,319,54,"pixels"],[1,3713,319,63,"itemLength"],[1,3717,320,22,"viewablePercentThreshold"],[1,3719,324,0],[1,3728,324,9,"_getPixelsVisible"],[1,3730,325,2,"top"],[1,3732,326,2,"bottom"],[1,3734,327,2,"viewportHeight"],[1,3737,329,2],[1,3741,329,8,"visibleHeight"],[1,3743,329,24,"Math"],[1,3748,329,29,"min"],[1,3752,329,33,"bottom"],[1,3754,329,41,"viewportHeight"],[1,3757,329,59,"Math"],[1,3762,329,64,"max"],[1,3766,329,68,"top"],[1,3768,329,73],[1,3771,330,2],[1,3778,330,9,"Math"],[1,3783,330,14,"max"],[1,3787,330,18],[1,3789,330,21,"visibleHeight"],[1,3792,333,0],[1,3801,333,9,"_isEntirelyVisible"],[1,3803,334,2,"top"],[1,3805,335,2,"bottom"],[1,3807,336,2,"viewportHeight"],[1,3810,338,2],[1,3817,338,9,"top"],[1,3820,338,16],[1,3823,338,21,"bottom"],[1,3826,338,31,"viewportHeight"],[1,3829,338,49,"bottom"],[1,3831,338,58,"top"],[1,3833,341,0,"module"],[1,3835,341,7,"exports"],[1,3843,341,17,"ViewabilityHelper"]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","computeViewableItems","onUpdate","_viewableIndices.every$argument_0","setTimeout$argument_0","resetViewableIndices","recordInteraction","_onUpdateSync","viewableIndicesToCheck.filter$argument_0","viewableIndicesToCheck.map$argument_0","_isViewable","_getPixelsVisible","_isEntirelyVisible"],"mappings":"AAA;AC0E;ECO;GDI;EEK;GFK;EGK;GHuE;EIM;kCC2C,oCD;gCEQ;OFU;GJY;EOK;GPE;EQK;GRE;ESE;2DCM;wCDC;iCEI;OFG;GTsB;CDC;AaE;CbgB;AcE;CdO;AeE;CfM"}},"type":"js/module"}]}