{"dependencies":[{"name":"asap","data":{"isAsync":false}},{"name":"../util/class","data":{"isAsync":false}},{"name":"../util/promise","data":{"isAsync":false}},{"name":"../util/array","data":{"isAsync":false}},{"name":"../util/browser","data":{"isAsync":false}},{"name":"../util/constants","data":{"isAsync":false}},{"name":"../util/assign","data":{"isAsync":false}},{"name":"../util/validate_options","data":{"isAsync":false}},{"name":"../mixins/deferrable","data":{"isAsync":false}},{"name":"../mixins/logging","data":{"isAsync":false}},{"name":"../mixins/publisher","data":{"isAsync":false}},{"name":"./channel","data":{"isAsync":false}},{"name":"./dispatcher","data":{"isAsync":false}},{"name":"./error","data":{"isAsync":false}},{"name":"./extensible","data":{"isAsync":false}},{"name":"./publication","data":{"isAsync":false}},{"name":"./subscription","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=(r(d[2]),r(d[3])),c=r(d[4]),h=r(d[5]),o=r(d[6]),u=r(d[7]),l=r(d[8]),_=r(d[9]),f=r(d[10]),p=r(d[11]),N=r(d[12]),E=r(d[13]),C=r(d[14]),I=r(d[15]),b=r(d[16]),T=s({className:'Client',UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:'handshake',RETRY:'retry',NONE:'none',CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:'/bayeux',INTERVAL:0,initialize:function(t,s){this.info('New client created for ?',t),u(s=s||{},['interval','timeout','endpoints','proxy','retry','scheduler','websocketExtensions','tls','ca']),this._channels=new p.Set,this._dispatcher=N.create(this,t||this.DEFAULT_ENDPOINT,s),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(s.interval||this.INTERVAL),timeout:1e3*(s.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind('message',this._receiveMessage,this),c.Event&&void 0!==g.onbeforeunload&&c.Event.on(g,'beforeunload',function(){n.indexOf(this._dispatcher._disabled,'autodisconnect')<0&&this.disconnect()},this)},addWebsocketExtension:function(t){return this._dispatcher.addWebsocketExtension(t)},disable:function(t){return this._dispatcher.disable(t)},setHeader:function(t,s){return this._dispatcher.setHeader(t,s)},handshake:function(s,n){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var c=this;this.info('Initiating handshake with ?',this._dispatcher.endpoint.href),this._dispatcher.selectTransport(h.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:p.HANDSHAKE,version:h.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(h){h.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=h.clientId,this._dispatcher.selectTransport(h.supportedConnectionTypes),this.info('Handshake successful: ?',this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),s&&t(function(){s.call(n)})):(this.info('Handshake unsuccessful'),g.setTimeout(function(){c.handshake(s,n)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(t,s){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,s)},this);this.callback(t,s),this._state===this.CONNECTED&&(this.info('Calling deferred actions for ?',this._dispatcher.clientId),this.setDeferredStatus('succeeded'),this.setDeferredStatus('unknown'),this._connectRequest||(this._connectRequest=!0,this.info('Initiating connection for ?',this._dispatcher.clientId),this._sendMessage({channel:p.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info('Disconnecting ?',this._dispatcher.clientId);var t=new I;return this._sendMessage({channel:p.DISCONNECT,clientId:this._dispatcher.clientId},{},function(s){s.successful?(this._dispatcher.close(),t.setDeferredStatus('succeeded')):t.setDeferredStatus('failed',E.parse(s.error))},this),this.info('Clearing channel listeners for ?',this._dispatcher.clientId),this._channels=new p.Set,t}},subscribe:function(t,s,c){if(t instanceof Array)return n.map(t,function(t){return this.subscribe(t,s,c)},this);var h=new b(this,t,s,c),o=!0===s;return this._channels.hasSubscription(t)&&!o?(this._channels.subscribe([t],h),h.setDeferredStatus('succeeded'),h):(this.connect(function(){this.info('Client ? attempting to subscribe to ?',this._dispatcher.clientId,t),o||this._channels.subscribe([t],h),this._sendMessage({channel:p.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(s){if(!s.successful)return h.setDeferredStatus('failed',E.parse(s.error)),this._channels.unsubscribe(t,h);var n=[].concat(s.subscription);this.info('Subscription acknowledged for ? to ?',this._dispatcher.clientId,n),h.setDeferredStatus('succeeded')},this)},this),h)},unsubscribe:function(t,s){if(t instanceof Array)return n.map(t,function(t){return this.unsubscribe(t,s)},this);this._channels.unsubscribe(t,s)&&this.connect(function(){this.info('Client ? attempting to unsubscribe from ?',this._dispatcher.clientId,t),this._sendMessage({channel:p.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:t},{},function(t){if(t.successful){var s=[].concat(t.subscription);this.info('Unsubscription acknowledged for ? from ?',this._dispatcher.clientId,s)}},this)},this)},publish:function(t,s,n){u(n||{},['attempts','deadline']);var c=new I;return this.connect(function(){this.info('Client ? queueing published message to ?: ?',this._dispatcher.clientId,t,s),this._sendMessage({channel:t,data:s,clientId:this._dispatcher.clientId},n,function(t){t.successful?c.setDeferredStatus('succeeded'):c.setDeferredStatus('failed',E.parse(t.error))},this)},this),c},_sendMessage:function(t,s,n,c){t.id=this._generateMessageId();var h=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions('outgoing',t,null,function(t){t&&(n&&(this._responseCallbacks[t.id]=[n,c]),this._dispatcher.sendMessage(t,h,s||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(t){var s,n=t.id;void 0!==t.successful&&(s=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions('incoming',t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),s&&s[0].call(s[1],t))},this)},_handleAdvice:function(t){o(this._advice,t),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info('Client ? calling listeners for ? with ?',this._dispatcher.clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info('Closed connection for ?',this._dispatcher.clientId));var t=this;g.setTimeout(function(){t.connect()},this._advice.interval)}});o(T.prototype,l),o(T.prototype,f),o(T.prototype,_),o(T.prototype,C),m.exports=T});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0],[1,45,3,4,"asap"],[1,47,3,22,"require"],[1,49,3,29,"d"],[1,51,3,29],[1,55,4,4,"Class"],[1,57,4,22,"require"],[1,59,4,29,"d"],[1,61,4,29],[1,65,6,4,"array"],[1,68,5,22,"require"],[1,70,5,29,"d"],[1,72,5,29],[1,76,6,22,"require"],[1,78,6,29,"d"],[1,80,6,29],[1,85,7,4,"browser"],[1,87,7,22,"require"],[1,89,7,29,"d"],[1,91,7,29],[1,95,8,4,"constants"],[1,97,8,22,"require"],[1,99,8,29,"d"],[1,101,8,29],[1,105,9,4,"assign"],[1,107,9,22,"require"],[1,109,9,29,"d"],[1,111,9,29],[1,115,10,4,"validateOptions"],[1,117,10,22,"require"],[1,119,10,29,"d"],[1,121,10,29],[1,125,11,4,"Deferrable"],[1,127,11,22,"require"],[1,129,11,29,"d"],[1,131,11,29],[1,135,12,4,"Logging"],[1,137,12,22,"require"],[1,139,12,29,"d"],[1,141,12,29],[1,145,13,4,"Publisher"],[1,147,13,22,"require"],[1,149,13,29,"d"],[1,151,13,29],[1,156,14,4,"Channel"],[1,158,14,22,"require"],[1,160,14,29,"d"],[1,162,14,29],[1,167,15,4,"Dispatcher"],[1,169,15,22,"require"],[1,171,15,29,"d"],[1,173,15,29],[1,178,16,4,"Error"],[1,180,16,22,"require"],[1,182,16,29,"d"],[1,184,16,29],[1,189,17,4,"Extensible"],[1,191,17,22,"require"],[1,193,17,29,"d"],[1,195,17,29],[1,200,18,4,"Publication"],[1,202,18,22,"require"],[1,204,18,29,"d"],[1,206,18,29],[1,211,19,4,"Subscription"],[1,213,19,22,"require"],[1,215,19,29,"d"],[1,217,19,29],[1,222,21,4,"Client"],[1,224,21,13,"Class"],[1,227,21,21,"className"],[1,237,21,32],[1,246,22,2,"UNCONNECTED"],[1,258,22,16],[1,260,23,2,"CONNECTING"],[1,271,23,16],[1,273,24,2,"CONNECTED"],[1,283,24,16],[1,285,25,2,"DISCONNECTED"],[1,298,25,16],[1,300,27,2,"HANDSHAKE"],[1,310,27,13],[1,322,28,2,"RETRY"],[1,328,28,13],[1,336,29,2,"NONE"],[1,341,29,13],[1,348,31,2,"CONNECTION_TIMEOUT"],[1,367,31,22],[1,370,33,2,"DEFAULT_ENDPOINT"],[1,387,33,20],[1,397,34,2,"INTERVAL"],[1,406,34,20],[1,408,36,2,"initialize"],[1,419,36,14],[1,428,36,23,"endpoint"],[1,430,36,33,"options"],[1,433,37,4,"this"],[1,438,37,9,"info"],[1,443,37,14],[1,470,37,42,"endpoint"],[1,473,40,4,"validateOptions"],[1,475,38,4,"options"],[1,477,38,14,"options"],[1,484,40,30],[1,495,40,42],[1,505,40,53],[1,517,40,66],[1,525,40,75],[1,533,40,84],[1,545,40,97],[1,567,40,120],[1,573,40,127],[1,580,42,4,"this"],[1,585,42,9,"_channels"],[1,595,42,23],[1,599,42,27,"Channel"],[1,601,42,35,"Set"],[1,605,43,4,"this"],[1,610,43,9,"_dispatcher"],[1,622,43,23,"Dispatcher"],[1,624,43,34,"create"],[1,631,43,41,"this"],[1,636,43,47,"endpoint"],[1,639,43,59,"this"],[1,644,43,64,"DEFAULT_ENDPOINT"],[1,661,43,82,"options"],[1,664,45,4,"this"],[1,669,45,9,"_messageId"],[1,680,45,22],[1,682,46,4,"this"],[1,687,46,9,"_state"],[1,694,46,22,"this"],[1,699,46,27,"UNCONNECTED"],[1,711,48,4,"this"],[1,716,48,9,"_responseCallbacks"],[1,738,50,4,"this"],[1,743,50,9,"_advice"],[1,752,51,6,"reconnect"],[1,762,51,17,"this"],[1,767,51,22,"RETRY"],[1,773,52,6,"interval"],[1,782,52,17],[1,787,52,25,"options"],[1,789,52,33,"interval"],[1,799,52,45,"this"],[1,804,52,50,"INTERVAL"],[1,814,53,6,"timeout"],[1,822,53,17],[1,827,53,25,"options"],[1,829,53,33,"timeout"],[1,838,53,45,"this"],[1,843,53,50,"CONNECTION_TIMEOUT"],[1,864,55,4,"this"],[1,869,55,9,"_dispatcher"],[1,881,55,21,"timeout"],[1,889,55,31,"this"],[1,894,55,36,"_advice"],[1,902,55,44,"timeout"],[1,910,55,54],[1,914,57,4,"this"],[1,919,57,9,"_dispatcher"],[1,931,57,21,"bind"],[1,936,57,26],[1,946,57,37,"this"],[1,951,57,42,"_receiveMessage"],[1,967,57,59,"this"],[1,973,59,8,"browser"],[1,975,59,16,"Event"],[1,987,59,51,"undefined"],[1,991,59,25,"global"],[1,993,59,32,"onbeforeunload"],[1,1009,60,6,"browser"],[1,1011,60,14,"Event"],[1,1017,60,20,"on"],[1,1020,60,23,"global"],[1,1022,60,31],[1,1037,60,47],[1,1048,61,12,"array"],[1,1050,61,18,"indexOf"],[1,1058,61,26,"this"],[1,1063,61,31,"_dispatcher"],[1,1075,61,43,"_disabled"],[1,1085,61,54],[1,1103,61,74],[1,1106,62,10,"this"],[1,1111,62,15,"disconnect"],[1,1125,63,9,"this"],[1,1132,66,2,"addWebsocketExtension"],[1,1154,66,25],[1,1163,66,34,"extension"],[1,1166,67,4],[1,1173,67,11,"this"],[1,1178,67,16,"_dispatcher"],[1,1190,67,28,"addWebsocketExtension"],[1,1212,67,50,"extension"],[1,1216,70,2,"disable"],[1,1224,70,11],[1,1233,70,20,"feature"],[1,1236,71,4],[1,1243,71,11,"this"],[1,1248,71,16,"_dispatcher"],[1,1260,71,28,"disable"],[1,1268,71,36,"feature"],[1,1272,74,2,"setHeader"],[1,1282,74,13],[1,1291,74,22,"name"],[1,1293,74,28,"value"],[1,1296,75,4],[1,1303,75,11,"this"],[1,1308,75,16,"_dispatcher"],[1,1320,75,28,"setHeader"],[1,1330,75,38,"name"],[1,1332,75,44,"value"],[1,1336,97,2,"handshake"],[1,1346,97,13],[1,1355,97,22,"callback"],[1,1357,97,32,"context"],[1,1360,98,4],[1,1363,98,8,"this"],[1,1368,98,13,"_advice"],[1,1376,98,21,"reconnect"],[1,1388,98,35,"this"],[1,1393,98,40,"NONE"],[1,1399,99,8,"this"],[1,1404,99,13,"_state"],[1,1413,99,24,"this"],[1,1418,99,29,"UNCONNECTED"],[1,1430,99,4],[1,1431,101,4,"this"],[1,1436,101,9,"_state"],[1,1443,101,18,"this"],[1,1448,101,23,"CONNECTING"],[1,1459,102,4],[1,1463,102,8,"self"],[1,1465,102,15,"this"],[1,1470,104,4,"this"],[1,1475,104,9,"info"],[1,1480,104,14],[1,1510,104,45,"this"],[1,1515,104,50,"_dispatcher"],[1,1527,104,62,"endpoint"],[1,1536,104,71,"href"],[1,1542,105,4,"this"],[1,1547,105,9,"_dispatcher"],[1,1559,105,21,"selectTransport"],[1,1575,105,37,"constants"],[1,1577,105,47,"MANDATORY_CONNECTION_TYPES"],[1,1605,107,4,"this"],[1,1610,107,9,"_sendMessage"],[1,1624,108,6,"channel"],[1,1632,108,32,"Channel"],[1,1634,108,40,"HANDSHAKE"],[1,1644,109,6,"version"],[1,1652,109,32,"constants"],[1,1654,109,42,"BAYEUX_VERSION"],[1,1669,110,6,"supportedConnectionTypes"],[1,1694,110,32,"this"],[1,1699,110,37,"_dispatcher"],[1,1711,110,49,"getConnectionTypes"],[1,1736,112,11],[1,1745,112,20,"response"],[1,1748,114,10,"response"],[1,1750,114,19,"successful"],[1,1762,115,8,"this"],[1,1767,115,13,"_state"],[1,1774,115,22,"this"],[1,1779,115,27,"CONNECTED"],[1,1789,116,8,"this"],[1,1794,116,13,"_dispatcher"],[1,1806,116,25,"clientId"],[1,1815,116,37,"response"],[1,1817,116,46,"clientId"],[1,1826,118,8,"this"],[1,1831,118,13,"_dispatcher"],[1,1843,118,25,"selectTransport"],[1,1859,118,41,"response"],[1,1861,118,50,"supportedConnectionTypes"],[1,1887,120,8,"this"],[1,1892,120,13,"info"],[1,1897,120,18],[1,1923,120,45,"this"],[1,1928,120,50,"_dispatcher"],[1,1940,120,62,"clientId"],[1,1950,122,8,"this"],[1,1955,122,13,"subscribe"],[1,1965,122,23,"this"],[1,1970,122,28,"_channels"],[1,1980,122,38,"getKeys"],[1,1991,122,49],[1,1994,123,12,"callback"],[1,1997,123,22,"asap"],[1,1999,123,27],[1,2010,123,40,"callback"],[1,2012,123,49,"call"],[1,2017,123,54,"context"],[1,2024,126,8,"this"],[1,2029,126,13,"info"],[1,2034,126,18],[1,2060,127,8,"global"],[1,2062,127,15,"setTimeout"],[1,2073,127,26],[1,2084,127,39,"self"],[1,2086,127,44,"handshake"],[1,2096,127,54,"callback"],[1,2098,127,64,"context"],[1,2102,127,101],[1,2106,127,76,"this"],[1,2111,127,81,"_dispatcher"],[1,2123,127,93,"retry"],[1,2130,128,8,"this"],[1,2135,128,13,"_state"],[1,2142,128,22,"this"],[1,2147,128,27,"UNCONNECTED"],[1,2161,130,7,"this"],[1,2169,142,2,"connect"],[1,2177,142,11],[1,2186,142,20,"callback"],[1,2188,142,30,"context"],[1,2191,143,4],[1,2194,143,8,"this"],[1,2199,143,13,"_advice"],[1,2207,143,21,"reconnect"],[1,2219,143,35,"this"],[1,2224,143,40,"NONE"],[1,2230,144,8,"this"],[1,2235,144,13,"_state"],[1,2244,144,24,"this"],[1,2249,144,29,"DISCONNECTED"],[1,2262,144,4],[1,2263,146,4],[1,2266,146,8,"this"],[1,2271,146,13,"_state"],[1,2280,146,24,"this"],[1,2285,146,29,"UNCONNECTED"],[1,2297,147,6],[1,2304,147,13,"this"],[1,2309,147,18,"handshake"],[1,2319,147,28],[1,2330,147,41,"this"],[1,2335,147,46,"connect"],[1,2343,147,54,"callback"],[1,2345,147,64,"context"],[1,2349,147,76,"this"],[1,2355,149,4,"this"],[1,2360,149,9,"callback"],[1,2369,149,18,"callback"],[1,2371,149,28,"context"],[1,2374,150,8,"this"],[1,2379,150,13,"_state"],[1,2388,150,24,"this"],[1,2393,150,29,"CONNECTED"],[1,2405,152,4,"this"],[1,2410,152,9,"info"],[1,2415,152,14],[1,2448,152,48,"this"],[1,2453,152,53,"_dispatcher"],[1,2465,152,65,"clientId"],[1,2475,153,4,"this"],[1,2480,153,9,"setDeferredStatus"],[1,2498,153,27],[1,2511,154,4,"this"],[1,2516,154,9,"setDeferredStatus"],[1,2534,154,27],[1,2545,156,8,"this"],[1,2550,156,13,"_connectRequest"],[1,2568,157,4,"this"],[1,2573,157,9,"_connectRequest"],[1,2590,157,27],[1,2592,159,4,"this"],[1,2597,159,9,"info"],[1,2602,159,14],[1,2632,159,45,"this"],[1,2637,159,50,"_dispatcher"],[1,2649,159,62,"clientId"],[1,2659,161,4,"this"],[1,2664,161,9,"_sendMessage"],[1,2678,162,6,"channel"],[1,2686,162,22,"Channel"],[1,2688,162,30,"CONNECT"],[1,2696,163,6,"clientId"],[1,2705,163,22,"this"],[1,2710,163,27,"_dispatcher"],[1,2722,163,39,"clientId"],[1,2731,164,6,"connectionType"],[1,2746,164,22,"this"],[1,2751,164,27,"_dispatcher"],[1,2763,164,39,"connectionType"],[1,2782,166,11,"this"],[1,2787,166,16,"_cycleConnection"],[1,2804,166,34,"this"],[1,2814,176,2,"disconnect"],[1,2825,176,14],[1,2836,177,4],[1,2839,177,8,"this"],[1,2844,177,13,"_state"],[1,2853,177,24,"this"],[1,2858,177,29,"CONNECTED"],[1,2868,177,4],[1,2869,178,4,"this"],[1,2874,178,9,"_state"],[1,2881,178,18,"this"],[1,2886,178,23,"DISCONNECTED"],[1,2899,180,4,"this"],[1,2904,180,9,"info"],[1,2909,180,14],[1,2927,180,33,"this"],[1,2932,180,38,"_dispatcher"],[1,2944,180,50,"clientId"],[1,2954,181,4],[1,2958,181,8,"promise"],[1,2960,181,18],[1,2964,181,22,"Publication"],[1,2966,199,4],[1,2973,183,4,"this"],[1,2978,183,9,"_sendMessage"],[1,2992,184,6,"channel"],[1,3000,184,16,"Channel"],[1,3002,184,24,"DISCONNECT"],[1,3013,185,6,"clientId"],[1,3022,185,16,"this"],[1,3027,185,21,"_dispatcher"],[1,3039,185,33,"clientId"],[1,3052,187,11],[1,3061,187,20,"response"],[1,3064,188,10,"response"],[1,3066,188,19,"successful"],[1,3078,189,8,"this"],[1,3083,189,13,"_dispatcher"],[1,3095,189,25,"close"],[1,3103,190,8,"promise"],[1,3105,190,16,"setDeferredStatus"],[1,3123,190,34],[1,3137,192,8,"promise"],[1,3139,192,16,"setDeferredStatus"],[1,3157,192,34],[1,3166,192,44,"Error"],[1,3168,192,50,"parse"],[1,3174,192,56,"response"],[1,3176,192,65,"error"],[1,3185,194,7,"this"],[1,3191,196,4,"this"],[1,3196,196,9,"info"],[1,3201,196,14],[1,3236,196,50,"this"],[1,3241,196,55,"_dispatcher"],[1,3253,196,67,"clientId"],[1,3263,197,4,"this"],[1,3268,197,9,"_channels"],[1,3278,197,21],[1,3282,197,25,"Channel"],[1,3284,197,33,"Set"],[1,3288,199,11,"promise"],[1,3292,212,2,"subscribe"],[1,3302,212,13],[1,3311,212,22,"channel"],[1,3313,212,31,"callback"],[1,3315,212,41,"context"],[1,3318,213,4],[1,3321,213,8,"channel"],[1,3334,213,27,"Array"],[1,3340,214,6],[1,3347,214,13,"array"],[1,3349,214,19,"map"],[1,3353,214,23,"channel"],[1,3355,214,32],[1,3364,214,41,"c"],[1,3367,215,8],[1,3374,215,15,"this"],[1,3379,215,20,"subscribe"],[1,3389,215,30,"c"],[1,3391,215,33,"callback"],[1,3393,215,43,"context"],[1,3397,216,9,"this"],[1,3403,218,4],[1,3407,218,8,"subscription"],[1,3409,218,23],[1,3413,218,27,"Subscription"],[1,3415,218,40,"this"],[1,3420,218,46,"channel"],[1,3422,218,55,"callback"],[1,3424,218,65,"context"],[1,3427,219,8,"force"],[1,3430,219,37],[1,3434,219,24,"callback"],[1,3436,222,4],[1,3443,220,23,"this"],[1,3448,220,28,"_channels"],[1,3458,220,38,"hasSubscription"],[1,3474,220,54,"channel"],[1,3479,222,25,"force"],[1,3482,223,6,"this"],[1,3487,223,11,"_channels"],[1,3497,223,21,"subscribe"],[1,3508,223,32,"channel"],[1,3511,223,42,"subscription"],[1,3514,224,6,"subscription"],[1,3516,224,19,"setDeferredStatus"],[1,3534,224,37],[1,3547,225,13,"subscription"],[1,3551,228,4,"this"],[1,3556,228,9,"connect"],[1,3564,228,17],[1,3575,229,6,"this"],[1,3580,229,11,"info"],[1,3585,229,16],[1,3625,229,57,"this"],[1,3630,229,62,"_dispatcher"],[1,3642,229,74,"clientId"],[1,3651,229,84,"channel"],[1,3654,230,11,"force"],[1,3657,230,18,"this"],[1,3662,230,23,"_channels"],[1,3672,230,33,"subscribe"],[1,3683,230,44,"channel"],[1,3686,230,54,"subscription"],[1,3689,232,6,"this"],[1,3694,232,11,"_sendMessage"],[1,3708,233,8,"channel"],[1,3716,233,22,"Channel"],[1,3718,233,30,"SUBSCRIBE"],[1,3728,234,8,"clientId"],[1,3737,234,22,"this"],[1,3742,234,27,"_dispatcher"],[1,3754,234,39,"clientId"],[1,3763,235,8,"subscription"],[1,3776,235,22,"channel"],[1,3782,237,13],[1,3791,237,22,"response"],[1,3794,238,8],[1,3798,238,13,"response"],[1,3800,238,22,"successful"],[1,3811,240,10],[1,3818,239,10,"subscription"],[1,3820,239,23,"setDeferredStatus"],[1,3838,239,41],[1,3847,239,51,"Error"],[1,3849,239,57,"parse"],[1,3855,239,63,"response"],[1,3857,239,72,"error"],[1,3865,240,17,"this"],[1,3870,240,22,"_channels"],[1,3880,240,32,"unsubscribe"],[1,3892,240,44,"channel"],[1,3894,240,53,"subscription"],[1,3897,243,8],[1,3901,243,12,"channels"],[1,3906,243,26,"concat"],[1,3913,243,33,"response"],[1,3915,243,42,"subscription"],[1,3929,244,8,"this"],[1,3934,244,13,"info"],[1,3939,244,18],[1,3978,244,58,"this"],[1,3983,244,63,"_dispatcher"],[1,3995,244,75,"clientId"],[1,4004,244,85,"channels"],[1,4007,245,8,"subscription"],[1,4009,245,21,"setDeferredStatus"],[1,4027,245,39],[1,4041,246,9,"this"],[1,4048,247,7,"this"],[1,4054,249,11,"subscription"],[1,4058,262,2,"unsubscribe"],[1,4070,262,15],[1,4079,262,24,"channel"],[1,4081,262,33,"subscription"],[1,4084,263,4],[1,4087,263,8,"channel"],[1,4100,263,27,"Array"],[1,4106,264,6],[1,4113,264,13,"array"],[1,4115,264,19,"map"],[1,4119,264,23,"channel"],[1,4121,264,32],[1,4130,264,41,"c"],[1,4133,265,8],[1,4140,265,15,"this"],[1,4145,265,20,"unsubscribe"],[1,4157,265,32,"c"],[1,4159,265,35,"subscription"],[1,4163,266,9,"this"],[1,4169,268,15,"this"],[1,4174,268,20,"_channels"],[1,4184,268,30,"unsubscribe"],[1,4196,268,42,"channel"],[1,4198,268,51,"subscription"],[1,4202,271,4,"this"],[1,4207,271,9,"connect"],[1,4215,271,17],[1,4226,272,6,"this"],[1,4231,272,11,"info"],[1,4236,272,16],[1,4280,272,61,"this"],[1,4285,272,66,"_dispatcher"],[1,4297,272,78,"clientId"],[1,4306,272,88,"channel"],[1,4309,274,6,"this"],[1,4314,274,11,"_sendMessage"],[1,4328,275,8,"channel"],[1,4336,275,22,"Channel"],[1,4338,275,30,"UNSUBSCRIBE"],[1,4350,276,8,"clientId"],[1,4359,276,22,"this"],[1,4364,276,27,"_dispatcher"],[1,4376,276,39,"clientId"],[1,4385,277,8,"subscription"],[1,4398,277,22,"channel"],[1,4404,279,13],[1,4413,279,22,"response"],[1,4416,280,8],[1,4419,280,13,"response"],[1,4421,280,22,"successful"],[1,4432,280,8],[1,4433,282,8],[1,4437,282,12,"channels"],[1,4442,282,26,"concat"],[1,4449,282,33,"response"],[1,4451,282,42,"subscription"],[1,4465,283,8,"this"],[1,4470,283,13,"info"],[1,4475,283,18],[1,4518,283,62,"this"],[1,4523,283,67,"_dispatcher"],[1,4535,283,79,"clientId"],[1,4544,283,89,"channels"],[1,4549,284,9,"this"],[1,4556,285,7,"this"],[1,4563,294,2,"publish"],[1,4571,294,11],[1,4580,294,20,"channel"],[1,4582,294,29,"data"],[1,4584,294,35,"options"],[1,4587,295,4,"validateOptions"],[1,4589,295,20,"options"],[1,4596,295,36],[1,4607,295,48],[1,4620,296,4],[1,4624,296,8,"publication"],[1,4626,296,22],[1,4630,296,26,"Publication"],[1,4632,314,4],[1,4639,298,4,"this"],[1,4644,298,9,"connect"],[1,4652,298,17],[1,4663,299,6,"this"],[1,4668,299,11,"info"],[1,4673,299,16],[1,4719,299,63,"this"],[1,4724,299,68,"_dispatcher"],[1,4736,299,80,"clientId"],[1,4745,299,90,"channel"],[1,4747,299,99,"data"],[1,4750,301,6,"this"],[1,4755,301,11,"_sendMessage"],[1,4769,302,8,"channel"],[1,4777,302,18,"channel"],[1,4779,303,8,"data"],[1,4784,303,18,"data"],[1,4786,304,8,"clientId"],[1,4795,304,18,"this"],[1,4800,304,23,"_dispatcher"],[1,4812,304,35,"clientId"],[1,4822,306,9,"options"],[1,4824,306,18],[1,4833,306,27,"response"],[1,4836,307,12,"response"],[1,4838,307,21,"successful"],[1,4849,308,10,"publication"],[1,4851,308,22,"setDeferredStatus"],[1,4869,308,40],[1,4882,310,10,"publication"],[1,4884,310,22,"setDeferredStatus"],[1,4902,310,40],[1,4911,310,50,"Error"],[1,4913,310,56,"parse"],[1,4919,310,62,"response"],[1,4921,310,71,"error"],[1,4930,311,9,"this"],[1,4937,312,7,"this"],[1,4943,314,11,"publication"],[1,4946,317,2,"_sendMessage"],[1,4959,317,16],[1,4968,317,25,"message"],[1,4970,317,34,"options"],[1,4972,317,43,"callback"],[1,4974,317,53,"context"],[1,4977,318,4,"message"],[1,4979,318,12,"id"],[1,4982,318,17,"this"],[1,4987,318,22,"_generateMessageId"],[1,5008,320,4],[1,5012,320,8,"timeout"],[1,5014,320,18,"this"],[1,5019,320,23,"_advice"],[1,5027,320,31,"timeout"],[1,5035,321,18],[1,5039,321,24,"this"],[1,5044,321,29,"_advice"],[1,5052,321,37,"timeout"],[1,5060,321,47],[1,5064,322,18],[1,5068,322,24,"this"],[1,5073,322,29,"_dispatcher"],[1,5085,322,41,"retry"],[1,5091,324,4,"this"],[1,5096,324,9,"pipeThroughExtensions"],[1,5118,324,31],[1,5129,324,43,"message"],[1,5131,324,52],[1,5136,324,58],[1,5145,324,67,"message"],[1,5148,325,11,"message"],[1,5152,326,10,"callback"],[1,5156,326,20,"this"],[1,5161,326,25,"_responseCallbacks"],[1,5180,326,44,"message"],[1,5182,326,52,"id"],[1,5187,326,59,"callback"],[1,5189,326,69,"context"],[1,5193,327,6,"this"],[1,5198,327,11,"_dispatcher"],[1,5210,327,23,"sendMessage"],[1,5222,327,35,"message"],[1,5224,327,44,"timeout"],[1,5226,327,53,"options"],[1,5235,328,7,"this"],[1,5242,331,2,"_generateMessageId"],[1,5261,331,22],[1,5272,334,4],[1,5279,332,4,"this"],[1,5284,332,9,"_messageId"],[1,5296,332,23],[1,5298,333,8,"this"],[1,5303,333,13,"_messageId"],[1,5315,333,27,"Math"],[1,5320,333,32,"pow"],[1,5324,333,36],[1,5326,333,38],[1,5332,333,43,"this"],[1,5337,333,48,"_messageId"],[1,5348,333,61],[1,5351,334,11,"this"],[1,5356,334,16,"_messageId"],[1,5367,334,27,"toString"],[1,5376,334,36],[1,5381,337,2,"_receiveMessage"],[1,5397,337,19],[1,5406,337,28,"message"],[1,5409,338,4],[1,5413,338,25,"callback"],[1,5415,338,8,"id"],[1,5417,338,13,"message"],[1,5419,338,21,"id"],[1,5427,340,31,"undefined"],[1,5431,340,8,"message"],[1,5433,340,16,"successful"],[1,5446,341,6,"callback"],[1,5448,341,17,"this"],[1,5453,341,22,"_responseCallbacks"],[1,5472,341,41,"id"],[1,5482,342,13,"this"],[1,5487,342,18,"_responseCallbacks"],[1,5506,342,37,"id"],[1,5510,345,4,"this"],[1,5515,345,9,"pipeThroughExtensions"],[1,5537,345,31],[1,5548,345,43,"message"],[1,5550,345,52],[1,5555,345,58],[1,5564,345,67,"message"],[1,5567,346,11,"message"],[1,5571,347,10,"message"],[1,5573,347,18,"advice"],[1,5581,347,26,"this"],[1,5586,347,31,"_handleAdvice"],[1,5600,347,45,"message"],[1,5602,347,53,"advice"],[1,5610,348,6,"this"],[1,5615,348,11,"_deliverMessage"],[1,5631,348,27,"message"],[1,5634,349,10,"callback"],[1,5637,349,20,"callback"],[1,5639,349,29],[1,5642,349,32,"call"],[1,5647,349,37,"callback"],[1,5649,349,46],[1,5652,349,50,"message"],[1,5657,350,7,"this"],[1,5664,353,2,"_handleAdvice"],[1,5678,353,17],[1,5687,353,26,"advice"],[1,5690,354,4,"assign"],[1,5692,354,11,"this"],[1,5697,354,16,"_advice"],[1,5705,354,25,"advice"],[1,5708,355,4,"this"],[1,5713,355,9,"_dispatcher"],[1,5725,355,21,"timeout"],[1,5733,355,31,"this"],[1,5738,355,36,"_advice"],[1,5746,355,44,"timeout"],[1,5754,355,54],[1,5758,357,8,"this"],[1,5763,357,13,"_advice"],[1,5771,357,21,"reconnect"],[1,5783,357,35,"this"],[1,5788,357,40,"HANDSHAKE"],[1,5799,357,53,"this"],[1,5804,357,58,"_state"],[1,5813,357,69,"this"],[1,5818,357,74,"DISCONNECTED"],[1,5833,358,6,"this"],[1,5838,358,11,"_state"],[1,5845,358,20,"this"],[1,5850,358,25,"UNCONNECTED"],[1,5862,359,6,"this"],[1,5867,359,11,"_dispatcher"],[1,5879,359,23,"clientId"],[1,5888,359,34],[1,5893,360,6,"this"],[1,5898,360,11,"_cycleConnection"],[1,5919,364,2,"_deliverMessage"],[1,5935,364,19],[1,5944,364,28,"message"],[1,5947,365,9,"message"],[1,5949,365,17,"channel"],[1,5963,365,45,"undefined"],[1,5967,365,28,"message"],[1,5969,365,36,"data"],[1,5976,366,4,"this"],[1,5981,366,9,"info"],[1,5986,366,14],[1,6028,366,57,"this"],[1,6033,366,62,"_dispatcher"],[1,6045,366,74,"clientId"],[1,6054,366,84,"message"],[1,6056,366,92,"channel"],[1,6064,366,101,"message"],[1,6066,366,109,"data"],[1,6072,367,4,"this"],[1,6077,367,9,"_channels"],[1,6087,367,19,"distributeMessage"],[1,6105,367,37,"message"],[1,6110,370,2,"_cycleConnection"],[1,6127,370,20],[1,6138,371,8,"this"],[1,6143,371,13,"_connectRequest"],[1,6161,372,6,"this"],[1,6166,372,11,"_connectRequest"],[1,6182,372,29],[1,6187,373,6,"this"],[1,6192,373,11,"info"],[1,6197,373,16],[1,6223,373,43,"this"],[1,6228,373,48,"_dispatcher"],[1,6240,373,60,"clientId"],[1,6251,375,4],[1,6255,375,8,"self"],[1,6257,375,15,"this"],[1,6262,376,4,"global"],[1,6264,376,11,"setTimeout"],[1,6275,376,22],[1,6286,376,35,"self"],[1,6288,376,40,"connect"],[1,6299,376,53,"this"],[1,6304,376,58,"_advice"],[1,6312,376,66,"interval"],[1,6325,380,0,"assign"],[1,6327,380,7,"Client"],[1,6329,380,14,"prototype"],[1,6339,380,25,"Deferrable"],[1,6342,381,0,"assign"],[1,6344,381,7,"Client"],[1,6346,381,14,"prototype"],[1,6356,381,25,"Publisher"],[1,6359,382,0,"assign"],[1,6361,382,7,"Client"],[1,6363,382,14,"prototype"],[1,6373,382,25,"Logging"],[1,6376,383,0,"assign"],[1,6378,383,7,"Client"],[1,6380,383,14,"prototype"],[1,6390,383,25,"Extensible"],[1,6393,385,0,"module"],[1,6395,385,7,"exports"],[1,6403,385,17,"Client"]],"functionMap":{"names":["<global>","Class$argument_0.initialize","browser.Event.on$argument_2","Class$argument_0.addWebsocketExtension","Class$argument_0.disable","Class$argument_0.setHeader","Class$argument_0.handshake","_sendMessage$argument_2","asap$argument_0","global.setTimeout$argument_0","Class$argument_0.connect","handshake$argument_0","Class$argument_0.disconnect","Class$argument_0.subscribe","array.map$argument_1","connect$argument_0","Class$argument_0.unsubscribe","Class$argument_0.publish","Class$argument_0._sendMessage","pipeThroughExtensions$argument_3","Class$argument_0._generateMessageId","Class$argument_0._receiveMessage","Class$argument_0._handleAdvice","Class$argument_0._deliverMessage","Class$argument_0._cycleConnection"],"mappings":"AAA;cCmC;+CCwB;ODG;GDC;yBGE;GHE;WIE;GJE;aKE;GLE;aMqB;WCe;2BCW,qCD;0BEI,gDF;KDG;GNC;WUW;4BCK,8CD;GVoB;cYS;WLW;KKO;GZM;aaY;gCCE;ODE;iBEY;aRS;OQS;KFC;GbG;egBY;gCFE;OEE;iBDK;aRQ;OQK;KCC;GhBC;WiBQ;iBFI;kBRQ;OQK;KEC;GjBG;gBkBE;0DCO;KDI;GlBC;sBoBE;GpBI;mBqBE;0DFQ;KEK;GrBC;iBsBE;GtBS;mBuBE;GvBI;oBwBE;sBfM,6Be;GxBC"}},"type":"js/module"}]}