{"dependencies":[{"name":"./globals","data":{"isAsync":false}},{"name":"./constants","data":{"isAsync":false}},{"name":"./manage-subscribers","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.attachSharedListeners=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=function(n,t){n.onmessage=function(n){o.getSubscribers(t).forEach(function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(n),'function'==typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(n)||t.setLastMessage(n)})}},s=function(n,c){n.onopen=function(n){o.getSubscribers(c).forEach(function(o){o.reconnectCount.current=0,o.optionsRef.current.onOpen&&o.optionsRef.current.onOpen(n),o.setReadyState(t.ReadyState.OPEN)})}},u=function(c,s){c.onclose=function(c){o.getSubscribers(s).forEach(function(n){n.optionsRef.current.onClose&&n.optionsRef.current.onClose(c),n.setReadyState(t.ReadyState.CLOSED)}),delete n.sharedWebSockets[s],o.getSubscribers(s).forEach(function(n){var o,s;if(n.optionsRef.current.shouldReconnect&&n.optionsRef.current.shouldReconnect(c)){var u=null!==(o=n.optionsRef.current.reconnectAttempts)&&void 0!==o?o:t.DEFAULT_RECONNECT_LIMIT;n.reconnectCount.current<u?0==n.reconnectCount.current++?n.reconnect.current():setTimeout(function(){n.reconnect.current()},null!==(s=n.optionsRef.current.reconnectInterval)&&void 0!==s?s:t.DEFAULT_RECONNECT_INTERVAL_MS):(n.optionsRef.current.onReconnectStop&&n.optionsRef.current.onReconnectStop(n.optionsRef.current.reconnectAttempts),console.warn(\"Max reconnect attempts of \"+u+\" exceeded\"))}})}},f=function(n,t){n.onerror=function(n){o.getSubscribers(t).forEach(function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(n)})}};e.attachSharedListeners=function(n,t){c(n,t),u(n,t),s(n,t),f(n,t)}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"attachSharedListeners"],[1,119,3,0,"undefined"],[1,121,4,0],[1,125,4,4,"globals_1"],[1,127,4,16,"require"],[1,129,4,23,"d"],[1,131,4,23],[1,135,5,4,"constants_1"],[1,137,5,18,"require"],[1,139,5,25,"d"],[1,141,5,25],[1,145,6,4,"manage_subscribers_1"],[1,147,6,27,"require"],[1,149,6,34,"d"],[1,151,6,34],[1,155,7,4,"bindMessageHandler"],[1,157,7,25],[1,166,7,35,"webSocketInstance"],[1,168,7,54,"url"],[1,171,8,4,"webSocketInstance"],[1,173,8,22,"onmessage"],[1,183,8,34],[1,192,8,44,"message"],[1,195,9,8,"manage_subscribers_1"],[1,197,9,29,"getSubscribers"],[1,212,9,44,"url"],[1,215,9,49,"forEach"],[1,223,9,57],[1,232,9,67,"subscriber"],[1,235,10,16,"subscriber"],[1,237,10,27,"optionsRef"],[1,248,10,38,"current"],[1,256,10,46,"onMessage"],[1,267,11,16,"subscriber"],[1,269,11,27,"optionsRef"],[1,280,11,38,"current"],[1,288,11,46,"onMessage"],[1,298,11,56,"message"],[1,301,13,64],[1,320,13,23,"subscriber"],[1,322,13,34,"optionsRef"],[1,333,13,45,"current"],[1,341,13,53,"filter"],[1,350,14,66],[1,354,14,16,"subscriber"],[1,356,14,27,"optionsRef"],[1,367,14,38,"current"],[1,375,14,46,"filter"],[1,382,14,53,"message"],[1,386,17,12,"subscriber"],[1,388,17,23,"setLastMessage"],[1,403,17,38,"message"],[1,410,21,4,"bindOpenHandler"],[1,412,21,22],[1,421,21,32,"webSocketInstance"],[1,423,21,51,"url"],[1,426,22,4,"webSocketInstance"],[1,428,22,22,"onopen"],[1,435,22,31],[1,444,22,41,"event"],[1,447,23,8,"manage_subscribers_1"],[1,449,23,29,"getSubscribers"],[1,464,23,44,"url"],[1,467,23,49,"forEach"],[1,475,23,57],[1,484,23,67,"subscriber"],[1,487,24,12,"subscriber"],[1,489,24,23,"reconnectCount"],[1,504,24,38,"current"],[1,512,24,48],[1,514,25,16,"subscriber"],[1,516,25,27,"optionsRef"],[1,527,25,38,"current"],[1,535,25,46,"onOpen"],[1,543,26,16,"subscriber"],[1,545,26,27,"optionsRef"],[1,556,26,38,"current"],[1,564,26,46,"onOpen"],[1,571,26,53,"event"],[1,574,28,12,"subscriber"],[1,576,28,23,"setReadyState"],[1,590,28,37,"constants_1"],[1,592,28,49,"ReadyState"],[1,603,28,60,"OPEN"],[1,613,32,4,"bindCloseHandler"],[1,615,32,23],[1,624,32,33,"webSocketInstance"],[1,626,32,52,"url"],[1,629,33,4,"webSocketInstance"],[1,631,33,22,"onclose"],[1,639,33,32],[1,648,33,42,"event"],[1,651,34,8,"manage_subscribers_1"],[1,653,34,29,"getSubscribers"],[1,668,34,44,"url"],[1,671,34,49,"forEach"],[1,679,34,57],[1,688,34,67,"subscriber"],[1,691,35,16,"subscriber"],[1,693,35,27,"optionsRef"],[1,704,35,38,"current"],[1,712,35,46,"onClose"],[1,721,36,16,"subscriber"],[1,723,36,27,"optionsRef"],[1,734,36,38,"current"],[1,742,36,46,"onClose"],[1,750,36,54,"event"],[1,753,38,12,"subscriber"],[1,755,38,23,"setReadyState"],[1,769,38,37,"constants_1"],[1,771,38,49,"ReadyState"],[1,782,38,60,"CLOSED"],[1,799,40,15,"globals_1"],[1,801,40,25,"sharedWebSockets"],[1,818,40,42,"url"],[1,821,41,8,"manage_subscribers_1"],[1,823,41,29,"getSubscribers"],[1,838,41,44,"url"],[1,841,41,49,"forEach"],[1,849,41,57],[1,858,41,67,"subscriber"],[1,861,42,12],[1,865,42,16,"_a"],[1,867,42,20,"_b"],[1,869,43,12],[1,872,43,16,"subscriber"],[1,874,43,27,"optionsRef"],[1,885,43,38,"current"],[1,893,43,46,"shouldReconnect"],[1,910,44,16,"subscriber"],[1,912,44,27,"optionsRef"],[1,923,44,38,"current"],[1,931,44,46,"shouldReconnect"],[1,947,44,62,"event"],[1,950,44,70],[1,951,45,16],[1,955,45,20,"reconnectAttempts"],[1,957,45,99],[1,965,45,41,"_a"],[1,967,45,46,"subscriber"],[1,969,45,57,"optionsRef"],[1,980,45,68,"current"],[1,988,45,76,"reconnectAttempts"],[1,1013,45,109,"undefined"],[1,1017,45,107,"_a"],[1,1019,45,123,"_a"],[1,1021,45,128,"constants_1"],[1,1023,45,140,"DEFAULT_RECONNECT_LIMIT"],[1,1047,46,20,"subscriber"],[1,1049,46,31,"reconnectCount"],[1,1064,46,46,"current"],[1,1072,46,56,"reconnectAttempts"],[1,1074,47,64],[1,1077,47,24,"subscriber"],[1,1079,47,35,"reconnectCount"],[1,1094,47,50,"current"],[1,1104,48,24,"subscriber"],[1,1106,48,35,"reconnect"],[1,1116,48,45,"current"],[1,1126,51,24,"setTimeout"],[1,1137,51,35],[1,1148,52,28,"subscriber"],[1,1150,52,39,"reconnect"],[1,1160,52,49,"current"],[1,1171,53,86],[1,1179,53,28,"_b"],[1,1181,53,33,"subscriber"],[1,1183,53,44,"optionsRef"],[1,1194,53,55,"current"],[1,1202,53,63,"reconnectInterval"],[1,1227,53,96,"undefined"],[1,1231,53,94,"_b"],[1,1233,53,110,"_b"],[1,1235,53,115,"constants_1"],[1,1237,53,127,"DEFAULT_RECONNECT_INTERVAL_MS"],[1,1269,57,20,"subscriber"],[1,1271,57,31,"optionsRef"],[1,1282,57,42,"current"],[1,1290,57,50,"onReconnectStop"],[1,1307,57,69,"subscriber"],[1,1309,57,80,"optionsRef"],[1,1320,57,91,"current"],[1,1328,57,99,"onReconnectStop"],[1,1344,57,115,"subscriber"],[1,1346,57,126,"optionsRef"],[1,1357,57,137,"current"],[1,1365,57,145,"reconnectAttempts"],[1,1384,58,20,"console"],[1,1392,58,28,"warn"],[1,1397,58,33],[1,1426,58,64,"reconnectAttempts"],[1,1428,58,84],[1,1447,64,4,"bindErrorHandler"],[1,1449,64,23],[1,1458,64,33,"webSocketInstance"],[1,1460,64,52,"url"],[1,1463,65,4,"webSocketInstance"],[1,1465,65,22,"onerror"],[1,1473,65,32],[1,1482,65,42,"error"],[1,1485,66,8,"manage_subscribers_1"],[1,1487,66,29,"getSubscribers"],[1,1502,66,44,"url"],[1,1505,66,49,"forEach"],[1,1513,66,57],[1,1522,66,67,"subscriber"],[1,1525,67,16,"subscriber"],[1,1527,67,27,"optionsRef"],[1,1538,67,38,"current"],[1,1546,67,46,"onError"],[1,1555,68,16,"subscriber"],[1,1557,68,27,"optionsRef"],[1,1568,68,38,"current"],[1,1576,68,46,"onError"],[1,1584,68,54,"error"],[1,1591,73,0,"exports"],[1,1593,73,8,"attachSharedListeners"],[1,1615,73,32],[1,1624,73,42,"webSocketInstance"],[1,1626,73,61,"url"],[1,1629,74,4,"bindMessageHandler"],[1,1631,74,23,"webSocketInstance"],[1,1633,74,42,"url"],[1,1636,75,4,"bindCloseHandler"],[1,1638,75,21,"webSocketInstance"],[1,1640,75,40,"url"],[1,1643,76,4,"bindOpenHandler"],[1,1645,76,20,"webSocketInstance"],[1,1647,76,39,"url"],[1,1650,77,4,"bindErrorHandler"],[1,1652,77,21,"webSocketInstance"],[1,1654,77,40,"url"]],"functionMap":{"names":["<global>","bindMessageHandler","webSocketInstance.onmessage","manage_subscribers_1.getSubscribers.forEach$argument_0","bindOpenHandler","webSocketInstance.onopen","bindCloseHandler","webSocketInstance.onclose","setTimeout$argument_0","bindErrorHandler","webSocketInstance.onerror","exports.attachSharedListeners"],"mappings":"AAA;yBCM;kCCC;yDCC;SDS;KDC;CDC;sBIC;+BCC;yDFC;SEM;KDC;CJC;uBMC;gCCC;yDJC;SIK;yDJE;mCKU;yBLE;SIQ;KDC;CNC;uBSC;gCCC;yDPC;SOI;KDC;CTC;gCWC;CXK"}},"type":"js/module"}]}