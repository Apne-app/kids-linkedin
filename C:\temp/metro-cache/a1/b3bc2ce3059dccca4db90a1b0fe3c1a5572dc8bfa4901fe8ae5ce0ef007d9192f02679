{"dependencies":[{"name":"./commons","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _require = _$$_REQUIRE(_dependencyMap[0], \"./commons\"),\n      PACKET_TYPES = _require.PACKET_TYPES;\n\n  var withNativeBlob = typeof Blob === \"function\" || typeof Blob !== \"undefined\" && Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\";\n  var withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n  var isView = function isView(obj) {\n    return typeof ArrayBuffer.isView === \"function\" ? ArrayBuffer.isView(obj) : obj && obj.buffer instanceof ArrayBuffer;\n  };\n\n  var encodePacket = function encodePacket(_ref, supportsBinary, callback) {\n    var type = _ref.type,\n        data = _ref.data;\n\n    if (withNativeBlob && data instanceof Blob) {\n      if (supportsBinary) {\n        return callback(data);\n      } else {\n        return encodeBlobAsBase64(data, callback);\n      }\n    } else if (withNativeArrayBuffer && (data instanceof ArrayBuffer || isView(data))) {\n      if (supportsBinary) {\n        return callback(data instanceof ArrayBuffer ? data : data.buffer);\n      } else {\n        return encodeBlobAsBase64(new Blob([data]), callback);\n      }\n    }\n\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n  };\n\n  var encodeBlobAsBase64 = function encodeBlobAsBase64(data, callback) {\n    var fileReader = new FileReader();\n\n    fileReader.onload = function () {\n      var content = fileReader.result.split(\",\")[1];\n      callback(\"b\" + content);\n    };\n\n    return fileReader.readAsDataURL(data);\n  };\n\n  module.exports = encodePacket;\n});","lineCount":45,"map":[[2,17,1,25,"require"],[2,28,1,32],[2,60],[3,6,1,8,"PACKET_TYPES"],[3,18],[3,30,1,8,"PACKET_TYPES"],[3,42],[5,0,3,0],[5,6,3,6,"withNativeBlob"],[5,20,3,20],[5,23,4,2],[5,30,4,9,"Blob"],[5,34,4,2],[5,39,4,18],[5,49,4,2],[5,53,5,3],[5,60,5,10,"Blob"],[5,64,5,3],[5,69,5,19],[5,80,5,3],[5,84,6,4,"Object"],[5,90,6,10],[5,91,6,11,"prototype"],[5,100,6,4],[5,101,6,21,"toString"],[5,109,6,4],[5,110,6,30,"call"],[5,114,6,4],[5,115,6,35,"Blob"],[5,119,6,4],[5,125,6,45],[5,151,3,0],[6,0,7,0],[6,6,7,6,"withNativeArrayBuffer"],[6,27,7,27],[6,30,7,30],[6,37,7,37,"ArrayBuffer"],[6,48,7,30],[6,53,7,53],[6,63,7,0],[8,0,10,0],[8,6,10,6,"isView"],[8,12,10,12],[8,15,10,15],[8,24,10,6,"isView"],[8,30,10,15],[8,31,10,15,"obj"],[8,34,10,18],[8,36,10,22],[9,0,11,2],[9,11,11,9],[9,18,11,16,"ArrayBuffer"],[9,29,11,27],[9,30,11,28,"isView"],[9,36,11,9],[9,41,11,39],[9,51,11,9],[9,54,12,6,"ArrayBuffer"],[9,65,12,17],[9,66,12,18,"isView"],[9,72,12,6],[9,73,12,25,"obj"],[9,76,12,6],[9,77,11,9],[9,80,13,6,"obj"],[9,83,13,9],[9,87,13,13,"obj"],[9,90,13,16],[9,91,13,17,"buffer"],[9,97,13,13],[9,109,13,35,"ArrayBuffer"],[9,120,11,2],[10,0,14,1],[10,3,10,0],[12,0,16,0],[12,6,16,6,"encodePacket"],[12,18,16,18],[12,21,16,21],[12,30,16,6,"encodePacket"],[12,42,16,21],[12,49,16,38,"supportsBinary"],[12,63,16,21],[12,65,16,54,"callback"],[12,73,16,21],[12,75,16,67],[13,0,16,67],[13,8,16,24,"type"],[13,12,16,67],[13,20,16,24,"type"],[13,24,16,67],[14,0,16,67],[14,8,16,30,"data"],[14,12,16,67],[14,20,16,30,"data"],[14,24,16,67],[16,0,17,2],[16,8,17,6,"withNativeBlob"],[16,22,17,20],[16,26,17,24,"data"],[16,30,17,28],[16,42,17,40,"Blob"],[16,46,17,2],[16,48,17,46],[17,0,18,4],[17,10,18,8,"supportsBinary"],[17,24,18,4],[17,26,18,24],[18,0,19,6],[18,15,19,13,"callback"],[18,23,19,21],[18,24,19,22,"data"],[18,28,19,21],[18,29,19,6],[19,0,20,5],[19,7,18,4],[19,13,20,11],[20,0,21,6],[20,15,21,13,"encodeBlobAsBase64"],[20,33,21,31],[20,34,21,32,"data"],[20,38,21,31],[20,40,21,38,"callback"],[20,48,21,31],[20,49,21,6],[21,0,22,5],[22,0,23,3],[22,5,17,2],[22,11,23,9],[22,15,24,4,"withNativeArrayBuffer"],[22,36,24,25],[22,41,25,5,"data"],[22,45,25,9],[22,57,25,21,"ArrayBuffer"],[22,68,25,5],[22,72,25,36,"isView"],[22,78,25,42],[22,79,25,43,"data"],[22,83,25,42],[22,84,24,25],[22,85,23,9],[22,87,26,4],[23,0,27,4],[23,10,27,8,"supportsBinary"],[23,24,27,4],[23,26,27,24],[24,0,28,6],[24,15,28,13,"callback"],[24,23,28,21],[24,24,28,22,"data"],[24,28,28,26],[24,40,28,38,"ArrayBuffer"],[24,51,28,22],[24,54,28,52,"data"],[24,58,28,22],[24,61,28,59,"data"],[24,65,28,63],[24,66,28,64,"buffer"],[24,72,28,21],[24,73,28,6],[25,0,29,5],[25,7,27,4],[25,13,29,11],[26,0,30,6],[26,15,30,13,"encodeBlobAsBase64"],[26,33,30,31],[26,34,30,32],[26,38,30,36,"Blob"],[26,42,30,32],[26,43,30,41],[26,44,30,42,"data"],[26,48,30,41],[26,49,30,32],[26,50,30,31],[26,52,30,50,"callback"],[26,60,30,31],[26,61,30,6],[27,0,31,5],[28,0,32,3],[30,0,34,2],[30,11,34,9,"callback"],[30,19,34,17],[30,20,34,18,"PACKET_TYPES"],[30,32,34,30],[30,33,34,31,"type"],[30,37,34,30],[30,38,34,18],[30,42,34,40,"data"],[30,46,34,44],[30,50,34,48],[30,52,34,18],[30,53,34,17],[30,54,34,2],[31,0,35,1],[31,3,16,0],[33,0,37,0],[33,6,37,6,"encodeBlobAsBase64"],[33,24,37,24],[33,27,37,27],[33,36,37,6,"encodeBlobAsBase64"],[33,54,37,27],[33,55,37,28,"data"],[33,59,37,27],[33,61,37,34,"callback"],[33,69,37,27],[33,71,37,47],[34,0,38,2],[34,8,38,8,"fileReader"],[34,18,38,18],[34,21,38,21],[34,25,38,25,"FileReader"],[34,35,38,21],[34,37,38,2],[36,0,39,2,"fileReader"],[36,4,39,2,"fileReader"],[36,14,39,12],[36,15,39,13,"onload"],[36,21,39,2],[36,24,39,22],[36,36,39,33],[37,0,40,4],[37,10,40,10,"content"],[37,17,40,17],[37,20,40,20,"fileReader"],[37,30,40,30],[37,31,40,31,"result"],[37,37,40,20],[37,38,40,38,"split"],[37,43,40,20],[37,44,40,44],[37,47,40,20],[37,49,40,49],[37,50,40,20],[37,51,40,4],[38,0,41,4,"callback"],[38,6,41,4,"callback"],[38,14,41,12],[38,15,41,13],[38,21,41,19,"content"],[38,28,41,12],[38,29,41,4],[39,0,42,3],[39,5,39,2],[41,0,43,2],[41,11,43,9,"fileReader"],[41,21,43,19],[41,22,43,20,"readAsDataURL"],[41,35,43,9],[41,36,43,34,"data"],[41,40,43,9],[41,41,43,2],[42,0,44,1],[42,3,37,0],[44,0,46,0,"module"],[44,2,46,0,"module"],[44,8,46,6],[44,9,46,7,"exports"],[44,16,46,0],[44,19,46,17,"encodePacket"],[44,31,46,0]],"functionMap":{"names":["<global>","isView","encodePacket","encodeBlobAsBase64","fileReader.onload"],"mappings":"AAA;eCS;CDI;qBEE;CFmB;2BGE;sBCE;GDG;CHE"}},"type":"js/module"}]}