{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var InternetReachability = function InternetReachability(configuration, listener) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, InternetReachability);\n    this._isInternetReachable = undefined;\n    this._currentInternetReachabilityCheckHandler = null;\n    this._currentTimeoutHandle = null;\n\n    this._setIsInternetReachable = function (isInternetReachable) {\n      if (_this._isInternetReachable === isInternetReachable) {\n        return;\n      }\n\n      _this._isInternetReachable = isInternetReachable;\n\n      _this._listener(_this._isInternetReachable);\n    };\n\n    this._setExpectsConnection = function (expectsConnection) {\n      if (_this._currentInternetReachabilityCheckHandler !== null) {\n        _this._currentInternetReachabilityCheckHandler.cancel();\n\n        _this._currentInternetReachabilityCheckHandler = null;\n      }\n\n      if (_this._currentTimeoutHandle !== null) {\n        clearTimeout(_this._currentTimeoutHandle);\n        _this._currentTimeoutHandle = null;\n      }\n\n      if (expectsConnection) {\n        if (!_this._isInternetReachable) {\n          _this._setIsInternetReachable(null);\n        }\n\n        _this._currentInternetReachabilityCheckHandler = _this._checkInternetReachability();\n      } else {\n        _this._setIsInternetReachable(false);\n      }\n    };\n\n    this._checkInternetReachability = function () {\n      var responsePromise = fetch(_this._configuration.reachabilityUrl, {\n        method: 'HEAD',\n        cache: 'no-cache'\n      });\n      var timeoutHandle;\n      var timeoutPromise = new Promise(function (_, reject) {\n        timeoutHandle = setTimeout(function () {\n          return reject('timedout');\n        }, _this._configuration.reachabilityRequestTimeout);\n      });\n\n      var cancel = function cancel() {};\n\n      var cancelPromise = new Promise(function (_, reject) {\n        cancel = function cancel() {\n          return reject('canceled');\n        };\n      });\n      var promise = Promise.race([responsePromise, timeoutPromise, cancelPromise]).then(function (response) {\n        return _this._configuration.reachabilityTest(response);\n      }).then(function (result) {\n        _this._setIsInternetReachable(result);\n\n        var nextTimeoutInterval = _this._isInternetReachable ? _this._configuration.reachabilityLongTimeout : _this._configuration.reachabilityShortTimeout;\n        _this._currentTimeoutHandle = setTimeout(_this._checkInternetReachability, nextTimeoutInterval);\n      }).catch(function (error) {\n        if (error !== 'canceled') {\n          _this._setIsInternetReachable(false);\n\n          _this._currentTimeoutHandle = setTimeout(_this._checkInternetReachability, _this._configuration.reachabilityShortTimeout);\n        }\n      }).then(function () {\n        clearTimeout(timeoutHandle);\n      }, function (error) {\n        clearTimeout(timeoutHandle);\n        throw error;\n      });\n      return {\n        promise: promise,\n        cancel: cancel\n      };\n    };\n\n    this.update = function (state) {\n      if (typeof state.isInternetReachable === 'boolean') {\n        _this._setIsInternetReachable(state.isInternetReachable);\n      } else {\n        _this._setExpectsConnection(state.isConnected);\n      }\n    };\n\n    this.currentState = function () {\n      return _this._isInternetReachable;\n    };\n\n    this.tearDown = function () {\n      if (_this._currentInternetReachabilityCheckHandler !== null) {\n        _this._currentInternetReachabilityCheckHandler.cancel();\n\n        _this._currentInternetReachabilityCheckHandler = null;\n      }\n\n      if (_this._currentTimeoutHandle !== null) {\n        clearTimeout(_this._currentTimeoutHandle);\n        _this._currentTimeoutHandle = null;\n      }\n    };\n\n    this._configuration = configuration;\n    this._listener = listener;\n  };\n\n  exports.default = InternetReachability;\n});","lineCount":126,"map":[[11,6,18,21,"InternetReachability"],[11,26],[11,29,25,2],[11,59,26,4,"configuration"],[11,72,25,2],[11,74,27,4,"listener"],[11,82,25,2],[11,84,28,4],[12,0,28,4],[14,0,28,4],[15,0,28,4],[15,9,21,10,"_isInternetReachable"],[15,29,28,4],[15,32,21,61,"undefined"],[15,41,28,4],[16,0,28,4],[16,9,22,10,"_currentInternetReachabilityCheckHandler"],[16,49,28,4],[16,52,22,94],[16,56,28,4],[17,0,28,4],[17,9,23,10,"_currentTimeoutHandle"],[17,30,28,4],[17,33,23,72],[17,37,28,4],[19,0,28,4],[19,9,33,10,"_setIsInternetReachable"],[19,32,28,4],[19,35,33,36],[19,45,34,4,"isInternetReachable"],[19,64,33,36],[19,66,35,13],[20,0,36,4],[20,10,36,8],[20,15,36,12],[20,16,36,13,"_isInternetReachable"],[20,36,36,8],[20,41,36,38,"isInternetReachable"],[20,60,36,4],[20,62,36,59],[21,0,37,6],[22,0,38,5],[24,0,40,4],[24,6,40,4],[24,11,40,8],[24,12,40,9,"_isInternetReachable"],[24,32,40,4],[24,35,40,32,"isInternetReachable"],[24,54,40,4],[26,0,41,4],[26,6,41,4],[26,11,41,8],[26,12,41,9,"_listener"],[26,21,41,4],[26,22,41,19],[26,27,41,23],[26,28,41,24,"_isInternetReachable"],[26,48,41,4],[27,0,42,3],[27,5,28,4],[29,0,28,4],[29,9,44,10,"_setExpectsConnection"],[29,30,28,4],[29,33,44,34],[29,43,44,35,"expectsConnection"],[29,60,44,34],[29,62,44,72],[30,0,46,4],[30,10,46,8],[30,15,46,12],[30,16,46,13,"_currentInternetReachabilityCheckHandler"],[30,56,46,8],[30,61,46,58],[30,65,46,4],[30,67,46,64],[31,0,47,6],[31,8,47,6],[31,13,47,10],[31,14,47,11,"_currentInternetReachabilityCheckHandler"],[31,54,47,6],[31,55,47,52,"cancel"],[31,61,47,6],[33,0,48,6],[33,8,48,6],[33,13,48,10],[33,14,48,11,"_currentInternetReachabilityCheckHandler"],[33,54,48,6],[33,57,48,54],[33,61,48,6],[34,0,49,5],[36,0,51,4],[36,10,51,8],[36,15,51,12],[36,16,51,13,"_currentTimeoutHandle"],[36,37,51,8],[36,42,51,39],[36,46,51,4],[36,48,51,45],[37,0,52,6,"clearTimeout"],[37,8,52,6,"clearTimeout"],[37,20,52,18],[37,21,52,19],[37,26,52,23],[37,27,52,24,"_currentTimeoutHandle"],[37,48,52,18],[37,49,52,6],[38,0,53,6],[38,8,53,6],[38,13,53,10],[38,14,53,11,"_currentTimeoutHandle"],[38,35,53,6],[38,38,53,35],[38,42,53,6],[39,0,54,5],[41,0,56,4],[41,10,56,8,"expectsConnection"],[41,27,56,4],[41,29,56,27],[42,0,59,6],[42,12,59,10],[42,13,59,11],[42,18,59,15],[42,19,59,16,"_isInternetReachable"],[42,39,59,6],[42,41,59,38],[43,0,60,8],[43,10,60,8],[43,15,60,12],[43,16,60,13,"_setIsInternetReachable"],[43,39,60,8],[43,40,60,37],[43,44,60,8],[44,0,61,7],[46,0,63,6],[46,8,63,6],[46,13,63,10],[46,14,63,11,"_currentInternetReachabilityCheckHandler"],[46,54,63,6],[46,57,63,54],[46,62,63,58],[46,63,63,59,"_checkInternetReachability"],[46,89,63,54],[46,91,63,6],[47,0,64,5],[47,7,56,4],[47,13,64,11],[48,0,66,6],[48,8,66,6],[48,13,66,10],[48,14,66,11,"_setIsInternetReachable"],[48,37,66,6],[48,38,66,35],[48,43,66,6],[49,0,67,5],[50,0,68,3],[50,5,28,4],[52,0,28,4],[52,9,70,10,"_checkInternetReachability"],[52,35,28,4],[52,38,70,39],[52,50,70,79],[53,0,71,4],[53,10,71,10,"responsePromise"],[53,25,71,25],[53,28,71,28,"fetch"],[53,33,71,33],[53,34,71,34],[53,39,71,38],[53,40,71,39,"_configuration"],[53,54,71,34],[53,55,71,54,"reachabilityUrl"],[53,70,71,33],[53,72,71,71],[54,0,72,6,"method"],[54,8,72,6,"method"],[54,14,72,12],[54,16,72,14],[54,22,71,71],[55,0,73,6,"cache"],[55,8,73,6,"cache"],[55,13,73,11],[55,15,73,13],[56,0,71,71],[56,7,71,33],[56,8,71,4],[57,0,77,4],[57,10,77,8,"timeoutHandle"],[57,23,77,4],[58,0,78,4],[58,10,78,10,"timeoutPromise"],[58,24,78,24],[58,27,78,27],[58,31,78,31,"Promise"],[58,38,78,27],[58,39,79,6],[58,49,79,7,"_"],[58,50,79,6],[58,52,79,10,"reject"],[58,58,79,6],[58,60,79,27],[59,0,80,8,"timeoutHandle"],[59,8,80,8,"timeoutHandle"],[59,21,80,21],[59,24,80,24,"setTimeout"],[59,34,80,34],[59,35,81,10],[60,0,81,10],[60,17,81,22,"reject"],[60,23,81,28],[60,24,81,29],[60,34,81,28],[60,35,81,10],[61,0,81,10],[61,9,80,34],[61,11,82,10],[61,16,82,14],[61,17,82,15,"_configuration"],[61,31,82,10],[61,32,82,30,"reachabilityRequestTimeout"],[61,58,80,34],[61,59,80,8],[62,0,84,7],[62,7,78,27],[62,8,78,4],[64,0,88,4],[64,10,88,8,"cancel"],[64,16,88,26],[64,19,88,29],[64,37,88,41],[64,38,88,43],[64,39,88,4],[66,0,89,4],[66,10,89,10,"cancelPromise"],[66,23,89,23],[66,26,89,26],[66,30,89,30,"Promise"],[66,37,89,26],[66,38,90,6],[66,48,90,7,"_"],[66,49,90,6],[66,51,90,10,"reject"],[66,57,90,6],[66,59,90,27],[67,0,91,8,"cancel"],[67,8,91,8,"cancel"],[67,14,91,14],[67,17,91,17],[68,0,91,17],[68,17,91,29,"reject"],[68,23,91,35],[68,24,91,36],[68,34,91,35],[68,35,91,17],[69,0,91,17],[69,9,91,8],[70,0,92,7],[70,7,89,26],[70,8,89,4],[71,0,95,4],[71,10,95,10,"promise"],[71,17,95,17],[71,20,95,20,"Promise"],[71,27,95,27],[71,28,95,28,"race"],[71,32,95,20],[71,33,95,33],[71,34,96,6,"responsePromise"],[71,49,95,33],[71,51,97,6,"timeoutPromise"],[71,65,95,33],[71,67,98,6,"cancelPromise"],[71,80,95,33],[71,81,95,20],[71,83,100,7,"then"],[71,87,95,20],[71,88,101,8],[71,98,101,9,"response"],[71,106,101,8],[71,108,101,40],[72,0,102,10],[72,15,102,17],[72,20,102,21],[72,21,102,22,"_configuration"],[72,35,102,17],[72,36,102,37,"reachabilityTest"],[72,52,102,17],[72,53,102,54,"response"],[72,61,102,17],[72,62,102,10],[73,0,103,9],[73,7,95,20],[73,9,105,7,"then"],[73,13,95,20],[73,14,106,8],[73,24,106,9,"result"],[73,30,106,8],[73,32,106,26],[74,0,107,10],[74,8,107,10],[74,13,107,14],[74,14,107,15,"_setIsInternetReachable"],[74,37,107,10],[74,38,107,39,"result"],[74,44,107,10],[76,0,108,10],[76,12,108,16,"nextTimeoutInterval"],[76,31,108,35],[76,34,108,38],[76,39,108,42],[76,40,108,43,"_isInternetReachable"],[76,60,108,38],[76,63,109,14],[76,68,109,18],[76,69,109,19,"_configuration"],[76,83,109,14],[76,84,109,34,"reachabilityLongTimeout"],[76,107,108,38],[76,110,110,14],[76,115,110,18],[76,116,110,19,"_configuration"],[76,130,110,14],[76,131,110,34,"reachabilityShortTimeout"],[76,155,108,10],[77,0,111,10],[77,8,111,10],[77,13,111,14],[77,14,111,15,"_currentTimeoutHandle"],[77,35,111,10],[77,38,111,39,"setTimeout"],[77,48,111,49],[77,49,112,12],[77,54,112,16],[77,55,112,17,"_checkInternetReachability"],[77,81,111,49],[77,83,113,12,"nextTimeoutInterval"],[77,102,111,49],[77,103,111,10],[78,0,115,9],[78,7,95,20],[78,9,117,7,"catch"],[78,14,95,20],[78,15,118,8],[78,25,118,9,"error"],[78,30,118,8],[78,32,118,58],[79,0,119,10],[79,12,119,14,"error"],[79,17,119,19],[79,22,119,24],[79,32,119,10],[79,34,119,36],[80,0,120,12],[80,10,120,12],[80,15,120,16],[80,16,120,17,"_setIsInternetReachable"],[80,39,120,12],[80,40,120,41],[80,45,120,12],[82,0,121,12],[82,10,121,12],[82,15,121,16],[82,16,121,17,"_currentTimeoutHandle"],[82,37,121,12],[82,40,121,41,"setTimeout"],[82,50,121,51],[82,51,122,14],[82,56,122,18],[82,57,122,19,"_checkInternetReachability"],[82,83,121,51],[82,85,123,14],[82,90,123,18],[82,91,123,19,"_configuration"],[82,105,123,14],[82,106,123,34,"reachabilityShortTimeout"],[82,130,121,51],[82,131,121,12],[83,0,125,11],[84,0,126,9],[84,7,95,20],[84,9,129,7,"then"],[84,13,95,20],[84,14,130,8],[84,26,130,20],[85,0,131,10,"clearTimeout"],[85,8,131,10,"clearTimeout"],[85,20,131,22],[85,21,131,23,"timeoutHandle"],[85,34,131,22],[85,35,131,10],[86,0,132,9],[86,7,95,20],[86,9,133,8],[86,19,133,9,"error"],[86,24,133,8],[86,26,133,32],[87,0,134,10,"clearTimeout"],[87,8,134,10,"clearTimeout"],[87,20,134,22],[87,21,134,23,"timeoutHandle"],[87,34,134,22],[87,35,134,10],[88,0,135,10],[88,14,135,16,"error"],[88,19,135,10],[89,0,136,9],[89,7,95,20],[89,8,95,4],[90,0,139,4],[90,13,139,11],[91,0,140,6,"promise"],[91,8,140,6,"promise"],[91,15,140,13],[91,17,140,6,"promise"],[91,24,139,11],[92,0,141,6,"cancel"],[92,8,141,6,"cancel"],[92,14,141,12],[92,16,141,6,"cancel"],[93,0,139,11],[93,7,139,4],[94,0,143,3],[94,5,28,4],[96,0,28,4],[96,9,145,9,"update"],[96,15,28,4],[96,18,145,18],[96,28,145,19,"state"],[96,33,145,18],[96,35,145,74],[97,0,146,4],[97,10,146,8],[97,17,146,15,"state"],[97,22,146,20],[97,23,146,21,"isInternetReachable"],[97,42,146,8],[97,47,146,45],[97,56,146,4],[97,58,146,56],[98,0,147,6],[98,8,147,6],[98,13,147,10],[98,14,147,11,"_setIsInternetReachable"],[98,37,147,6],[98,38,147,35,"state"],[98,43,147,40],[98,44,147,41,"isInternetReachable"],[98,63,147,6],[99,0,148,5],[99,7,146,4],[99,13,148,11],[100,0,149,6],[100,8,149,6],[100,13,149,10],[100,14,149,11,"_setExpectsConnection"],[100,35,149,6],[100,36,149,33,"state"],[100,41,149,38],[100,42,149,39,"isConnected"],[100,53,149,6],[101,0,150,5],[102,0,151,3],[102,5,28,4],[104,0,28,4],[104,9,153,9,"currentState"],[104,21,28,4],[104,24,153,24],[104,36,153,58],[105,0,154,4],[105,13,154,11],[105,18,154,15],[105,19,154,16,"_isInternetReachable"],[105,39,154,4],[106,0,155,3],[106,5,28,4],[108,0,28,4],[108,9,157,9,"tearDown"],[108,17,28,4],[108,20,157,20],[108,32,157,32],[109,0,159,4],[109,10,159,8],[109,15,159,12],[109,16,159,13,"_currentInternetReachabilityCheckHandler"],[109,56,159,8],[109,61,159,58],[109,65,159,4],[109,67,159,64],[110,0,160,6],[110,8,160,6],[110,13,160,10],[110,14,160,11,"_currentInternetReachabilityCheckHandler"],[110,54,160,6],[110,55,160,52,"cancel"],[110,61,160,6],[112,0,161,6],[112,8,161,6],[112,13,161,10],[112,14,161,11,"_currentInternetReachabilityCheckHandler"],[112,54,161,6],[112,57,161,54],[112,61,161,6],[113,0,162,5],[115,0,165,4],[115,10,165,8],[115,15,165,12],[115,16,165,13,"_currentTimeoutHandle"],[115,37,165,8],[115,42,165,39],[115,46,165,4],[115,48,165,45],[116,0,166,6,"clearTimeout"],[116,8,166,6,"clearTimeout"],[116,20,166,18],[116,21,166,19],[116,26,166,23],[116,27,166,24,"_currentTimeoutHandle"],[116,48,166,18],[116,49,166,6],[117,0,167,6],[117,8,167,6],[117,13,167,10],[117,14,167,11,"_currentTimeoutHandle"],[117,35,167,6],[117,38,167,35],[117,42,167,6],[118,0,168,5],[119,0,169,3],[119,5,28,4],[121,0,29,4],[121,9,29,9,"_configuration"],[121,23,29,4],[121,26,29,26,"configuration"],[121,39,29,4],[122,0,30,4],[122,9,30,9,"_listener"],[122,18,30,4],[122,21,30,21,"listener"],[122,29,30,4],[123,0,31,3],[123,3]],"functionMap":{"names":["<global>","InternetReachability","InternetReachability#constructor","InternetReachability#_setIsInternetReachable","InternetReachability#_setExpectsConnection","InternetReachability#_checkInternetReachability","Promise$argument_0","setTimeout$argument_0","cancel","Promise.race.then$argument_0","Promise.race.then.then$argument_0","Promise.race.then.then._catch$argument_0","Promise.race..._catch.then$argument_0","Promise.race..._catch.then$argument_1","InternetReachability#update","InternetReachability#currentState","InternetReachability#tearDown"],"mappings":"AAA;eCiB;ECO;GDM;oCEE;GFS;kCGE;GHwB;uCIE;MCS;UCE,8BD;ODG;6BGI,cH;MCE;iBEC,8BF;ODC;QIS;SJE;QKG;SLS;QMG;SNQ;QOI;SPE;QQC;SRG;GJO;kBaE;GbM;wBcE;GdE;oBeE;GfY;CDC"}},"type":"js/module"}]}