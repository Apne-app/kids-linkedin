{"dependencies":[{"name":"./globals","data":{"isAsync":false,"locs":[{"start":{"line":4,"column":16},"end":{"line":4,"column":36}}]}},{"name":"./constants","data":{"isAsync":false,"locs":[{"start":{"line":5,"column":18},"end":{"line":5,"column":40}}]}},{"name":"./attach-listener","data":{"isAsync":false,"locs":[{"start":{"line":6,"column":24},"end":{"line":6,"column":52}}]}},{"name":"./attach-shared-listeners","data":{"isAsync":false,"locs":[{"start":{"line":7,"column":32},"end":{"line":7,"column":68}}]}},{"name":"./manage-subscribers","data":{"isAsync":false,"locs":[{"start":{"line":8,"column":27},"end":{"line":8,"column":58}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createOrJoinSocket=void 0;var t=r(d[0]),s=r(d[1]),c=r(d[2]),o=r(d[3]),n=r(d[4]),u=function(c,o,u,S,b){return function(){if(n.removeSubscriber(c,o),!n.hasSubscribers(c)){try{t.sharedWebSockets[c].onclose=function(t){u.current.onClose&&u.current.onClose(t),S(s.ReadyState.CLOSED)},t.sharedWebSockets[c].close()}catch(t){}b&&b(),delete t.sharedWebSockets[c]}}};e.createOrJoinSocket=function(S,b,h,k,l,W,f,y){if(k.current.share){var C=null;void 0===t.sharedWebSockets[b]?(h(s.ReadyState.CONNECTING),t.sharedWebSockets[b]=new WebSocket(b,k.current.protocols),C=o.attachSharedListeners(t.sharedWebSockets[b],b,k,y)):h(t.sharedWebSockets[b].readyState);var v={setLastMessage:l,setReadyState:h,optionsRef:k,reconnectCount:f,reconnect:W};return n.addSubscriber(b,v),S.current=t.sharedWebSockets[b],u(b,v,k,h,C)}return h(s.ReadyState.CONNECTING),S.current=new WebSocket(b,k.current.protocols),c.attachListeners(S.current,{setLastMessage:l,setReadyState:h},k,W.current,f,y)}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"createOrJoinSocket"],[1,116,3,0,"undefined"],[1,118,4,0],[1,122,4,4,"globals_1"],[1,124,4,16,"require"],[1,126,4,23,"d"],[1,128,4,23],[1,132,5,4,"constants_1"],[1,134,5,18,"require"],[1,136,5,25,"d"],[1,138,5,25],[1,142,6,4,"attach_listener_1"],[1,144,6,24,"require"],[1,146,6,31,"d"],[1,148,6,31],[1,152,7,4,"attach_shared_listeners_1"],[1,154,7,32,"require"],[1,156,7,39,"d"],[1,158,7,39],[1,162,8,4,"manage_subscribers_1"],[1,164,8,27,"require"],[1,166,8,34,"d"],[1,168,8,34],[1,172,10,4,"cleanSubscribers"],[1,174,10,23],[1,183,10,33,"url"],[1,185,10,38,"subscriber"],[1,187,10,50,"optionsRef"],[1,189,10,62,"setReadyState"],[1,191,10,77,"clearSocketIoPingInterval"],[1,194,11,4],[1,201,11,11],[1,212,13,8],[1,215,12,8,"manage_subscribers_1"],[1,217,12,29,"removeSubscriber"],[1,234,12,46,"url"],[1,236,12,51,"subscriber"],[1,240,13,13,"manage_subscribers_1"],[1,242,13,34,"hasSubscribers"],[1,257,13,49,"url"],[1,260,13,55],[1,261,14,12],[1,265,15,16,"globals_1"],[1,267,15,26,"sharedWebSockets"],[1,284,15,43,"url"],[1,287,15,48,"onclose"],[1,295,15,58],[1,304,15,68,"event"],[1,307,16,24,"optionsRef"],[1,309,16,35,"current"],[1,317,16,43,"onClose"],[1,326,17,24,"optionsRef"],[1,328,17,35,"current"],[1,336,17,43,"onClose"],[1,344,17,51,"event"],[1,347,19,20,"setReadyState"],[1,349,19,34,"constants_1"],[1,351,19,46,"ReadyState"],[1,362,19,57,"CLOSED"],[1,371,21,16,"globals_1"],[1,373,21,26,"sharedWebSockets"],[1,390,21,43,"url"],[1,393,21,48,"close"],[1,401,23,12],[1,407,23,19,"e"],[1,411,25,16,"clearSocketIoPingInterval"],[1,414,26,16,"clearSocketIoPingInterval"],[1,425,27,19,"globals_1"],[1,427,27,29,"sharedWebSockets"],[1,444,27,46,"url"],[1,450,31,0,"exports"],[1,452,31,8,"createOrJoinSocket"],[1,471,31,29],[1,480,31,39,"webSocketRef"],[1,482,31,53,"url"],[1,484,31,58,"setReadyState"],[1,486,31,73,"optionsRef"],[1,488,31,85,"setLastMessage"],[1,490,31,101,"startRef"],[1,492,31,111,"reconnectCount"],[1,494,31,127,"sendMessage"],[1,497,32,4],[1,500,32,8,"optionsRef"],[1,502,32,19,"current"],[1,510,32,27,"share"],[1,516,32,34],[1,517,33,8],[1,521,33,12,"clearSocketIoPingInterval"],[1,523,33,40],[1,533,34,48,"undefined"],[1,537,34,12,"globals_1"],[1,539,34,22,"sharedWebSockets"],[1,556,34,39,"url"],[1,560,35,12,"setReadyState"],[1,562,35,26,"constants_1"],[1,564,35,38,"ReadyState"],[1,575,35,49,"CONNECTING"],[1,587,36,12,"globals_1"],[1,589,36,22,"sharedWebSockets"],[1,606,36,39,"url"],[1,609,36,46],[1,613,36,50,"WebSocket"],[1,623,36,60,"url"],[1,625,36,65,"optionsRef"],[1,627,36,76,"current"],[1,635,36,84,"protocols"],[1,646,37,12,"clearSocketIoPingInterval"],[1,648,37,40,"attach_shared_listeners_1"],[1,650,37,66,"attachSharedListeners"],[1,672,37,88,"globals_1"],[1,674,37,98,"sharedWebSockets"],[1,691,37,115,"url"],[1,694,37,121,"url"],[1,696,37,126,"optionsRef"],[1,698,37,138,"sendMessage"],[1,702,40,12,"setReadyState"],[1,704,40,26,"globals_1"],[1,706,40,36,"sharedWebSockets"],[1,723,40,53,"url"],[1,726,40,58,"readyState"],[1,738,42,8],[1,742,42,12,"subscriber"],[1,745,43,12,"setLastMessage"],[1,760,43,28,"setLastMessage"],[1,762,44,12,"setReadyState"],[1,776,44,27,"setReadyState"],[1,778,45,12,"optionsRef"],[1,789,45,24,"optionsRef"],[1,791,46,12,"reconnectCount"],[1,806,46,28,"reconnectCount"],[1,808,47,12,"reconnect"],[1,818,47,23,"startRef"],[1,821,51,8],[1,828,49,8,"manage_subscribers_1"],[1,830,49,29,"addSubscriber"],[1,844,49,43,"url"],[1,846,49,48,"subscriber"],[1,849,50,8,"webSocketRef"],[1,851,50,21,"current"],[1,859,50,31,"globals_1"],[1,861,50,41,"sharedWebSockets"],[1,878,50,58,"url"],[1,881,51,15,"cleanSubscribers"],[1,883,51,32,"url"],[1,885,51,37,"subscriber"],[1,887,51,49,"optionsRef"],[1,889,51,61,"setReadyState"],[1,891,51,76,"clearSocketIoPingInterval"],[1,894,56,8],[1,901,54,8,"setReadyState"],[1,903,54,22,"constants_1"],[1,905,54,34,"ReadyState"],[1,916,54,45,"CONNECTING"],[1,928,55,8,"webSocketRef"],[1,930,55,21,"current"],[1,938,55,31],[1,942,55,35,"WebSocket"],[1,952,55,45,"url"],[1,954,55,50,"optionsRef"],[1,956,55,61,"current"],[1,964,55,69,"protocols"],[1,975,56,15,"attach_listener_1"],[1,977,56,33,"attachListeners"],[1,993,56,49,"webSocketRef"],[1,995,56,62,"current"],[1,1004,57,12,"setLastMessage"],[1,1019,57,28,"setLastMessage"],[1,1021,58,12,"setReadyState"],[1,1035,58,27,"setReadyState"],[1,1038,59,11,"optionsRef"],[1,1040,59,23,"startRef"],[1,1042,59,32,"current"],[1,1050,59,41,"reconnectCount"],[1,1052,59,57,"sendMessage"]],"functionMap":{"names":["<global>","cleanSubscribers","<anonymous>","globals_1.sharedWebSockets.url.onclose","exports.createOrJoinSocket"],"mappings":"AAA;uBCS;WCC;0DCI;iBDK;KDS;CDC;6BIC;CJ8B"}},"type":"js/module"}]}