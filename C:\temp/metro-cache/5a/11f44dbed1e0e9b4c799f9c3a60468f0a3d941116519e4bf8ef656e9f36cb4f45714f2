{"dependencies":[{"name":"../util/class","data":{"isAsync":false}},{"name":"../util/promise","data":{"isAsync":false}},{"name":"../util/set","data":{"isAsync":false}},{"name":"../util/uri","data":{"isAsync":false}},{"name":"../util/browser","data":{"isAsync":false}},{"name":"../util/copy_object","data":{"isAsync":false}},{"name":"../util/assign","data":{"isAsync":false}},{"name":"../util/to_json","data":{"isAsync":false}},{"name":"../util/websocket","data":{"isAsync":false}},{"name":"../mixins/deferrable","data":{"isAsync":false}},{"name":"./transport","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var Class = _$$_REQUIRE(_dependencyMap[0], \"../util/class\"),\n      Promise = _$$_REQUIRE(_dependencyMap[1], \"../util/promise\"),\n      Set = _$$_REQUIRE(_dependencyMap[2], \"../util/set\"),\n      URI = _$$_REQUIRE(_dependencyMap[3], \"../util/uri\"),\n      browser = _$$_REQUIRE(_dependencyMap[4], \"../util/browser\"),\n      copyObject = _$$_REQUIRE(_dependencyMap[5], \"../util/copy_object\"),\n      assign = _$$_REQUIRE(_dependencyMap[6], \"../util/assign\"),\n      toJSON = _$$_REQUIRE(_dependencyMap[7], \"../util/to_json\"),\n      ws = _$$_REQUIRE(_dependencyMap[8], \"../util/websocket\"),\n      Deferrable = _$$_REQUIRE(_dependencyMap[9], \"../mixins/deferrable\"),\n      Transport = _$$_REQUIRE(_dependencyMap[10], \"./transport\");\n\n  var WebSocket = assign(Class(Transport, {\n    UNCONNECTED: 1,\n    CONNECTING: 2,\n    CONNECTED: 3,\n    batching: false,\n    isUsable: function isUsable(callback, context) {\n      this.callback(function () {\n        callback.call(context, true);\n      });\n      this.errback(function () {\n        callback.call(context, false);\n      });\n      this.connect();\n    },\n    request: function request(messages) {\n      this._pending = this._pending || new Set();\n\n      for (var i = 0, n = messages.length; i < n; i++) {\n        this._pending.add(messages[i]);\n      }\n\n      var self = this;\n      var promise = new Promise(function (resolve, reject) {\n        self.callback(function (socket) {\n          if (!socket || socket.readyState !== 1) return;\n          socket.send(toJSON(messages));\n          resolve(socket);\n        });\n        self.connect();\n      });\n      return {\n        abort: function abort() {\n          promise.then(function (ws) {\n            ws.close();\n          });\n        }\n      };\n    },\n    connect: function connect() {\n      if (WebSocket._unloaded) return;\n      this._state = this._state || this.UNCONNECTED;\n      if (this._state !== this.UNCONNECTED) return;\n      this._state = this.CONNECTING;\n\n      var socket = this._createSocket();\n\n      if (!socket) return this.setDeferredStatus('failed');\n      var self = this;\n\n      socket.onopen = function () {\n        if (socket.headers) self._storeCookies(socket.headers['set-cookie']);\n        self._socket = socket;\n        self._state = self.CONNECTED;\n        self._everConnected = true;\n        self.setDeferredStatus('succeeded', socket);\n      };\n\n      var closed = false;\n\n      socket.onclose = socket.onerror = function () {\n        if (closed) return;\n        closed = true;\n        var wasConnected = self._state === self.CONNECTED;\n        socket.onopen = socket.onclose = socket.onerror = socket.onmessage = null;\n        delete self._socket;\n        self._state = self.UNCONNECTED;\n        var pending = self._pending ? self._pending.toArray() : [];\n        delete self._pending;\n\n        if (wasConnected || self._everConnected) {\n          self.setDeferredStatus('unknown');\n\n          self._handleError(pending, wasConnected);\n        } else {\n          self.setDeferredStatus('failed');\n        }\n      };\n\n      socket.onmessage = function (event) {\n        var replies;\n\n        try {\n          replies = JSON.parse(event.data);\n        } catch (error) {}\n\n        if (!replies) return;\n        replies = [].concat(replies);\n\n        for (var i = 0, n = replies.length; i < n; i++) {\n          if (replies[i].successful === undefined) continue;\n\n          self._pending.remove(replies[i]);\n        }\n\n        self._receive(replies);\n      };\n    },\n    close: function close() {\n      if (!this._socket) return;\n\n      this._socket.close();\n    },\n    _createSocket: function _createSocket() {\n      var url = WebSocket.getSocketUrl(this.endpoint),\n          headers = this._dispatcher.headers,\n          extensions = this._dispatcher.wsExtensions,\n          cookie = this._getCookies(),\n          tls = this._dispatcher.tls,\n          options = {\n        extensions: extensions,\n        headers: headers,\n        proxy: this._proxy,\n        tls: tls\n      };\n\n      if (cookie !== '') options.headers['Cookie'] = cookie;\n\n      try {\n        return ws.create(url, [], options);\n      } catch (e) {}\n    }\n  }), {\n    PROTOCOLS: {\n      'http:': 'ws:',\n      'https:': 'wss:'\n    },\n    create: function create(dispatcher, endpoint) {\n      var sockets = dispatcher.transports.websocket = dispatcher.transports.websocket || {};\n      sockets[endpoint.href] = sockets[endpoint.href] || new this(dispatcher, endpoint);\n      return sockets[endpoint.href];\n    },\n    getSocketUrl: function getSocketUrl(endpoint) {\n      endpoint = copyObject(endpoint);\n      endpoint.protocol = this.PROTOCOLS[endpoint.protocol];\n      return URI.stringify(endpoint);\n    },\n    isUsable: function isUsable(dispatcher, endpoint, callback, context) {\n      this.create(dispatcher, endpoint).isUsable(callback, context);\n    }\n  });\n  assign(WebSocket.prototype, Deferrable);\n\n  if (browser.Event && global.onbeforeunload !== undefined) {\n    browser.Event.on(global, 'beforeunload', function () {\n      if (WebSocket._unloaded === undefined) WebSocket._unloaded = true;\n    });\n  }\n\n  module.exports = WebSocket;\n});","lineCount":165,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"Class"],[4,11,3,9],[4,14,3,17,"require"],[4,25,3,24],[4,61,3,0],[5,0,3,0],[5,6,4,4,"Promise"],[5,13,4,11],[5,16,4,17,"require"],[5,27,4,24],[5,65,3,0],[6,0,3,0],[6,6,5,4,"Set"],[6,9,5,7],[6,12,5,17,"require"],[6,23,5,24],[6,57,3,0],[7,0,3,0],[7,6,6,4,"URI"],[7,9,6,7],[7,12,6,17,"require"],[7,23,6,24],[7,57,3,0],[8,0,3,0],[8,6,7,4,"browser"],[8,13,7,11],[8,16,7,17,"require"],[8,27,7,24],[8,65,3,0],[9,0,3,0],[9,6,8,4,"copyObject"],[9,16,8,14],[9,19,8,17,"require"],[9,30,8,24],[9,72,3,0],[10,0,3,0],[10,6,9,4,"assign"],[10,12,9,10],[10,15,9,17,"require"],[10,26,9,24],[10,63,3,0],[11,0,3,0],[11,6,10,4,"toJSON"],[11,12,10,10],[11,15,10,17,"require"],[11,26,10,24],[11,64,3,0],[12,0,3,0],[12,6,11,4,"ws"],[12,8,11,6],[12,11,11,17,"require"],[12,22,11,24],[12,62,3,0],[13,0,3,0],[13,6,12,4,"Deferrable"],[13,16,12,14],[13,19,12,17,"require"],[13,30,12,24],[13,73,3,0],[14,0,3,0],[14,6,13,4,"Transport"],[14,15,13,13],[14,18,13,17,"require"],[14,29,13,24],[14,64,3,0],[16,0,15,0],[16,6,15,4,"WebSocket"],[16,15,15,13],[16,18,15,16,"assign"],[16,24,15,22],[16,25,15,23,"Class"],[16,30,15,28],[16,31,15,29,"Transport"],[16,40,15,28],[16,42,15,40],[17,0,16,2,"UNCONNECTED"],[17,4,16,2,"UNCONNECTED"],[17,15,16,13],[17,17,16,16],[17,18,15,40],[18,0,17,2,"CONNECTING"],[18,4,17,2,"CONNECTING"],[18,14,17,12],[18,16,17,16],[18,17,15,40],[19,0,18,2,"CONNECTED"],[19,4,18,2,"CONNECTED"],[19,13,18,11],[19,15,18,16],[19,16,15,40],[20,0,20,2,"batching"],[20,4,20,2,"batching"],[20,12,20,10],[20,14,20,16],[20,19,15,40],[21,0,22,2,"isUsable"],[21,4,22,2,"isUsable"],[21,12,22,10],[21,14,22,12],[21,32,22,21,"callback"],[21,40,22,12],[21,42,22,31,"context"],[21,49,22,12],[21,51,22,40],[22,0,23,4],[22,11,23,9,"callback"],[22,19,23,4],[22,20,23,18],[22,32,23,29],[23,0,23,31,"callback"],[23,8,23,31,"callback"],[23,16,23,39],[23,17,23,40,"call"],[23,21,23,31],[23,22,23,45,"context"],[23,29,23,31],[23,31,23,54],[23,35,23,31],[24,0,23,61],[24,7,23,4],[25,0,24,4],[25,11,24,9,"errback"],[25,18,24,4],[25,19,24,17],[25,31,24,28],[26,0,24,30,"callback"],[26,8,24,30,"callback"],[26,16,24,38],[26,17,24,39,"call"],[26,21,24,30],[26,22,24,44,"context"],[26,29,24,30],[26,31,24,53],[26,36,24,30],[27,0,24,61],[27,7,24,4],[28,0,25,4],[28,11,25,9,"connect"],[28,18,25,4],[29,0,26,3],[29,5,15,40],[30,0,28,2,"request"],[30,4,28,2,"request"],[30,11,28,9],[30,13,28,11],[30,30,28,20,"messages"],[30,38,28,11],[30,40,28,30],[31,0,29,4],[31,11,29,9,"_pending"],[31,19,29,4],[31,22,29,20],[31,27,29,25,"_pending"],[31,35,29,20],[31,39,29,37],[31,43,29,41,"Set"],[31,46,29,37],[31,48,29,4],[33,0,30,4],[33,11,30,9],[33,15,30,13,"i"],[33,16,30,14],[33,19,30,17],[33,20,30,9],[33,22,30,20,"n"],[33,23,30,21],[33,26,30,24,"messages"],[33,34,30,32],[33,35,30,33,"length"],[33,41,30,4],[33,43,30,41,"i"],[33,44,30,42],[33,47,30,45,"n"],[33,48,30,4],[33,50,30,48,"i"],[33,51,30,49],[33,53,30,4],[34,0,30,53],[34,13,30,58,"_pending"],[34,21,30,53],[34,22,30,67,"add"],[34,25,30,53],[34,26,30,71,"messages"],[34,34,30,79],[34,35,30,80,"i"],[34,36,30,79],[34,37,30,53],[35,0,30,4],[37,0,32,4],[37,10,32,8,"self"],[37,14,32,12],[37,17,32,15],[37,21,32,4],[38,0,34,4],[38,10,34,8,"promise"],[38,17,34,15],[38,20,34,18],[38,24,34,22,"Promise"],[38,31,34,18],[38,32,34,30],[38,42,34,39,"resolve"],[38,49,34,30],[38,51,34,48,"reject"],[38,57,34,30],[38,59,34,56],[39,0,35,6,"self"],[39,8,35,6,"self"],[39,12,35,10],[39,13,35,11,"callback"],[39,21,35,6],[39,22,35,20],[39,32,35,29,"socket"],[39,38,35,20],[39,40,35,37],[40,0,36,8],[40,14,36,12],[40,15,36,13,"socket"],[40,21,36,12],[40,25,36,23,"socket"],[40,31,36,29],[40,32,36,30,"readyState"],[40,42,36,23],[40,47,36,45],[40,48,36,8],[40,50,36,48],[41,0,37,8,"socket"],[41,10,37,8,"socket"],[41,16,37,14],[41,17,37,15,"send"],[41,21,37,8],[41,22,37,20,"toJSON"],[41,28,37,26],[41,29,37,27,"messages"],[41,37,37,26],[41,38,37,8],[42,0,38,8,"resolve"],[42,10,38,8,"resolve"],[42,17,38,15],[42,18,38,16,"socket"],[42,24,38,15],[42,25,38,8],[43,0,39,7],[43,9,35,6],[44,0,41,6,"self"],[44,8,41,6,"self"],[44,12,41,10],[44,13,41,11,"connect"],[44,20,41,6],[45,0,42,5],[45,7,34,18],[45,8,34,4],[46,0,44,4],[46,13,44,11],[47,0,45,6,"abort"],[47,8,45,6,"abort"],[47,13,45,11],[47,15,45,13],[47,32,45,24],[48,0,45,26,"promise"],[48,10,45,26,"promise"],[48,17,45,33],[48,18,45,34,"then"],[48,22,45,26],[48,23,45,39],[48,33,45,48,"ws"],[48,35,45,39],[48,37,45,52],[49,0,45,54,"ws"],[49,12,45,54,"ws"],[49,14,45,56],[49,15,45,57,"close"],[49,20,45,54],[50,0,45,66],[50,11,45,26],[51,0,45,69],[52,0,44,11],[52,7,44,4],[53,0,47,3],[53,5,15,40],[54,0,49,2,"connect"],[54,4,49,2,"connect"],[54,11,49,9],[54,13,49,11],[54,32,49,22],[55,0,50,4],[55,10,50,8,"WebSocket"],[55,19,50,17],[55,20,50,18,"_unloaded"],[55,29,50,4],[55,31,50,29],[56,0,52,4],[56,11,52,9,"_state"],[56,17,52,4],[56,20,52,18],[56,25,52,23,"_state"],[56,31,52,18],[56,35,52,33],[56,40,52,38,"UNCONNECTED"],[56,51,52,4],[57,0,53,4],[57,10,53,8],[57,15,53,13,"_state"],[57,21,53,8],[57,26,53,24],[57,31,53,29,"UNCONNECTED"],[57,42,53,4],[57,44,53,42],[58,0,54,4],[58,11,54,9,"_state"],[58,17,54,4],[58,20,54,18],[58,25,54,23,"CONNECTING"],[58,35,54,4],[60,0,56,4],[60,10,56,8,"socket"],[60,16,56,14],[60,19,56,17],[60,24,56,22,"_createSocket"],[60,37,56,17],[60,39,56,4],[62,0,57,4],[62,10,57,8],[62,11,57,9,"socket"],[62,17,57,4],[62,19,57,17],[62,26,57,24],[62,31,57,29,"setDeferredStatus"],[62,48,57,24],[62,49,57,47],[62,57,57,24],[62,58,57,17],[63,0,59,4],[63,10,59,8,"self"],[63,14,59,12],[63,17,59,15],[63,21,59,4],[65,0,61,4,"socket"],[65,6,61,4,"socket"],[65,12,61,10],[65,13,61,11,"onopen"],[65,19,61,4],[65,22,61,20],[65,34,61,31],[66,0,62,6],[66,12,62,10,"socket"],[66,18,62,16],[66,19,62,17,"headers"],[66,26,62,6],[66,28,62,26,"self"],[66,32,62,30],[66,33,62,31,"_storeCookies"],[66,46,62,26],[66,47,62,45,"socket"],[66,53,62,51],[66,54,62,52,"headers"],[66,61,62,45],[66,62,62,60],[66,74,62,45],[66,75,62,26],[67,0,63,6,"self"],[67,8,63,6,"self"],[67,12,63,10],[67,13,63,11,"_socket"],[67,20,63,6],[67,23,63,21,"socket"],[67,29,63,6],[68,0,64,6,"self"],[68,8,64,6,"self"],[68,12,64,10],[68,13,64,11,"_state"],[68,19,64,6],[68,22,64,20,"self"],[68,26,64,24],[68,27,64,25,"CONNECTED"],[68,36,64,6],[69,0,65,6,"self"],[69,8,65,6,"self"],[69,12,65,10],[69,13,65,11,"_everConnected"],[69,27,65,6],[69,30,65,28],[69,34,65,6],[70,0,66,6,"self"],[70,8,66,6,"self"],[70,12,66,10],[70,13,66,11,"setDeferredStatus"],[70,30,66,6],[70,31,66,29],[70,42,66,6],[70,44,66,42,"socket"],[70,50,66,6],[71,0,67,5],[71,7,61,4],[73,0,69,4],[73,10,69,8,"closed"],[73,16,69,14],[73,19,69,17],[73,24,69,4],[75,0,70,4,"socket"],[75,6,70,4,"socket"],[75,12,70,10],[75,13,70,11,"onclose"],[75,20,70,4],[75,23,70,21,"socket"],[75,29,70,27],[75,30,70,28,"onerror"],[75,37,70,21],[75,40,70,38],[75,52,70,49],[76,0,71,6],[76,12,71,10,"closed"],[76,18,71,6],[76,20,71,18],[77,0,72,6,"closed"],[77,8,72,6,"closed"],[77,14,72,12],[77,17,72,15],[77,21,72,6],[78,0,74,6],[78,12,74,10,"wasConnected"],[78,24,74,22],[78,27,74,26,"self"],[78,31,74,30],[78,32,74,31,"_state"],[78,38,74,26],[78,43,74,42,"self"],[78,47,74,46],[78,48,74,47,"CONNECTED"],[78,57,74,6],[79,0,75,6,"socket"],[79,8,75,6,"socket"],[79,14,75,12],[79,15,75,13,"onopen"],[79,21,75,6],[79,24,75,22,"socket"],[79,30,75,28],[79,31,75,29,"onclose"],[79,38,75,22],[79,41,75,39,"socket"],[79,47,75,45],[79,48,75,46,"onerror"],[79,55,75,39],[79,58,75,56,"socket"],[79,64,75,62],[79,65,75,63,"onmessage"],[79,74,75,56],[79,77,75,75],[79,81,75,6],[80,0,77,6],[80,15,77,13,"self"],[80,19,77,17],[80,20,77,18,"_socket"],[80,27,77,6],[81,0,78,6,"self"],[81,8,78,6,"self"],[81,12,78,10],[81,13,78,11,"_state"],[81,19,78,6],[81,22,78,20,"self"],[81,26,78,24],[81,27,78,25,"UNCONNECTED"],[81,38,78,6],[82,0,80,6],[82,12,80,10,"pending"],[82,19,80,17],[82,22,80,20,"self"],[82,26,80,24],[82,27,80,25,"_pending"],[82,35,80,20],[82,38,80,36,"self"],[82,42,80,40],[82,43,80,41,"_pending"],[82,51,80,36],[82,52,80,50,"toArray"],[82,59,80,36],[82,61,80,20],[82,64,80,62],[82,66,80,6],[83,0,81,6],[83,15,81,13,"self"],[83,19,81,17],[83,20,81,18,"_pending"],[83,28,81,6],[85,0,83,6],[85,12,83,10,"wasConnected"],[85,24,83,22],[85,28,83,26,"self"],[85,32,83,30],[85,33,83,31,"_everConnected"],[85,47,83,6],[85,49,83,47],[86,0,84,8,"self"],[86,10,84,8,"self"],[86,14,84,12],[86,15,84,13,"setDeferredStatus"],[86,32,84,8],[86,33,84,31],[86,42,84,8],[88,0,85,8,"self"],[88,10,85,8,"self"],[88,14,85,12],[88,15,85,13,"_handleError"],[88,27,85,8],[88,28,85,26,"pending"],[88,35,85,8],[88,37,85,35,"wasConnected"],[88,49,85,8],[89,0,86,7],[89,9,83,6],[89,15,86,13],[90,0,87,8,"self"],[90,10,87,8,"self"],[90,14,87,12],[90,15,87,13,"setDeferredStatus"],[90,32,87,8],[90,33,87,31],[90,41,87,8],[91,0,88,7],[92,0,89,5],[92,7,70,4],[94,0,91,4,"socket"],[94,6,91,4,"socket"],[94,12,91,10],[94,13,91,11,"onmessage"],[94,22,91,4],[94,25,91,23],[94,35,91,32,"event"],[94,40,91,23],[94,42,91,39],[95,0,92,6],[95,12,92,10,"replies"],[95,19,92,6],[97,0,93,6],[97,12,93,10],[98,0,93,12,"replies"],[98,10,93,12,"replies"],[98,17,93,19],[98,20,93,22,"JSON"],[98,24,93,26],[98,25,93,27,"parse"],[98,30,93,22],[98,31,93,33,"event"],[98,36,93,38],[98,37,93,39,"data"],[98,41,93,22],[98,42,93,12],[99,0,93,46],[99,9,93,6],[99,10,93,47],[99,17,93,54,"error"],[99,22,93,47],[99,24,93,61],[99,25,93,63],[101,0,95,6],[101,12,95,10],[101,13,95,11,"replies"],[101,20,95,6],[101,22,95,20],[102,0,97,6,"replies"],[102,8,97,6,"replies"],[102,15,97,13],[102,18,97,16],[102,21,97,19,"concat"],[102,27,97,16],[102,28,97,26,"replies"],[102,35,97,16],[102,36,97,6],[104,0,99,6],[104,13,99,11],[104,17,99,15,"i"],[104,18,99,16],[104,21,99,19],[104,22,99,11],[104,24,99,22,"n"],[104,25,99,23],[104,28,99,26,"replies"],[104,35,99,33],[104,36,99,34,"length"],[104,42,99,6],[104,44,99,42,"i"],[104,45,99,43],[104,48,99,46,"n"],[104,49,99,6],[104,51,99,49,"i"],[104,52,99,50],[104,54,99,6],[104,56,99,54],[105,0,100,8],[105,14,100,12,"replies"],[105,21,100,19],[105,22,100,20,"i"],[105,23,100,19],[105,24,100,12],[105,25,100,23,"successful"],[105,35,100,12],[105,40,100,38,"undefined"],[105,49,100,8],[105,51,100,49],[107,0,101,8,"self"],[107,10,101,8,"self"],[107,14,101,12],[107,15,101,13,"_pending"],[107,23,101,8],[107,24,101,22,"remove"],[107,30,101,8],[107,31,101,29,"replies"],[107,38,101,36],[107,39,101,37,"i"],[107,40,101,36],[107,41,101,8],[108,0,102,7],[110,0,103,6,"self"],[110,8,103,6,"self"],[110,12,103,10],[110,13,103,11,"_receive"],[110,21,103,6],[110,22,103,20,"replies"],[110,29,103,6],[111,0,104,5],[111,7,91,4],[112,0,105,3],[112,5,15,40],[113,0,107,2,"close"],[113,4,107,2,"close"],[113,9,107,7],[113,11,107,9],[113,28,107,20],[114,0,108,4],[114,10,108,8],[114,11,108,9],[114,16,108,14,"_socket"],[114,23,108,4],[114,25,108,23],[116,0,109,4],[116,11,109,9,"_socket"],[116,18,109,4],[116,19,109,17,"close"],[116,24,109,4],[117,0,110,3],[117,5,15,40],[118,0,112,2,"_createSocket"],[118,4,112,2,"_createSocket"],[118,17,112,15],[118,19,112,17],[118,44,112,28],[119,0,113,4],[119,10,113,8,"url"],[119,13,113,11],[119,16,113,21,"WebSocket"],[119,25,113,30],[119,26,113,31,"getSocketUrl"],[119,38,113,21],[119,39,113,44],[119,44,113,49,"endpoint"],[119,52,113,21],[119,53,113,4],[120,0,113,4],[120,10,114,8,"headers"],[120,17,114,15],[120,20,114,21],[120,25,114,26,"_dispatcher"],[120,36,114,21],[120,37,114,38,"headers"],[120,44,113,4],[121,0,113,4],[121,10,115,8,"extensions"],[121,20,115,18],[121,23,115,21],[121,28,115,26,"_dispatcher"],[121,39,115,21],[121,40,115,38,"wsExtensions"],[121,52,113,4],[122,0,113,4],[122,10,116,8,"cookie"],[122,16,116,14],[122,19,116,21],[122,24,116,26,"_getCookies"],[122,35,116,21],[122,37,113,4],[123,0,113,4],[123,10,117,8,"tls"],[123,13,117,11],[123,16,117,21],[123,21,117,26,"_dispatcher"],[123,32,117,21],[123,33,117,38,"tls"],[123,36,113,4],[124,0,113,4],[124,10,118,8,"options"],[124,17,118,15],[124,20,118,21],[125,0,118,23,"extensions"],[125,8,118,23,"extensions"],[125,18,118,33],[125,20,118,35,"extensions"],[125,30,118,21],[126,0,118,47,"headers"],[126,8,118,47,"headers"],[126,15,118,54],[126,17,118,56,"headers"],[126,24,118,21],[127,0,118,65,"proxy"],[127,8,118,65,"proxy"],[127,13,118,70],[127,15,118,72],[127,20,118,77,"_proxy"],[127,26,118,21],[128,0,118,85,"tls"],[128,8,118,85,"tls"],[128,11,118,88],[128,13,118,90,"tls"],[129,0,118,21],[129,7,113,4],[131,0,120,4],[131,10,120,8,"cookie"],[131,16,120,14],[131,21,120,19],[131,23,120,4],[131,25,120,23,"options"],[131,32,120,30],[131,33,120,31,"headers"],[131,40,120,23],[131,41,120,39],[131,49,120,23],[131,53,120,51,"cookie"],[131,59,120,23],[133,0,122,4],[133,10,122,8],[134,0,123,6],[134,15,123,13,"ws"],[134,17,123,15],[134,18,123,16,"create"],[134,24,123,13],[134,25,123,23,"url"],[134,28,123,13],[134,30,123,28],[134,32,123,13],[134,34,123,32,"options"],[134,41,123,13],[134,42,123,6],[135,0,124,5],[135,7,122,4],[135,8,124,6],[135,15,124,13,"e"],[135,16,124,6],[135,18,124,16],[135,19,126,5],[136,0,127,3],[137,0,15,40],[137,3,15,28],[137,4,15,22],[137,6,129,4],[138,0,130,2,"PROTOCOLS"],[138,4,130,2,"PROTOCOLS"],[138,13,130,11],[138,15,130,13],[139,0,131,4],[139,15,131,14],[139,20,130,13],[140,0,132,4],[140,16,132,14],[141,0,130,13],[141,5,129,4],[142,0,135,2,"create"],[142,4,135,2,"create"],[142,10,135,8],[142,12,135,10],[142,28,135,19,"dispatcher"],[142,38,135,10],[142,40,135,31,"endpoint"],[142,48,135,10],[142,50,135,41],[143,0,136,4],[143,10,136,8,"sockets"],[143,17,136,15],[143,20,136,18,"dispatcher"],[143,30,136,28],[143,31,136,29,"transports"],[143,41,136,18],[143,42,136,40,"websocket"],[143,51,136,18],[143,54,136,52,"dispatcher"],[143,64,136,62],[143,65,136,63,"transports"],[143,75,136,52],[143,76,136,74,"websocket"],[143,85,136,52],[143,89,136,87],[143,91,136,4],[144,0,137,4,"sockets"],[144,6,137,4,"sockets"],[144,13,137,11],[144,14,137,12,"endpoint"],[144,22,137,20],[144,23,137,21,"href"],[144,27,137,11],[144,28,137,4],[144,31,137,29,"sockets"],[144,38,137,36],[144,39,137,37,"endpoint"],[144,47,137,45],[144,48,137,46,"href"],[144,52,137,36],[144,53,137,29],[144,57,137,55],[144,61,137,59],[144,65,137,55],[144,66,137,64,"dispatcher"],[144,76,137,55],[144,78,137,76,"endpoint"],[144,86,137,55],[144,87,137,4],[145,0,138,4],[145,13,138,11,"sockets"],[145,20,138,18],[145,21,138,19,"endpoint"],[145,29,138,27],[145,30,138,28,"href"],[145,34,138,18],[145,35,138,4],[146,0,139,3],[146,5,129,4],[147,0,141,2,"getSocketUrl"],[147,4,141,2,"getSocketUrl"],[147,16,141,14],[147,18,141,16],[147,40,141,25,"endpoint"],[147,48,141,16],[147,50,141,35],[148,0,142,4,"endpoint"],[148,6,142,4,"endpoint"],[148,14,142,12],[148,17,142,15,"copyObject"],[148,27,142,25],[148,28,142,26,"endpoint"],[148,36,142,25],[148,37,142,4],[149,0,143,4,"endpoint"],[149,6,143,4,"endpoint"],[149,14,143,12],[149,15,143,13,"protocol"],[149,23,143,4],[149,26,143,24],[149,31,143,29,"PROTOCOLS"],[149,40,143,24],[149,41,143,39,"endpoint"],[149,49,143,47],[149,50,143,48,"protocol"],[149,58,143,24],[149,59,143,4],[150,0,144,4],[150,13,144,11,"URI"],[150,16,144,14],[150,17,144,15,"stringify"],[150,26,144,11],[150,27,144,25,"endpoint"],[150,35,144,11],[150,36,144,4],[151,0,145,3],[151,5,129,4],[152,0,147,2,"isUsable"],[152,4,147,2,"isUsable"],[152,12,147,10],[152,14,147,12],[152,32,147,21,"dispatcher"],[152,42,147,12],[152,44,147,33,"endpoint"],[152,52,147,12],[152,54,147,43,"callback"],[152,62,147,12],[152,64,147,53,"context"],[152,71,147,12],[152,73,147,62],[153,0,148,4],[153,11,148,9,"create"],[153,17,148,4],[153,18,148,16,"dispatcher"],[153,28,148,4],[153,30,148,28,"endpoint"],[153,38,148,4],[153,40,148,38,"isUsable"],[153,48,148,4],[153,49,148,47,"callback"],[153,57,148,4],[153,59,148,57,"context"],[153,66,148,4],[154,0,149,3],[155,0,129,4],[155,3,15,22],[155,4,15,0],[156,0,152,0,"assign"],[156,2,152,0,"assign"],[156,8,152,6],[156,9,152,7,"WebSocket"],[156,18,152,16],[156,19,152,17,"prototype"],[156,28,152,6],[156,30,152,28,"Deferrable"],[156,40,152,6],[156,41,152,0],[158,0,154,0],[158,6,154,4,"browser"],[158,13,154,11],[158,14,154,12,"Event"],[158,19,154,4],[158,23,154,21,"global"],[158,29,154,27],[158,30,154,28,"onbeforeunload"],[158,44,154,21],[158,49,154,47,"undefined"],[158,58,154,0],[158,60,154,58],[159,0,155,2,"browser"],[159,4,155,2,"browser"],[159,11,155,9],[159,12,155,10,"Event"],[159,17,155,2],[159,18,155,16,"on"],[159,20,155,2],[159,21,155,19,"global"],[159,27,155,2],[159,29,155,27],[159,43,155,2],[159,45,155,43],[159,57,155,54],[160,0,156,4],[160,10,156,8,"WebSocket"],[160,19,156,17],[160,20,156,18,"_unloaded"],[160,29,156,8],[160,34,156,32,"undefined"],[160,43,156,4],[160,45,157,6,"WebSocket"],[160,54,157,15],[160,55,157,16,"_unloaded"],[160,64,157,6],[160,67,157,28],[160,71,157,6],[161,0,158,3],[161,5,155,2],[162,0,159,1],[164,0,161,0,"module"],[164,2,161,0,"module"],[164,8,161,6],[164,9,161,7,"exports"],[164,16,161,0],[164,19,161,17,"WebSocket"],[164,28,161,0]],"functionMap":{"names":["<global>","Class$argument_1.isUsable","callback$argument_0","errback$argument_0","Class$argument_1.request","Promise$argument_0","self.callback$argument_0","abort","promise.then$argument_0","Class$argument_1.connect","socket.onopen","socket.onerror","socket.onmessage","Class$argument_1.close","Class$argument_1._createSocket","assign$argument_1.create","assign$argument_1.getSocketUrl","assign$argument_1.isUsable","browser.Event.on$argument_2"],"mappings":"AAA;YCqB;kBCC,2CD;iBEC,4CF;GDE;WIE;8BCM;oBCC;ODI;KDG;aGG,0BC,2BD,GH;GJE;WSE;oBCY;KDM;sCEG;KFmB;uBGE;KHa;GTC;SaE;GbG;iBcE;Gde;UeQ;GfI;gBgBE;GhBI;YiBE;GjBE;2CkBM;GlBG"}},"type":"js/module"}]}