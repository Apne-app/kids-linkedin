{"dependencies":[{"name":"../util/class","data":{"isAsync":false,"locs":[{"start":{"line":3,"column":16},"end":{"line":3,"column":40}}]}},{"name":"../util/set","data":{"isAsync":false,"locs":[{"start":{"line":4,"column":16},"end":{"line":4,"column":38}}]}},{"name":"../util/uri","data":{"isAsync":false,"locs":[{"start":{"line":5,"column":16},"end":{"line":5,"column":38}}]}},{"name":"../util/assign","data":{"isAsync":false,"locs":[{"start":{"line":6,"column":16},"end":{"line":6,"column":41}}]}},{"name":"../util/to_json","data":{"isAsync":false,"locs":[{"start":{"line":7,"column":16},"end":{"line":7,"column":42}}]}},{"name":"./transport","data":{"isAsync":false,"locs":[{"start":{"line":8,"column":16},"end":{"line":8,"column":38}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),c=s(n(r(d[5]),{encode:function(n){return'message='+encodeURIComponent(u(n))},request:function(n){var t,o=g.XDomainRequest?XDomainRequest:XMLHttpRequest,s=new o,u=++c._id,l=this._dispatcher.headers,p=this;if(s.open('POST',this.endpoint.href,!0),s.withCredentials=!0,s.setRequestHeader)for(t in s.setRequestHeader('Pragma','no-cache'),l)l.hasOwnProperty(t)&&s.setRequestHeader(t,l[t]);var f=function(){if(!s)return!1;c._pending.remove(u),s.onload=s.onerror=s.ontimeout=s.onprogress=null,s=null};return s.onload=function(){var t;try{t=JSON.parse(s.responseText)}catch(n){}f(),t?p._receive(t):p._handleError(n)},s.onerror=s.ontimeout=function(){f(),p._handleError(n)},s.onprogress=function(){},o===g.XDomainRequest&&c._pending.add({id:u,xhr:s}),s.send(this.encode(n)),s}}),{_id:0,_pending:new t,isUsable:function(n,t,s,u){if(o.isSameOrigin(t))return s.call(u,!1);if(g.XDomainRequest)return s.call(u,t.protocol===location.protocol);if(g.XMLHttpRequest){var c=new XMLHttpRequest;return s.call(u,void 0!==c.withCredentials)}return s.call(u,!1)}});m.exports=c});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0],[1,45,3,4,"Class"],[1,47,3,16,"require"],[1,49,3,23,"d"],[1,51,3,23],[1,55,4,4,"Set"],[1,57,4,16,"require"],[1,59,4,23,"d"],[1,61,4,23],[1,65,5,4,"URI"],[1,67,5,16,"require"],[1,69,5,23,"d"],[1,71,5,23],[1,75,6,4,"assign"],[1,77,6,16,"require"],[1,79,6,23,"d"],[1,81,6,23],[1,85,7,4,"toJSON"],[1,87,7,16,"require"],[1,89,7,23,"d"],[1,91,7,23],[1,95,10,4,"CORS"],[1,97,10,11,"assign"],[1,99,10,18,"Class"],[1,101,8,16,"require"],[1,103,8,23,"d"],[1,105,8,23],[1,110,11,2,"encode"],[1,117,11,10],[1,126,11,19,"messages"],[1,129,12,4],[1,135,12,11],[1,146,12,24,"encodeURIComponent"],[1,165,12,43,"toJSON"],[1,167,12,50,"messages"],[1,172,15,2,"request"],[1,180,15,11],[1,189,15,20,"messages"],[1,192,16,4],[1,196,21,8,"key"],[1,198,16,8,"xhrClass"],[1,200,16,19,"global"],[1,202,16,26,"XDomainRequest"],[1,217,16,43,"XDomainRequest"],[1,232,16,60,"XMLHttpRequest"],[1,247,17,8,"xhr"],[1,249,17,19],[1,253,17,23,"xhrClass"],[1,255,18,8,"id"],[1,259,18,21,"CORS"],[1,261,18,26,"_id"],[1,265,19,8,"headers"],[1,267,19,19,"this"],[1,272,19,24,"_dispatcher"],[1,284,19,36,"headers"],[1,292,20,8,"self"],[1,294,20,19,"this"],[1,299,26,4],[1,302,23,4,"xhr"],[1,304,23,8,"open"],[1,309,23,13],[1,316,23,21,"this"],[1,321,23,26,"endpoint"],[1,330,23,35,"href"],[1,336,23,41],[1,339,24,4,"xhr"],[1,341,24,8,"withCredentials"],[1,358,24,26],[1,360,26,8,"xhr"],[1,362,26,12,"setRequestHeader"],[1,379,28,6],[1,383,28,11,"key"],[1,388,27,6,"xhr"],[1,390,27,10,"setRequestHeader"],[1,407,27,27],[1,416,27,37],[1,428,28,18,"headers"],[1,430,29,13,"headers"],[1,432,29,21,"hasOwnProperty"],[1,447,29,36,"key"],[1,451,30,8,"xhr"],[1,453,30,12,"setRequestHeader"],[1,470,30,29,"key"],[1,472,30,34,"headers"],[1,474,30,42,"key"],[1,478,34,4],[1,482,34,8,"cleanUp"],[1,484,34,18],[1,495,35,6],[1,499,35,11,"xhr"],[1,501,35,16],[1,508,35,23],[1,510,36,6,"CORS"],[1,512,36,11,"_pending"],[1,521,36,20,"remove"],[1,528,36,27,"id"],[1,531,37,6,"xhr"],[1,533,37,10,"onload"],[1,540,37,19,"xhr"],[1,542,37,23,"onerror"],[1,550,37,33,"xhr"],[1,552,37,37,"ontimeout"],[1,562,37,49,"xhr"],[1,564,37,53,"onprogress"],[1,575,37,66],[1,580,38,6,"xhr"],[1,582,38,12],[1,588,64,4],[1,595,41,4,"xhr"],[1,597,41,8,"onload"],[1,604,41,17],[1,615,42,6],[1,619,42,10,"replies"],[1,621,43,6],[1,625,43,12,"replies"],[1,627,43,22,"JSON"],[1,632,43,27,"parse"],[1,638,43,33,"xhr"],[1,640,43,37,"responseText"],[1,654,43,53],[1,660,43,60,"error"],[1,664,45,6,"cleanUp"],[1,668,47,10,"replies"],[1,670,48,8,"self"],[1,672,48,13,"_receive"],[1,681,48,22,"replies"],[1,684,50,8,"self"],[1,686,50,13,"_handleError"],[1,699,50,26,"messages"],[1,703,53,4,"xhr"],[1,705,53,8,"onerror"],[1,713,53,18,"xhr"],[1,715,53,22,"ontimeout"],[1,725,53,34],[1,736,54,6,"cleanUp"],[1,740,55,6,"self"],[1,742,55,11,"_handleError"],[1,755,55,24,"messages"],[1,759,58,4,"xhr"],[1,761,58,8,"onprogress"],[1,772,58,21],[1,785,60,8,"xhrClass"],[1,789,60,21,"global"],[1,791,60,28,"XDomainRequest"],[1,807,61,6,"CORS"],[1,809,61,11,"_pending"],[1,818,61,20,"add"],[1,823,61,26,"id"],[1,826,61,30,"id"],[1,828,61,34,"xhr"],[1,832,61,39,"xhr"],[1,836,63,4,"xhr"],[1,838,63,8,"send"],[1,843,63,13,"this"],[1,848,63,18,"encode"],[1,855,63,25,"messages"],[1,859,64,11,"xhr"],[1,865,67,2,"_id"],[1,869,67,12],[1,871,68,2,"_pending"],[1,880,68,12],[1,884,68,16,"Set"],[1,886,70,2,"isUsable"],[1,895,70,12],[1,904,70,21,"dispatcher"],[1,906,70,33,"endpoint"],[1,908,70,43,"callback"],[1,910,70,53,"context"],[1,913,71,4],[1,916,71,8,"URI"],[1,918,71,12,"isSameOrigin"],[1,931,71,25,"endpoint"],[1,934,72,6],[1,941,72,13,"callback"],[1,943,72,22,"call"],[1,948,72,27,"context"],[1,951,72,36],[1,954,74,4],[1,957,74,8,"global"],[1,959,74,15,"XDomainRequest"],[1,974,75,6],[1,981,75,13,"callback"],[1,983,75,22,"call"],[1,988,75,27,"context"],[1,990,75,36,"endpoint"],[1,992,75,45,"protocol"],[1,1003,75,58,"location"],[1,1012,75,67,"protocol"],[1,1022,77,4],[1,1025,77,8,"global"],[1,1027,77,15,"XMLHttpRequest"],[1,1042,77,31],[1,1043,78,6],[1,1047,78,10,"xhr"],[1,1049,78,16],[1,1053,78,20,"XMLHttpRequest"],[1,1068,79,6],[1,1075,79,13,"callback"],[1,1077,79,22,"call"],[1,1082,79,27,"context"],[1,1089,79,60,"undefined"],[1,1093,79,36,"xhr"],[1,1095,79,40,"withCredentials"],[1,1112,81,4],[1,1119,81,11,"callback"],[1,1121,81,20,"call"],[1,1126,81,25,"context"],[1,1129,81,34],[1,1135,85,0,"module"],[1,1137,85,7,"exports"],[1,1145,85,17,"CORS"]],"functionMap":{"names":["<global>","Class$argument_1.encode","Class$argument_1.request","cleanUp","xhr.onload","xhr.ontimeout","xhr.onprogress","assign$argument_1.isUsable"],"mappings":"AAA;UCU;GDE;WEE;kBCmB;KDK;iBEE;KFU;kCGE;KHG;qBIE,aJ;GFO;YOK;GPY"}},"type":"js/module"}]}