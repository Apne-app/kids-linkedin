{"dependencies":[{"name":"../util/assign","data":{"isAsync":false,"locs":[{"start":{"line":3,"column":14},"end":{"line":3,"column":39}}]}},{"name":"../mixins/logging","data":{"isAsync":false,"locs":[{"start":{"line":4,"column":14},"end":{"line":4,"column":42}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var assign = _$$_REQUIRE(_dependencyMap[0], \"../util/assign\"),\n      Logging = _$$_REQUIRE(_dependencyMap[1], \"../mixins/logging\");\n\n  var Extensible = {\n    addExtension: function addExtension(extension) {\n      this._extensions = this._extensions || [];\n\n      this._extensions.push(extension);\n\n      if (extension.added) extension.added(this);\n    },\n    removeExtension: function removeExtension(extension) {\n      if (!this._extensions) return;\n      var i = this._extensions.length;\n\n      while (i--) {\n        if (this._extensions[i] !== extension) continue;\n\n        this._extensions.splice(i, 1);\n\n        if (extension.removed) extension.removed(this);\n      }\n    },\n    pipeThroughExtensions: function pipeThroughExtensions(stage, message, request, callback, context) {\n      this.debug('Passing through ? extensions: ?', stage, message);\n      if (!this._extensions) return callback.call(context, message);\n\n      var extensions = this._extensions.slice();\n\n      var pipe = function pipe(message) {\n        if (!message) return callback.call(context, message);\n        var extension = extensions.shift();\n        if (!extension) return callback.call(context, message);\n        var fn = extension[stage];\n        if (!fn) return pipe(message);\n        if (fn.length >= 3) extension[stage](message, request, pipe);else extension[stage](message, pipe);\n      };\n\n      pipe(message);\n    }\n  };\n  assign(Extensible, Logging);\n  module.exports = Extensible;\n});","lineCount":47,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"assign"],[4,12,3,10],[4,15,3,14,"require"],[4,26,3,21],[4,63,3,0],[5,0,3,0],[5,6,4,4,"Logging"],[5,13,4,11],[5,16,4,14,"require"],[5,27,4,21],[5,67,3,0],[7,0,6,0],[7,6,6,4,"Extensible"],[7,16,6,14],[7,19,6,17],[8,0,7,2,"addExtension"],[8,4,7,2,"addExtension"],[8,16,7,14],[8,18,7,16],[8,40,7,25,"extension"],[8,49,7,16],[8,51,7,36],[9,0,8,4],[9,11,8,9,"_extensions"],[9,22,8,4],[9,25,8,23],[9,30,8,28,"_extensions"],[9,41,8,23],[9,45,8,43],[9,47,8,4],[11,0,9,4],[11,11,9,9,"_extensions"],[11,22,9,4],[11,23,9,21,"push"],[11,27,9,4],[11,28,9,26,"extension"],[11,37,9,4],[13,0,10,4],[13,10,10,8,"extension"],[13,19,10,17],[13,20,10,18,"added"],[13,25,10,4],[13,27,10,25,"extension"],[13,36,10,34],[13,37,10,35,"added"],[13,42,10,25],[13,43,10,41],[13,47,10,25],[14,0,11,3],[14,5,6,17],[15,0,13,2,"removeExtension"],[15,4,13,2,"removeExtension"],[15,19,13,17],[15,21,13,19],[15,46,13,28,"extension"],[15,55,13,19],[15,57,13,39],[16,0,14,4],[16,10,14,8],[16,11,14,9],[16,16,14,14,"_extensions"],[16,27,14,4],[16,29,14,27],[17,0,15,4],[17,10,15,8,"i"],[17,11,15,9],[17,14,15,12],[17,19,15,17,"_extensions"],[17,30,15,12],[17,31,15,29,"length"],[17,37,15,4],[19,0,16,4],[19,13,16,11,"i"],[19,14,16,12],[19,16,16,4],[19,18,16,16],[20,0,17,6],[20,12,17,10],[20,17,17,15,"_extensions"],[20,28,17,10],[20,29,17,27,"i"],[20,30,17,10],[20,36,17,34,"extension"],[20,45,17,6],[20,47,17,45],[22,0,18,6],[22,13,18,11,"_extensions"],[22,24,18,6],[22,25,18,23,"splice"],[22,31,18,6],[22,32,18,30,"i"],[22,33,18,6],[22,35,18,32],[22,36,18,6],[24,0,19,6],[24,12,19,10,"extension"],[24,21,19,19],[24,22,19,20,"removed"],[24,29,19,6],[24,31,19,29,"extension"],[24,40,19,38],[24,41,19,39,"removed"],[24,48,19,29],[24,49,19,47],[24,53,19,29],[25,0,20,5],[26,0,21,3],[26,5,6,17],[27,0,23,2,"pipeThroughExtensions"],[27,4,23,2,"pipeThroughExtensions"],[27,25,23,23],[27,27,23,25],[27,58,23,34,"stage"],[27,63,23,25],[27,65,23,41,"message"],[27,72,23,25],[27,74,23,50,"request"],[27,81,23,25],[27,83,23,59,"callback"],[27,91,23,25],[27,93,23,69,"context"],[27,100,23,25],[27,102,23,78],[28,0,24,4],[28,11,24,9,"debug"],[28,16,24,4],[28,17,24,15],[28,50,24,4],[28,52,24,50,"stage"],[28,57,24,4],[28,59,24,57,"message"],[28,66,24,4],[29,0,26,4],[29,10,26,8],[29,11,26,9],[29,16,26,14,"_extensions"],[29,27,26,4],[29,29,26,27],[29,36,26,34,"callback"],[29,44,26,42],[29,45,26,43,"call"],[29,49,26,34],[29,50,26,48,"context"],[29,57,26,34],[29,59,26,57,"message"],[29,66,26,34],[29,67,26,27],[31,0,27,4],[31,10,27,8,"extensions"],[31,20,27,18],[31,23,27,21],[31,28,27,26,"_extensions"],[31,39,27,21],[31,40,27,38,"slice"],[31,45,27,21],[31,47,27,4],[33,0,29,4],[33,10,29,8,"pipe"],[33,14,29,12],[33,17,29,15],[33,26,29,8,"pipe"],[33,30,29,15],[33,31,29,24,"message"],[33,38,29,15],[33,40,29,33],[34,0,30,6],[34,12,30,10],[34,13,30,11,"message"],[34,20,30,6],[34,22,30,20],[34,29,30,27,"callback"],[34,37,30,35],[34,38,30,36,"call"],[34,42,30,27],[34,43,30,41,"context"],[34,50,30,27],[34,52,30,50,"message"],[34,59,30,27],[34,60,30,20],[35,0,32,6],[35,12,32,10,"extension"],[35,21,32,19],[35,24,32,22,"extensions"],[35,34,32,32],[35,35,32,33,"shift"],[35,40,32,22],[35,42,32,6],[36,0,33,6],[36,12,33,10],[36,13,33,11,"extension"],[36,22,33,6],[36,24,33,22],[36,31,33,29,"callback"],[36,39,33,37],[36,40,33,38,"call"],[36,44,33,29],[36,45,33,43,"context"],[36,52,33,29],[36,54,33,52,"message"],[36,61,33,29],[36,62,33,22],[37,0,35,6],[37,12,35,10,"fn"],[37,14,35,12],[37,17,35,15,"extension"],[37,26,35,24],[37,27,35,25,"stage"],[37,32,35,24],[37,33,35,6],[38,0,36,6],[38,12,36,10],[38,13,36,11,"fn"],[38,15,36,6],[38,17,36,15],[38,24,36,22,"pipe"],[38,28,36,26],[38,29,36,27,"message"],[38,36,36,26],[38,37,36,15],[39,0,38,6],[39,12,38,10,"fn"],[39,14,38,12],[39,15,38,13,"length"],[39,21,38,10],[39,25,38,23],[39,26,38,6],[39,28,38,26,"extension"],[39,37,38,35],[39,38,38,36,"stage"],[39,43,38,35],[39,44,38,26],[39,45,38,43,"message"],[39,52,38,26],[39,54,38,52,"request"],[39,61,38,26],[39,63,38,61,"pipe"],[39,67,38,26],[39,69,38,6],[39,74,39,26,"extension"],[39,83,39,35],[39,84,39,36,"stage"],[39,89,39,35],[39,90,39,26],[39,91,39,43,"message"],[39,98,39,26],[39,100,39,52,"pipe"],[39,104,39,26],[40,0,40,5],[40,7,29,4],[42,0,41,4,"pipe"],[42,6,41,4,"pipe"],[42,10,41,8],[42,11,41,9,"message"],[42,18,41,8],[42,19,41,4],[43,0,42,3],[44,0,6,17],[44,3,6,0],[45,0,45,0,"assign"],[45,2,45,0,"assign"],[45,8,45,6],[45,9,45,7,"Extensible"],[45,19,45,6],[45,21,45,19,"Logging"],[45,28,45,6],[45,29,45,0],[46,0,47,0,"module"],[46,2,47,0,"module"],[46,8,47,6],[46,9,47,7,"exports"],[46,16,47,0],[46,19,47,17,"Extensible"],[46,29,47,0]],"functionMap":{"names":["<global>","Extensible.addExtension","Extensible.removeExtension","Extensible.pipeThroughExtensions","pipe"],"mappings":"AAA;gBCM;GDI;mBEE;GFQ;yBGE;eCM;KDW;GHE"}},"type":"js/module"}]}