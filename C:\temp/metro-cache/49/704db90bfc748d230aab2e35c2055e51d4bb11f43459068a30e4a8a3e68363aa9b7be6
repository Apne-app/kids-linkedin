{"dependencies":[{"name":"./globals","data":{"isAsync":false,"locs":[{"start":{"line":4,"column":16},"end":{"line":4,"column":36}}]}},{"name":"./constants","data":{"isAsync":false,"locs":[{"start":{"line":5,"column":18},"end":{"line":5,"column":40}}]}},{"name":"./manage-subscribers","data":{"isAsync":false,"locs":[{"start":{"line":6,"column":27},"end":{"line":6,"column":58}}]}},{"name":"./socket-io","data":{"isAsync":false,"locs":[{"start":{"line":7,"column":18},"end":{"line":7,"column":40}}]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.attachSharedListeners=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]),s=function(n,t){n.onmessage=function(n){o.getSubscribers(t).forEach(function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(n),'function'==typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(n)||t.setLastMessage(n)})}},u=function(n,c){n.onopen=function(n){o.getSubscribers(c).forEach(function(o){o.reconnectCount.current=0,o.optionsRef.current.onOpen&&o.optionsRef.current.onOpen(n),o.setReadyState(t.ReadyState.OPEN)})}},f=function(c,s){c.onclose=function(c){o.getSubscribers(s).forEach(function(n){n.optionsRef.current.onClose&&n.optionsRef.current.onClose(c),n.setReadyState(t.ReadyState.CLOSED)}),delete n.sharedWebSockets[s],o.getSubscribers(s).forEach(function(n){var o,s;if(n.optionsRef.current.shouldReconnect&&n.optionsRef.current.shouldReconnect(c)){var u=null!==(o=n.optionsRef.current.reconnectAttempts)&&void 0!==o?o:t.DEFAULT_RECONNECT_LIMIT;n.reconnectCount.current<u?setTimeout(function(){n.reconnectCount.current++,n.reconnect.current()},null!==(s=n.optionsRef.current.reconnectInterval)&&void 0!==s?s:t.DEFAULT_RECONNECT_INTERVAL_MS):(n.optionsRef.current.onReconnectStop&&n.optionsRef.current.onReconnectStop(n.optionsRef.current.reconnectAttempts),console.warn(\"Max reconnect attempts of \"+u+\" exceeded\"))}})}},p=function(n,t){n.onerror=function(n){o.getSubscribers(t).forEach(function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(n)})}};e.attachSharedListeners=function(n,t,o,R){var l;return o.current.fromSocketIO&&(l=c.setUpSocketIOPing(R)),s(n,t),f(n,t),u(n,t),p(n,t),function(){l&&clearInterval(l)}}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"attachSharedListeners"],[1,119,3,0,"undefined"],[1,121,4,0],[1,125,4,4,"globals_1"],[1,127,4,16,"require"],[1,129,4,23,"d"],[1,131,4,23],[1,135,5,4,"constants_1"],[1,137,5,18,"require"],[1,139,5,25,"d"],[1,141,5,25],[1,145,6,4,"manage_subscribers_1"],[1,147,6,27,"require"],[1,149,6,34,"d"],[1,151,6,34],[1,155,7,4,"socket_io_1"],[1,157,7,18,"require"],[1,159,7,25,"d"],[1,161,7,25],[1,165,8,4,"bindMessageHandler"],[1,167,8,25],[1,176,8,35,"webSocketInstance"],[1,178,8,54,"url"],[1,181,9,4,"webSocketInstance"],[1,183,9,22,"onmessage"],[1,193,9,34],[1,202,9,44,"message"],[1,205,10,8,"manage_subscribers_1"],[1,207,10,29,"getSubscribers"],[1,222,10,44,"url"],[1,225,10,49,"forEach"],[1,233,10,57],[1,242,10,67,"subscriber"],[1,245,11,16,"subscriber"],[1,247,11,27,"optionsRef"],[1,258,11,38,"current"],[1,266,11,46,"onMessage"],[1,277,12,16,"subscriber"],[1,279,12,27,"optionsRef"],[1,290,12,38,"current"],[1,298,12,46,"onMessage"],[1,308,12,56,"message"],[1,311,14,64],[1,330,14,23,"subscriber"],[1,332,14,34,"optionsRef"],[1,343,14,45,"current"],[1,351,14,53,"filter"],[1,360,15,66],[1,364,15,16,"subscriber"],[1,366,15,27,"optionsRef"],[1,377,15,38,"current"],[1,385,15,46,"filter"],[1,392,15,53,"message"],[1,396,18,12,"subscriber"],[1,398,18,23,"setLastMessage"],[1,413,18,38,"message"],[1,420,22,4,"bindOpenHandler"],[1,422,22,22],[1,431,22,32,"webSocketInstance"],[1,433,22,51,"url"],[1,436,23,4,"webSocketInstance"],[1,438,23,22,"onopen"],[1,445,23,31],[1,454,23,41,"event"],[1,457,24,8,"manage_subscribers_1"],[1,459,24,29,"getSubscribers"],[1,474,24,44,"url"],[1,477,24,49,"forEach"],[1,485,24,57],[1,494,24,67,"subscriber"],[1,497,25,12,"subscriber"],[1,499,25,23,"reconnectCount"],[1,514,25,38,"current"],[1,522,25,48],[1,524,26,16,"subscriber"],[1,526,26,27,"optionsRef"],[1,537,26,38,"current"],[1,545,26,46,"onOpen"],[1,553,27,16,"subscriber"],[1,555,27,27,"optionsRef"],[1,566,27,38,"current"],[1,574,27,46,"onOpen"],[1,581,27,53,"event"],[1,584,29,12,"subscriber"],[1,586,29,23,"setReadyState"],[1,600,29,37,"constants_1"],[1,602,29,49,"ReadyState"],[1,613,29,60,"OPEN"],[1,623,33,4,"bindCloseHandler"],[1,625,33,23],[1,634,33,33,"webSocketInstance"],[1,636,33,52,"url"],[1,639,34,4,"webSocketInstance"],[1,641,34,22,"onclose"],[1,649,34,32],[1,658,34,42,"event"],[1,661,35,8,"manage_subscribers_1"],[1,663,35,29,"getSubscribers"],[1,678,35,44,"url"],[1,681,35,49,"forEach"],[1,689,35,57],[1,698,35,67,"subscriber"],[1,701,36,16,"subscriber"],[1,703,36,27,"optionsRef"],[1,714,36,38,"current"],[1,722,36,46,"onClose"],[1,731,37,16,"subscriber"],[1,733,37,27,"optionsRef"],[1,744,37,38,"current"],[1,752,37,46,"onClose"],[1,760,37,54,"event"],[1,763,39,12,"subscriber"],[1,765,39,23,"setReadyState"],[1,779,39,37,"constants_1"],[1,781,39,49,"ReadyState"],[1,792,39,60,"CLOSED"],[1,809,41,15,"globals_1"],[1,811,41,25,"sharedWebSockets"],[1,828,41,42,"url"],[1,831,42,8,"manage_subscribers_1"],[1,833,42,29,"getSubscribers"],[1,848,42,44,"url"],[1,851,42,49,"forEach"],[1,859,42,57],[1,868,42,67,"subscriber"],[1,871,43,12],[1,875,43,16,"_a"],[1,877,43,20,"_b"],[1,879,44,12],[1,882,44,16,"subscriber"],[1,884,44,27,"optionsRef"],[1,895,44,38,"current"],[1,903,44,46,"shouldReconnect"],[1,920,45,16,"subscriber"],[1,922,45,27,"optionsRef"],[1,933,45,38,"current"],[1,941,45,46,"shouldReconnect"],[1,957,45,62,"event"],[1,960,45,70],[1,961,46,16],[1,965,46,20,"reconnectAttempts"],[1,967,46,99],[1,975,46,41,"_a"],[1,977,46,46,"subscriber"],[1,979,46,57,"optionsRef"],[1,990,46,68,"current"],[1,998,46,76,"reconnectAttempts"],[1,1023,46,109,"undefined"],[1,1027,46,107,"_a"],[1,1029,46,123,"_a"],[1,1031,46,128,"constants_1"],[1,1033,46,140,"DEFAULT_RECONNECT_LIMIT"],[1,1057,47,20,"subscriber"],[1,1059,47,31,"reconnectCount"],[1,1074,47,46,"current"],[1,1082,47,56,"reconnectAttempts"],[1,1084,48,20,"setTimeout"],[1,1095,48,31],[1,1106,49,24,"subscriber"],[1,1108,49,35,"reconnectCount"],[1,1123,49,50,"current"],[1,1133,50,24,"subscriber"],[1,1135,50,35,"reconnect"],[1,1145,50,45,"current"],[1,1156,51,82],[1,1164,51,24,"_b"],[1,1166,51,29,"subscriber"],[1,1168,51,40,"optionsRef"],[1,1179,51,51,"current"],[1,1187,51,59,"reconnectInterval"],[1,1212,51,92,"undefined"],[1,1216,51,90,"_b"],[1,1218,51,106,"_b"],[1,1220,51,111,"constants_1"],[1,1222,51,123,"DEFAULT_RECONNECT_INTERVAL_MS"],[1,1254,54,20,"subscriber"],[1,1256,54,31,"optionsRef"],[1,1267,54,42,"current"],[1,1275,54,50,"onReconnectStop"],[1,1292,54,69,"subscriber"],[1,1294,54,80,"optionsRef"],[1,1305,54,91,"current"],[1,1313,54,99,"onReconnectStop"],[1,1329,54,115,"subscriber"],[1,1331,54,126,"optionsRef"],[1,1342,54,137,"current"],[1,1350,54,145,"reconnectAttempts"],[1,1369,55,20,"console"],[1,1377,55,28,"warn"],[1,1382,55,33],[1,1411,55,64,"reconnectAttempts"],[1,1413,55,84],[1,1432,61,4,"bindErrorHandler"],[1,1434,61,23],[1,1443,61,33,"webSocketInstance"],[1,1445,61,52,"url"],[1,1448,62,4,"webSocketInstance"],[1,1450,62,22,"onerror"],[1,1458,62,32],[1,1467,62,42,"error"],[1,1470,63,8,"manage_subscribers_1"],[1,1472,63,29,"getSubscribers"],[1,1487,63,44,"url"],[1,1490,63,49,"forEach"],[1,1498,63,57],[1,1507,63,67,"subscriber"],[1,1510,64,16,"subscriber"],[1,1512,64,27,"optionsRef"],[1,1523,64,38,"current"],[1,1531,64,46,"onError"],[1,1540,65,16,"subscriber"],[1,1542,65,27,"optionsRef"],[1,1553,65,38,"current"],[1,1561,65,46,"onError"],[1,1569,65,54,"error"],[1,1576,70,0,"exports"],[1,1578,70,8,"attachSharedListeners"],[1,1600,70,32],[1,1609,70,42,"webSocketInstance"],[1,1611,70,61,"url"],[1,1613,70,66,"optionsRef"],[1,1615,70,78,"sendMessage"],[1,1618,71,4],[1,1622,71,8,"interval"],[1,1624,79,4],[1,1631,72,8,"optionsRef"],[1,1633,72,19,"current"],[1,1641,72,27,"fromSocketIO"],[1,1656,73,8,"interval"],[1,1658,73,19,"socket_io_1"],[1,1660,73,31,"setUpSocketIOPing"],[1,1678,73,49,"sendMessage"],[1,1682,75,4,"bindMessageHandler"],[1,1684,75,23,"webSocketInstance"],[1,1686,75,42,"url"],[1,1689,76,4,"bindCloseHandler"],[1,1691,76,21,"webSocketInstance"],[1,1693,76,40,"url"],[1,1696,77,4,"bindOpenHandler"],[1,1698,77,20,"webSocketInstance"],[1,1700,77,39,"url"],[1,1703,78,4,"bindErrorHandler"],[1,1705,78,21,"webSocketInstance"],[1,1707,78,40,"url"],[1,1710,79,11],[1,1721,80,12,"interval"],[1,1724,81,12,"clearInterval"],[1,1738,81,26,"interval"]],"functionMap":{"names":["<global>","bindMessageHandler","webSocketInstance.onmessage","manage_subscribers_1.getSubscribers.forEach$argument_0","bindOpenHandler","webSocketInstance.onopen","bindCloseHandler","webSocketInstance.onclose","setTimeout$argument_0","bindErrorHandler","webSocketInstance.onerror","exports.attachSharedListeners","<anonymous>"],"mappings":"AAA;yBCO;kCCC;yDCC;SDS;KDC;CDC;sBIC;+BCC;yDFC;SEM;KDC;CJC;uBMC;gCCC;yDJC;SIK;yDJE;+BKM;qBLG;SIO;KDC;CNC;uBSC;gCCC;yDPC;SOI;KDC;CTC;gCWC;WCS;KDG;CXC"}},"type":"js/module"}]}