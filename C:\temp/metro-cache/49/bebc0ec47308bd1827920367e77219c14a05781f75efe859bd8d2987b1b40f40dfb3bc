{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false,"locs":[{"start":{"line":3,"column":29},"end":{"line":3,"column":84}}]}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false,"locs":[{"start":{"line":10,"column":45},"end":{"line":10,"column":92}}]}},{"name":"@babel/runtime/helpers/typeof","data":{"isAsync":false,"locs":[{"start":{"line":12,"column":38},"end":{"line":12,"column":78}}]}},{"name":"form-data","data":{"isAsync":false,"locs":[{"start":{"line":14,"column":39},"end":{"line":14,"column":59}}]}},{"name":"./errors","data":{"isAsync":false,"locs":[{"start":{"line":16,"column":14},"end":{"line":16,"column":33}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var _typeof2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/typeof\"));\n\n  var _formData = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"form-data\"));\n\n  var _errors = _$$_REQUIRE(_dependencyMap[4], \"./errors\");\n\n  var validFeedSlugRe = /^[\\w]+$/;\n  var validUserIdRe = /^[\\w-]+$/;\n\n  function validateFeedSlug(feedSlug) {\n    if (!validFeedSlugRe.test(feedSlug)) {\n      throw new _errors.FeedError(\"Invalid feedSlug, please use letters, numbers or _: \".concat(feedSlug));\n    }\n\n    return feedSlug;\n  }\n\n  function validateUserId(userId) {\n    if (!validUserIdRe.test(userId)) {\n      throw new _errors.FeedError(\"Invalid userId, please use letters, numbers, - or _: \".concat(userId));\n    }\n\n    return userId;\n  }\n\n  function rfc3986(str) {\n    return str.replace(/[!'()*]/g, function (c) {\n      return \"%\".concat(c.charCodeAt(0).toString(16).toUpperCase());\n    });\n  }\n\n  function isReadableStream(obj) {\n    return obj !== null && (0, _typeof2.default)(obj) === 'object' && (obj.readable || typeof obj._read === 'function');\n  }\n\n  function isBuffer(obj) {\n    return obj != null && obj.constructor != null && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);\n  }\n\n  function isFileWebAPI(uri) {\n    return typeof window !== 'undefined' && 'File' in window && uri instanceof File;\n  }\n\n  function validateFeedId(feedId) {\n    var parts = feedId.split(':');\n\n    if (parts.length !== 2) {\n      throw new _errors.FeedError(\"Invalid feedId, expected something like user:1 got \".concat(feedId));\n    }\n\n    var _parts = (0, _slicedToArray2.default)(parts, 2),\n        feedSlug = _parts[0],\n        userId = _parts[1];\n\n    validateFeedSlug(feedSlug);\n    validateUserId(userId);\n    return feedId;\n  }\n\n  function addFileToFormData(uri, name, contentType) {\n    var data = new _formData.default();\n\n    if (isReadableStream(uri) || isBuffer(uri) || isFileWebAPI(uri)) {\n      if (name) data.append('file', uri, name);else data.append('file', uri);\n    } else {\n      data.append('file', {\n        uri: uri,\n        name: name || uri.split('/').reverse()[0],\n        type: contentType || undefined,\n        contentType: contentType || undefined\n      });\n    }\n\n    return data;\n  }\n\n  function replaceStreamObjects(obj) {\n    if (Array.isArray(obj)) return obj.map(function (v) {\n      return replaceStreamObjects(v);\n    });\n    if (Object.prototype.toString.call(obj) !== '[object Object]') return obj;\n    if (typeof obj.ref === 'function') return obj.ref();\n    var cloned = {};\n    Object.keys(obj).forEach(function (k) {\n      cloned[k] = replaceStreamObjects(obj[k]);\n    });\n    return cloned;\n  }\n\n  var _default = {\n    validateFeedId: validateFeedId,\n    validateFeedSlug: validateFeedSlug,\n    validateUserId: validateUserId,\n    rfc3986: rfc3986,\n    isReadableStream: isReadableStream,\n    addFileToFormData: addFileToFormData,\n    replaceStreamObjects: replaceStreamObjects\n  };\n  exports.default = _default;\n});","lineCount":112,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,42,3,36],[4,109,3,0],[6,0,5,0,"Object"],[6,2,5,0,"Object"],[6,8,5,6],[6,9,5,7,"defineProperty"],[6,23,5,0],[6,24,5,22,"exports"],[6,31,5,0],[6,33,5,31],[6,45,5,0],[6,47,5,45],[7,0,6,2,"value"],[7,4,6,2,"value"],[7,9,6,7],[7,11,6,9],[8,0,5,45],[8,3,5,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"default"],[9,17,8,0],[9,20,8,18],[9,25,8,23],[9,26,8,0],[11,0,10,0],[11,6,10,4,"_slicedToArray2"],[11,21,10,19],[11,24,10,22,"_interopRequireDefault"],[11,46,10,44],[11,47,10,45,"require"],[11,58,10,52],[11,117,10,44],[11,118,10,0],[13,0,12,0],[13,6,12,4,"_typeof2"],[13,14,12,12],[13,17,12,15,"_interopRequireDefault"],[13,39,12,37],[13,40,12,38,"require"],[13,51,12,45],[13,103,12,37],[13,104,12,0],[15,0,14,0],[15,6,14,4,"_formData"],[15,15,14,13],[15,18,14,16,"_interopRequireDefault"],[15,40,14,38],[15,41,14,39,"require"],[15,52,14,46],[15,84,14,38],[15,85,14,0],[17,0,16,0],[17,6,16,4,"_errors"],[17,13,16,11],[17,16,16,14,"require"],[17,27,16,21],[17,58,16,0],[19,0,18,0],[19,6,18,4,"validFeedSlugRe"],[19,21,18,19],[19,24,18,22],[19,33,18,0],[20,0,19,0],[20,6,19,4,"validUserIdRe"],[20,19,19,17],[20,22,19,20],[20,32,19,0],[22,0,24,0],[22,11,24,9,"validateFeedSlug"],[22,27,24,0],[22,28,24,26,"feedSlug"],[22,36,24,0],[22,38,24,36],[23,0,25,2],[23,8,25,6],[23,9,25,7,"validFeedSlugRe"],[23,24,25,22],[23,25,25,23,"test"],[23,29,25,7],[23,30,25,28,"feedSlug"],[23,38,25,7],[23,39,25,2],[23,41,25,39],[24,0,26,4],[24,12,26,10],[24,16,26,14,"_errors"],[24,23,26,21],[24,24,26,22,"FeedError"],[24,33,26,10],[24,34,26,32],[24,89,26,87,"concat"],[24,95,26,32],[24,96,26,94,"feedSlug"],[24,104,26,32],[24,105,26,10],[24,106,26,4],[25,0,27,3],[27,0,29,2],[27,11,29,9,"feedSlug"],[27,19,29,2],[28,0,30,1],[30,0,36,0],[30,11,36,9,"validateUserId"],[30,25,36,0],[30,26,36,24,"userId"],[30,32,36,0],[30,34,36,32],[31,0,37,2],[31,8,37,6],[31,9,37,7,"validUserIdRe"],[31,22,37,20],[31,23,37,21,"test"],[31,27,37,7],[31,28,37,26,"userId"],[31,34,37,7],[31,35,37,2],[31,37,37,35],[32,0,38,4],[32,12,38,10],[32,16,38,14,"_errors"],[32,23,38,21],[32,24,38,22,"FeedError"],[32,33,38,10],[32,34,38,32],[32,90,38,88,"concat"],[32,96,38,32],[32,97,38,95,"userId"],[32,103,38,32],[32,104,38,10],[32,105,38,4],[33,0,39,3],[35,0,41,2],[35,11,41,9,"userId"],[35,17,41,2],[36,0,42,1],[38,0,44,0],[38,11,44,9,"rfc3986"],[38,18,44,0],[38,19,44,17,"str"],[38,22,44,0],[38,24,44,22],[39,0,45,2],[39,11,45,9,"str"],[39,14,45,12],[39,15,45,13,"replace"],[39,22,45,9],[39,23,45,21],[39,33,45,9],[39,35,45,33],[39,45,45,43,"c"],[39,46,45,33],[39,48,45,46],[40,0,46,4],[40,13,46,11],[40,17,46,15,"concat"],[40,23,46,11],[40,24,46,22,"c"],[40,25,46,23],[40,26,46,24,"charCodeAt"],[40,36,46,22],[40,37,46,35],[40,38,46,22],[40,40,46,38,"toString"],[40,48,46,22],[40,49,46,47],[40,51,46,22],[40,53,46,51,"toUpperCase"],[40,64,46,22],[40,66,46,11],[40,67,46,4],[41,0,47,3],[41,5,45,9],[41,6,45,2],[42,0,48,1],[44,0,50,0],[44,11,50,9,"isReadableStream"],[44,27,50,0],[44,28,50,26,"obj"],[44,31,50,0],[44,33,50,31],[45,0,51,2],[45,11,51,9,"obj"],[45,14,51,12],[45,19,51,17],[45,23,51,9],[45,27,51,25],[45,28,51,26],[45,31,51,29,"_typeof2"],[45,39,51,37],[45,40,51,38,"default"],[45,47,51,25],[45,49,51,47,"obj"],[45,52,51,25],[45,58,51,56],[45,66,51,9],[45,71,51,69,"obj"],[45,74,51,72],[45,75,51,73,"readable"],[45,83,51,69],[45,87,51,85],[45,94,51,92,"obj"],[45,97,51,95],[45,98,51,96,"_read"],[45,103,51,85],[45,108,51,106],[45,118,51,9],[45,119,51,2],[46,0,52,1],[48,0,54,0],[48,11,54,9,"isBuffer"],[48,19,54,0],[48,20,54,18,"obj"],[48,23,54,0],[48,25,54,23],[49,0,55,2],[49,11,55,9,"obj"],[49,14,55,12],[49,18,55,16],[49,22,55,9],[49,26,55,24,"obj"],[49,29,55,27],[49,30,55,28,"constructor"],[49,41,55,24],[49,45,55,43],[49,49,55,9],[49,53,56,2],[49,60,56,9,"obj"],[49,63,56,12],[49,64,56,13,"constructor"],[49,75,56,9],[49,76,56,25,"isBuffer"],[49,84,56,2],[49,89,56,38],[49,99,55,9],[49,103,57,2,"obj"],[49,106,57,5],[49,107,57,6,"constructor"],[49,118,57,2],[49,119,57,18,"isBuffer"],[49,127,57,2],[49,128,57,27,"obj"],[49,131,57,2],[49,132,55,2],[50,0,58,1],[52,0,60,0],[52,11,60,9,"isFileWebAPI"],[52,23,60,0],[52,24,60,22,"uri"],[52,27,60,0],[52,29,60,27],[53,0,61,2],[53,11,61,9],[53,18,61,16,"window"],[53,24,61,9],[53,29,61,27],[53,40,61,9],[53,44,61,42],[53,54,61,52,"window"],[53,60,61,9],[53,64,61,62,"uri"],[53,67,61,65],[53,79,61,77,"File"],[53,83,61,2],[54,0,62,1],[56,0,68,0],[56,11,68,9,"validateFeedId"],[56,25,68,0],[56,26,68,24,"feedId"],[56,32,68,0],[56,34,68,32],[57,0,69,2],[57,8,69,6,"parts"],[57,13,69,11],[57,16,69,14,"feedId"],[57,22,69,20],[57,23,69,21,"split"],[57,28,69,14],[57,29,69,27],[57,32,69,14],[57,33,69,2],[59,0,71,2],[59,8,71,6,"parts"],[59,13,71,11],[59,14,71,12,"length"],[59,20,71,6],[59,25,71,23],[59,26,71,2],[59,28,71,26],[60,0,72,4],[60,12,72,10],[60,16,72,14,"_errors"],[60,23,72,21],[60,24,72,22,"FeedError"],[60,33,72,10],[60,34,72,32],[60,88,72,86,"concat"],[60,94,72,32],[60,95,72,93,"feedId"],[60,101,72,32],[60,102,72,10],[60,103,72,4],[61,0,73,3],[63,0,75,2],[63,8,75,6,"_parts"],[63,14,75,12],[63,17,75,15],[63,18,75,16],[63,21,75,19,"_slicedToArray2"],[63,36,75,34],[63,37,75,35,"default"],[63,44,75,15],[63,46,75,44,"parts"],[63,51,75,15],[63,53,75,51],[63,54,75,15],[63,55,75,2],[64,0,75,2],[64,8,76,6,"feedSlug"],[64,16,76,14],[64,19,76,17,"_parts"],[64,25,76,23],[64,26,76,24],[64,27,76,23],[64,28,75,2],[65,0,75,2],[65,8,77,6,"userId"],[65,14,77,12],[65,17,77,15,"_parts"],[65,23,77,21],[65,24,77,22],[65,25,77,21],[65,26,75,2],[67,0,79,2,"validateFeedSlug"],[67,4,79,2,"validateFeedSlug"],[67,20,79,18],[67,21,79,19,"feedSlug"],[67,29,79,18],[67,30,79,2],[68,0,80,2,"validateUserId"],[68,4,80,2,"validateUserId"],[68,18,80,16],[68,19,80,17,"userId"],[68,25,80,16],[68,26,80,2],[69,0,81,2],[69,11,81,9,"feedId"],[69,17,81,2],[70,0,82,1],[72,0,84,0],[72,11,84,9,"addFileToFormData"],[72,28,84,0],[72,29,84,27,"uri"],[72,32,84,0],[72,34,84,32,"name"],[72,38,84,0],[72,40,84,38,"contentType"],[72,51,84,0],[72,53,84,51],[73,0,85,2],[73,8,85,6,"data"],[73,12,85,10],[73,15,85,13],[73,19,85,17,"_formData"],[73,28,85,26],[73,29,85,27,"default"],[73,36,85,13],[73,38,85,2],[75,0,87,2],[75,8,87,6,"isReadableStream"],[75,24,87,22],[75,25,87,23,"uri"],[75,28,87,22],[75,29,87,6],[75,33,87,31,"isBuffer"],[75,41,87,39],[75,42,87,40,"uri"],[75,45,87,39],[75,46,87,6],[75,50,87,48,"isFileWebAPI"],[75,62,87,60],[75,63,87,61,"uri"],[75,66,87,60],[75,67,87,2],[75,69,87,67],[76,0,88,4],[76,10,88,8,"name"],[76,14,88,4],[76,16,88,14,"data"],[76,20,88,18],[76,21,88,19,"append"],[76,27,88,14],[76,28,88,26],[76,34,88,14],[76,36,88,34,"uri"],[76,39,88,14],[76,41,88,39,"name"],[76,45,88,14],[76,47,88,4],[76,52,88,50,"data"],[76,56,88,54],[76,57,88,55,"append"],[76,63,88,50],[76,64,88,62],[76,70,88,50],[76,72,88,70,"uri"],[76,75,88,50],[77,0,89,3],[77,5,87,2],[77,11,89,9],[78,0,90,4,"data"],[78,6,90,4,"data"],[78,10,90,8],[78,11,90,9,"append"],[78,17,90,4],[78,18,90,16],[78,24,90,4],[78,26,90,24],[79,0,91,6,"uri"],[79,8,91,6,"uri"],[79,11,91,9],[79,13,91,11,"uri"],[79,16,90,24],[80,0,92,6,"name"],[80,8,92,6,"name"],[80,12,92,10],[80,14,92,12,"name"],[80,18,92,16],[80,22,92,20,"uri"],[80,25,92,23],[80,26,92,24,"split"],[80,31,92,20],[80,32,92,30],[80,35,92,20],[80,37,92,35,"reverse"],[80,44,92,20],[80,47,92,45],[80,48,92,20],[80,49,90,24],[81,0,93,6,"type"],[81,8,93,6,"type"],[81,12,93,10],[81,14,93,12,"contentType"],[81,25,93,23],[81,29,93,27,"undefined"],[81,38,90,24],[82,0,94,6,"contentType"],[82,8,94,6,"contentType"],[82,19,94,17],[82,21,94,19,"contentType"],[82,32,94,30],[82,36,94,34,"undefined"],[83,0,90,24],[83,7,90,4],[84,0,96,3],[86,0,98,2],[86,11,98,9,"data"],[86,15,98,2],[87,0,99,1],[89,0,102,0],[89,11,102,9,"replaceStreamObjects"],[89,31,102,0],[89,32,102,30,"obj"],[89,35,102,0],[89,37,102,35],[90,0,104,2],[90,8,104,6,"Array"],[90,13,104,11],[90,14,104,12,"isArray"],[90,21,104,6],[90,22,104,20,"obj"],[90,25,104,6],[90,26,104,2],[90,28,104,26],[90,35,104,33,"obj"],[90,38,104,36],[90,39,104,37,"map"],[90,42,104,33],[90,43,104,41],[90,53,104,51,"v"],[90,54,104,41],[90,56,104,54],[91,0,105,4],[91,13,105,11,"replaceStreamObjects"],[91,33,105,31],[91,34,105,32,"v"],[91,35,105,31],[91,36,105,4],[92,0,106,3],[92,5,104,33],[92,6,104,26],[93,0,108,2],[93,8,108,6,"Object"],[93,14,108,12],[93,15,108,13,"prototype"],[93,24,108,6],[93,25,108,23,"toString"],[93,33,108,6],[93,34,108,32,"call"],[93,38,108,6],[93,39,108,37,"obj"],[93,42,108,6],[93,48,108,46],[93,65,108,2],[93,67,108,65],[93,74,108,72,"obj"],[93,77,108,65],[94,0,110,2],[94,8,110,6],[94,15,110,13,"obj"],[94,18,110,16],[94,19,110,17,"ref"],[94,22,110,6],[94,27,110,25],[94,37,110,2],[94,39,110,37],[94,46,110,44,"obj"],[94,49,110,47],[94,50,110,48,"ref"],[94,53,110,44],[94,55,110,37],[95,0,111,2],[95,8,111,6,"cloned"],[95,14,111,12],[95,17,111,15],[95,19,111,2],[96,0,112,2,"Object"],[96,4,112,2,"Object"],[96,10,112,8],[96,11,112,9,"keys"],[96,15,112,2],[96,16,112,14,"obj"],[96,19,112,2],[96,21,112,19,"forEach"],[96,28,112,2],[96,29,112,27],[96,39,112,37,"k"],[96,40,112,27],[96,42,112,40],[97,0,114,4,"cloned"],[97,6,114,4,"cloned"],[97,12,114,10],[97,13,114,11,"k"],[97,14,114,10],[97,15,114,4],[97,18,114,16,"replaceStreamObjects"],[97,38,114,36],[97,39,114,37,"obj"],[97,42,114,40],[97,43,114,41,"k"],[97,44,114,40],[97,45,114,36],[97,46,114,4],[98,0,115,3],[98,5,112,2],[99,0,117,2],[99,11,117,9,"cloned"],[99,17,117,2],[100,0,118,1],[102,0,120,0],[102,6,120,4,"_default"],[102,14,120,12],[102,17,120,15],[103,0,121,2,"validateFeedId"],[103,4,121,2,"validateFeedId"],[103,18,121,16],[103,20,121,18,"validateFeedId"],[103,34,120,15],[104,0,122,2,"validateFeedSlug"],[104,4,122,2,"validateFeedSlug"],[104,20,122,18],[104,22,122,20,"validateFeedSlug"],[104,38,120,15],[105,0,123,2,"validateUserId"],[105,4,123,2,"validateUserId"],[105,18,123,16],[105,20,123,18,"validateUserId"],[105,34,120,15],[106,0,124,2,"rfc3986"],[106,4,124,2,"rfc3986"],[106,11,124,9],[106,13,124,11,"rfc3986"],[106,20,120,15],[107,0,125,2,"isReadableStream"],[107,4,125,2,"isReadableStream"],[107,20,125,18],[107,22,125,20,"isReadableStream"],[107,38,120,15],[108,0,126,2,"addFileToFormData"],[108,4,126,2,"addFileToFormData"],[108,21,126,19],[108,23,126,21,"addFileToFormData"],[108,40,120,15],[109,0,127,2,"replaceStreamObjects"],[109,4,127,2,"replaceStreamObjects"],[109,24,127,22],[109,26,127,24,"replaceStreamObjects"],[110,0,120,15],[110,3,120,0],[111,0,129,0,"exports"],[111,2,129,0,"exports"],[111,9,129,7],[111,10,129,8,"default"],[111,17,129,0],[111,20,129,18,"_default"],[111,28,129,0]],"functionMap":{"names":["<global>","validateFeedSlug","validateUserId","rfc3986","str.replace$argument_1","isReadableStream","isBuffer","isFileWebAPI","validateFeedId","addFileToFormData","replaceStreamObjects","obj.map$argument_0","Object.keys.forEach$argument_0"],"mappings":"AAA;ACuB;CDM;AEM;CFM;AGE;iCCC;GDE;CHC;AKE;CLE;AME;CNI;AOE;CPE;AQM;CRc;ASE;CTe;AUG;yCCE;GDE;2BEM;GFG;CVG"}},"type":"js/module"}]}