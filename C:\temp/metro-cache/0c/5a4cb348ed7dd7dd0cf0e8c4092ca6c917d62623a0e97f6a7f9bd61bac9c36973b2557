{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"fbjs/lib/performanceNow","data":{"isAsync":false}},{"name":"fbjs/lib/warning","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,l)}return s}function o(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?l(Object(o),!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var _=r(d[3]),h=r(d[4]),u=function t(){s(this,t),this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},f=[],c=10,y=null,p=(function(){function t(n){s(this,t),this._anyBlankStartTime=null,this._enabled=!1,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=n,this._enabled=(y||0)>Math.random(),this._resetData()}return n(t,null,[{key:\"addListener\",value:function(t){return h(null!==y,'Call `FillRateHelper.setSampleRate` before `addListener`.'),f.push(t),{remove:function(){f=f.filter(function(n){return t!==n})}}}},{key:\"setSampleRate\",value:function(t){y=t}},{key:\"setMinSampleCount\",value:function(t){c=t}}]),n(t,[{key:\"activate\",value:function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=_())}},{key:\"deactivateAndFlush\",value:function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<c)this._resetData();else{var n=_()-t,s=o(o({},this._info),{},{total_time_spent:n});f.forEach(function(t){return t(s)}),this._resetData()}}}},{key:\"computeBlankness\",value:function(t,n,s){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var l=s.dOffset,o=s.offset,h=s.velocity,u=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(u),this._info.pixels_scrolled+=Math.round(Math.abs(l));var f=Math.round(1e3*Math.abs(h)),c=_();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var y=0,p=n.first,b=this._getFrameMetrics(p);p<=n.last&&(!b||!b.inLayout);)b=this._getFrameMetrics(p),p++;b&&p>0&&(y=Math.min(u,Math.max(0,b.offset-o)));for(var k=0,v=n.last,S=this._getFrameMetrics(v);v>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(v),v--;if(S&&v<t.getItemCount(t.data)-1){var M=S.offset+S.length;k=Math.min(u,Math.max(0,o+u-M))}var O=Math.round(y+k),T=O/u;return T>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=f,this._info.any_blank_count++,this._info.pixels_blank+=O,T>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(f<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),T}},{key:\"enabled\",value:function(){return this._enabled}},{key:\"_resetData\",value:function(){this._anyBlankStartTime=null,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}]),t})();m.exports=p});","lineCount":1,"map":[[1,28,11,0],[1,644,13,0],[1,648,13,6,"performanceNow"],[1,650,13,23,"require"],[1,652,13,30,"d"],[1,654,13,30],[1,658,14,6,"warning"],[1,660,14,16,"require"],[1,662,14,23,"d"],[1,664,14,23],[1,668,18,6,"Info"],[1,698,19,2,"any_blank_count"],[1,714,19,28],[1,721,20,2,"any_blank_ms"],[1,734,20,25],[1,741,21,2,"any_blank_speed_sum"],[1,761,21,32],[1,768,22,2,"mostly_blank_count"],[1,787,22,31],[1,794,23,2,"mostly_blank_ms"],[1,810,23,28],[1,817,24,2,"pixels_blank"],[1,830,24,25],[1,837,25,2,"pixels_sampled"],[1,852,25,27],[1,859,26,2,"pixels_scrolled"],[1,875,26,28],[1,882,27,2,"total_time_spent"],[1,899,27,29],[1,906,28,2,"sample_count"],[1,919,28,25],[1,922,40,4,"_listeners"],[1,927,41,4,"_minSampleCount"],[1,929,41,22],[1,932,42,4,"_sampleRate"],[1,934,42,30],[1,939,52,6,"FillRateHelper"],[1,953,83,2],[1,962,83,2,"FillRateHelper"],[1,964,83,14,"getFrameMetrics"],[1,967,83,65,"_classCallCheck"],[1,969,83,65,"this"],[1,974,83,65,"FillRateHelper"],[1,977,83,65,"this"],[1,982,53,2,"_anyBlankStartTime"],[1,1001,53,24],[1,1006,83,65,"this"],[1,1011,54,2,"_enabled"],[1,1021,54,13],[1,1023,83,65,"this"],[1,1028,56,2,"_info"],[1,1034,56,10],[1,1038,56,14,"Info"],[1,1040,83,65,"this"],[1,1045,57,2,"_mostlyBlankStartTime"],[1,1067,57,27],[1,1072,83,65,"this"],[1,1077,58,2,"_samplesStartTime"],[1,1095,58,23],[1,1100,84,4,"this"],[1,1105,84,9,"_getFrameMetrics"],[1,1122,84,28,"getFrameMetrics"],[1,1124,85,4,"this"],[1,1129,85,9,"_enabled"],[1,1139,85,21,"_sampleRate"],[1,1142,85,36],[1,1145,85,41,"Math"],[1,1150,85,46,"random"],[1,1159,86,4,"this"],[1,1164,86,9,"_resetData"],[1,1228,61,4,"callback"],[1,1231,68,4],[1,1238,63,4,"warning"],[1,1240,64,22],[1,1247,64,6,"_sampleRate"],[1,1249,65,6],[1,1310,67,4,"_listeners"],[1,1312,67,15,"push"],[1,1317,67,20,"callback"],[1,1321,69,6,"remove"],[1,1328,69,14],[1,1339,70,8,"_listeners"],[1,1341,70,21,"_listeners"],[1,1343,70,32,"filter"],[1,1350,70,39],[1,1359,70,39,"listener"],[1,1362,70,47],[1,1369,70,51,"callback"],[1,1373,70,64,"listener"],[1,1417,75,23,"sampleRate"],[1,1420,76,4,"_sampleRate"],[1,1422,76,18,"sampleRate"],[1,1466,79,27,"minSampleCount"],[1,1469,80,4,"_minSampleCount"],[1,1471,80,22,"minSampleCount"],[1,1515,90,8,"this"],[1,1520,90,13,"_enabled"],[1,1530,90,51],[1,1536,90,25,"this"],[1,1541,90,30,"_samplesStartTime"],[1,1561,92,6,"this"],[1,1566,92,11,"_samplesStartTime"],[1,1584,92,31,"performanceNow"],[1,1634,97,4],[1,1637,97,9,"this"],[1,1642,97,14,"_enabled"],[1,1651,97,4],[1,1652,100,4],[1,1656,100,10,"start"],[1,1658,100,18,"this"],[1,1663,100,23,"_samplesStartTime"],[1,1681,101,4],[1,1684,101,17],[1,1690,101,8,"start"],[1,1692,106,4],[1,1695,106,8,"this"],[1,1700,106,13,"_info"],[1,1706,106,19,"sample_count"],[1,1719,106,34,"_minSampleCount"],[1,1721,108,6,"this"],[1,1726,108,11,"_resetData"],[1,1743,106,4],[1,1744,111,4],[1,1748,111,10,"total_time_spent"],[1,1750,111,29,"performanceNow"],[1,1754,111,48,"start"],[1,1756,112,10,"info"],[1,1758,112,19,"_objectSpread"],[1,1760,112,19,"_objectSpread"],[1,1765,113,9,"this"],[1,1770,113,14,"_info"],[1,1781,114,6,"total_time_spent"],[1,1798,114,6,"total_time_spent"],[1,1802,134,4,"_listeners"],[1,1804,134,15,"forEach"],[1,1812,134,23],[1,1821,134,23,"listener"],[1,1824,134,31],[1,1831,134,35,"listener"],[1,1833,134,44,"info"],[1,1838,135,4,"this"],[1,1843,135,9,"_resetData"],[1,1899,139,4,"props"],[1,1901,145,4,"state"],[1,1903,150,4,"scrollMetrics"],[1,1906,158,4],[1,1910,159,7,"this"],[1,1915,159,12,"_enabled"],[1,1925,160,41],[1,1929,160,6,"props"],[1,1931,160,12,"getItemCount"],[1,1944,160,25,"props"],[1,1946,160,31,"data"],[1,1953,161,32],[1,1959,161,6,"this"],[1,1964,161,11,"_samplesStartTime"],[1,1982,163,6],[1,1989,163,13],[1,1991,157,12],[1,1995,165,11,"dOffset"],[1,1997,165,55,"scrollMetrics"],[1,1999,165,11,"dOffset"],[1,2007,165,20,"offset"],[1,2009,165,55,"scrollMetrics"],[1,2011,165,20,"offset"],[1,2018,165,28,"velocity"],[1,2020,165,55,"scrollMetrics"],[1,2022,165,28,"velocity"],[1,2031,165,38,"visibleLength"],[1,2033,165,55,"scrollMetrics"],[1,2035,165,38,"visibleLength"],[1,2049,169,4,"this"],[1,2054,169,9,"_info"],[1,2060,169,15,"sample_count"],[1,2075,170,4,"this"],[1,2080,170,9,"_info"],[1,2086,170,15,"pixels_sampled"],[1,2102,170,33,"Math"],[1,2107,170,38,"round"],[1,2113,170,44,"visibleLength"],[1,2116,171,4,"this"],[1,2121,171,9,"_info"],[1,2127,171,15,"pixels_scrolled"],[1,2144,171,34,"Math"],[1,2149,171,39,"round"],[1,2155,171,45,"Math"],[1,2160,171,50,"abs"],[1,2164,171,54,"dOffset"],[1,2168,172,4],[1,2172,172,10,"scrollSpeed"],[1,2174,172,24,"Math"],[1,2179,172,29,"round"],[1,2185,172,56],[1,2189,172,35,"Math"],[1,2194,172,40,"abs"],[1,2198,172,44,"velocity"],[1,2202,175,10,"now"],[1,2204,175,16,"performanceNow"],[1,2208,176,35],[1,2214,176,8,"this"],[1,2219,176,13,"_anyBlankStartTime"],[1,2240,177,6,"this"],[1,2245,177,11,"_info"],[1,2251,177,17,"any_blank_ms"],[1,2265,177,33,"now"],[1,2267,177,39,"this"],[1,2272,177,44,"_anyBlankStartTime"],[1,2292,179,4,"this"],[1,2297,179,9,"_anyBlankStartTime"],[1,2316,179,30],[1,2321,180,38],[1,2327,180,8,"this"],[1,2332,180,13,"_mostlyBlankStartTime"],[1,2356,181,6,"this"],[1,2361,181,11,"_info"],[1,2367,181,17,"mostly_blank_ms"],[1,2384,181,36,"now"],[1,2386,181,42,"this"],[1,2391,181,47,"_mostlyBlankStartTime"],[1,2414,183,4,"this"],[1,2419,183,9,"_mostlyBlankStartTime"],[1,2441,183,33],[1,2446,188,4],[1,2450,185,4],[1,2454,185,8,"blankTop"],[1,2456,185,19],[1,2458,186,8,"first"],[1,2460,186,16,"state"],[1,2462,186,22,"first"],[1,2468,187,8,"firstFrame"],[1,2470,187,21,"this"],[1,2475,187,26,"_getFrameMetrics"],[1,2492,187,43,"first"],[1,2495,188,11,"first"],[1,2498,188,20,"state"],[1,2500,188,26,"last"],[1,2508,188,36,"firstFrame"],[1,2512,188,51,"firstFrame"],[1,2514,188,62,"inLayout"],[1,2525,189,6,"firstFrame"],[1,2527,189,19,"this"],[1,2532,189,24,"_getFrameMetrics"],[1,2549,189,41,"first"],[1,2552,190,6,"first"],[1,2556,194,8,"firstFrame"],[1,2559,194,22,"first"],[1,2561,194,30],[1,2565,195,6,"blankTop"],[1,2567,195,17,"Math"],[1,2572,195,22,"min"],[1,2576,196,8,"visibleLength"],[1,2578,197,8,"Math"],[1,2583,197,13,"max"],[1,2587,197,17],[1,2589,197,20,"firstFrame"],[1,2591,197,31,"offset"],[1,2598,197,40,"offset"],[1,2603,203,4],[1,2607,200,4],[1,2611,200,8,"blankBottom"],[1,2613,200,22],[1,2615,201,8,"last"],[1,2617,201,15,"state"],[1,2619,201,21,"last"],[1,2624,202,8,"lastFrame"],[1,2626,202,20,"this"],[1,2631,202,25,"_getFrameMetrics"],[1,2648,202,42,"last"],[1,2651,203,11,"last"],[1,2654,203,19,"state"],[1,2656,203,25,"first"],[1,2665,203,36,"lastFrame"],[1,2669,203,50,"lastFrame"],[1,2671,203,60,"inLayout"],[1,2682,204,6,"lastFrame"],[1,2684,204,18,"this"],[1,2689,204,23,"_getFrameMetrics"],[1,2706,204,40,"last"],[1,2709,205,6,"last"],[1,2713,209,4],[1,2716,209,8,"lastFrame"],[1,2719,209,21,"last"],[1,2721,209,28,"props"],[1,2723,209,34,"getItemCount"],[1,2736,209,47,"props"],[1,2738,209,53,"data"],[1,2744,209,61],[1,2746,209,64],[1,2747,210,6],[1,2751,210,12,"bottomEdge"],[1,2753,210,25,"lastFrame"],[1,2755,210,35,"offset"],[1,2762,210,44,"lastFrame"],[1,2764,210,54,"length"],[1,2771,211,6,"blankBottom"],[1,2773,211,20,"Math"],[1,2778,211,25,"min"],[1,2782,212,8,"visibleLength"],[1,2784,213,8,"Math"],[1,2789,213,13,"max"],[1,2793,213,17],[1,2795,213,20,"offset"],[1,2797,213,29,"visibleLength"],[1,2799,213,45,"bottomEdge"],[1,2803,216,4],[1,2807,216,10,"pixels_blank"],[1,2809,216,25,"Math"],[1,2814,216,30,"round"],[1,2820,216,36,"blankTop"],[1,2822,216,47,"blankBottom"],[1,2825,217,10,"blankness"],[1,2827,217,22,"pixels_blank"],[1,2829,217,37,"visibleLength"],[1,2831,230,4],[1,2838,218,8,"blankness"],[1,2840,218,20],[1,2843,219,6,"this"],[1,2848,219,11,"_anyBlankStartTime"],[1,2867,219,32,"now"],[1,2869,220,6,"this"],[1,2874,220,11,"_info"],[1,2880,220,17,"any_blank_speed_sum"],[1,2901,220,40,"scrollSpeed"],[1,2903,221,6,"this"],[1,2908,221,11,"_info"],[1,2914,221,17,"any_blank_count"],[1,2932,222,6,"this"],[1,2937,222,11,"_info"],[1,2943,222,17,"pixels_blank"],[1,2957,222,33,"pixels_blank"],[1,2959,223,10,"blankness"],[1,2961,223,22],[1,2966,224,8,"this"],[1,2971,224,13,"_mostlyBlankStartTime"],[1,2993,224,37,"now"],[1,2995,225,8,"this"],[1,3000,225,13,"_info"],[1,3006,225,19,"mostly_blank_count"],[1,3030,227,15,"scrollSpeed"],[1,3032,227,29],[1,3037,227,37,"Math"],[1,3042,227,42,"abs"],[1,3046,227,46,"dOffset"],[1,3049,227,57],[1,3053,228,6,"this"],[1,3058,228,11,"deactivateAndFlush"],[1,3079,230,11,"blankness"],[1,3115,234,4],[1,3122,234,11,"this"],[1,3127,234,16,"_enabled"],[1,3173,238,4,"this"],[1,3178,238,9,"_anyBlankStartTime"],[1,3197,238,30],[1,3202,239,4,"this"],[1,3207,239,9,"_info"],[1,3213,239,17],[1,3217,239,21,"Info"],[1,3219,240,4,"this"],[1,3224,240,9,"_mostlyBlankStartTime"],[1,3246,240,33],[1,3251,241,4,"this"],[1,3256,241,9,"_samplesStartTime"],[1,3274,241,29],[1,3289,245,0,"module"],[1,3291,245,7,"exports"],[1,3299,245,17,"FillRateHelper"]],"functionMap":{"names":["<global>","Info","FillRateHelper","addListener","remove","_listeners.filter$argument_0","setSampleRate","setMinSampleCount","constructor","activate","deactivateAndFlush","_listeners.forEach$argument_0","computeBlankness","enabled","_resetData"],"mappings":"AAA;ACiB;CDW;AEuB;ECQ;cCS;uCCC,iCD;ODC;GDE;EIE;GJE;EKE;GLE;EME;GNI;EOE;GPK;EQE;uBCsC,0BD;GRE;EUE;GV6F;EWE;GXE;EYE;GZK;CFC"}},"type":"js/module"}]}