{"dependencies":[{"name":"../util/promise","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var Promise = _$$_REQUIRE(_dependencyMap[0], \"../util/promise\");\n\n  module.exports = {\n    then: function then(callback, errback) {\n      var self = this;\n      if (!this._promise) this._promise = new Promise(function (resolve, reject) {\n        self._resolve = resolve;\n        self._reject = reject;\n      });\n      if (arguments.length === 0) return this._promise;else return this._promise.then(callback, errback);\n    },\n    callback: function callback(_callback, context) {\n      return this.then(function (value) {\n        _callback.call(context, value);\n      });\n    },\n    errback: function errback(callback, context) {\n      return this.then(null, function (reason) {\n        callback.call(context, reason);\n      });\n    },\n    timeout: function timeout(seconds, message) {\n      this.then();\n      var self = this;\n      this._timer = global.setTimeout(function () {\n        self._reject(message);\n      }, seconds * 1000);\n    },\n    setDeferredStatus: function setDeferredStatus(status, value) {\n      if (this._timer) global.clearTimeout(this._timer);\n      this.then();\n      if (status === 'succeeded') this._resolve(value);else if (status === 'failed') this._reject(value);else delete this._promise;\n    }\n  };\n});","lineCount":38,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"Promise"],[4,13,3,11],[4,16,3,16,"require"],[4,27,3,23],[4,65,3,0],[6,0,5,0,"module"],[6,2,5,0,"module"],[6,8,5,6],[6,9,5,7,"exports"],[6,16,5,0],[6,19,5,17],[7,0,6,2,"then"],[7,4,6,2,"then"],[7,8,6,6],[7,10,6,8],[7,24,6,17,"callback"],[7,32,6,8],[7,34,6,27,"errback"],[7,41,6,8],[7,43,6,36],[8,0,7,4],[8,10,7,8,"self"],[8,14,7,12],[8,17,7,15],[8,21,7,4],[9,0,8,4],[9,10,8,8],[9,11,8,9],[9,16,8,14,"_promise"],[9,24,8,4],[9,26,9,6],[9,31,9,11,"_promise"],[9,39,9,6],[9,42,9,22],[9,46,9,26,"Promise"],[9,53,9,22],[9,54,9,34],[9,64,9,43,"resolve"],[9,71,9,34],[9,73,9,52,"reject"],[9,79,9,34],[9,81,9,60],[10,0,10,8,"self"],[10,8,10,8,"self"],[10,12,10,12],[10,13,10,13,"_resolve"],[10,21,10,8],[10,24,10,24,"resolve"],[10,31,10,8],[11,0,11,8,"self"],[11,8,11,8,"self"],[11,12,11,12],[11,13,11,13,"_reject"],[11,20,11,8],[11,23,11,24,"reject"],[11,29,11,8],[12,0,12,7],[12,7,9,22],[12,8,9,6],[13,0,14,4],[13,10,14,8,"arguments"],[13,19,14,17],[13,20,14,18,"length"],[13,26,14,8],[13,31,14,29],[13,32,14,4],[13,34,15,6],[13,41,15,13],[13,46,15,18,"_promise"],[13,54,15,6],[13,55,14,4],[13,60,17,6],[13,67,17,13],[13,72,17,18,"_promise"],[13,80,17,13],[13,81,17,27,"then"],[13,85,17,13],[13,86,17,32,"callback"],[13,94,17,13],[13,96,17,42,"errback"],[13,103,17,13],[13,104,17,6],[14,0,18,3],[14,5,5,17],[15,0,20,2,"callback"],[15,4,20,2,"callback"],[15,12,20,10],[15,14,20,12],[15,32,20,21,"callback"],[15,41,20,12],[15,43,20,31,"context"],[15,50,20,12],[15,52,20,40],[16,0,21,4],[16,13,21,11],[16,18,21,16,"then"],[16,22,21,11],[16,23,21,21],[16,33,21,30,"value"],[16,38,21,21],[16,40,21,37],[17,0,21,39,"callback"],[17,8,21,39,"callback"],[17,17,21,47],[17,18,21,48,"call"],[17,22,21,39],[17,23,21,53,"context"],[17,30,21,39],[17,32,21,62,"value"],[17,37,21,39],[18,0,21,70],[18,7,21,11],[18,8,21,4],[19,0,22,3],[19,5,5,17],[20,0,24,2,"errback"],[20,4,24,2,"errback"],[20,11,24,9],[20,13,24,11],[20,30,24,20,"callback"],[20,38,24,11],[20,40,24,30,"context"],[20,47,24,11],[20,49,24,39],[21,0,25,4],[21,13,25,11],[21,18,25,16,"then"],[21,22,25,11],[21,23,25,21],[21,27,25,11],[21,29,25,27],[21,39,25,36,"reason"],[21,45,25,27],[21,47,25,44],[22,0,25,46,"callback"],[22,8,25,46,"callback"],[22,16,25,54],[22,17,25,55,"call"],[22,21,25,46],[22,22,25,60,"context"],[22,29,25,46],[22,31,25,69,"reason"],[22,37,25,46],[23,0,25,78],[23,7,25,11],[23,8,25,4],[24,0,26,3],[24,5,5,17],[25,0,28,2,"timeout"],[25,4,28,2,"timeout"],[25,11,28,9],[25,13,28,11],[25,30,28,20,"seconds"],[25,37,28,11],[25,39,28,29,"message"],[25,46,28,11],[25,48,28,38],[26,0,29,4],[26,11,29,9,"then"],[26,15,29,4],[27,0,30,4],[27,10,30,8,"self"],[27,14,30,12],[27,17,30,15],[27,21,30,4],[28,0,31,4],[28,11,31,9,"_timer"],[28,17,31,4],[28,20,31,18,"global"],[28,26,31,24],[28,27,31,25,"setTimeout"],[28,37,31,18],[28,38,31,36],[28,50,31,47],[29,0,32,6,"self"],[29,8,32,6,"self"],[29,12,32,10],[29,13,32,11,"_reject"],[29,20,32,6],[29,21,32,19,"message"],[29,28,32,6],[30,0,33,5],[30,7,31,18],[30,9,33,7,"seconds"],[30,16,33,14],[30,19,33,17],[30,23,31,18],[30,24,31,4],[31,0,34,3],[31,5,5,17],[32,0,36,2,"setDeferredStatus"],[32,4,36,2,"setDeferredStatus"],[32,21,36,19],[32,23,36,21],[32,50,36,30,"status"],[32,56,36,21],[32,58,36,38,"value"],[32,63,36,21],[32,65,36,45],[33,0,37,4],[33,10,37,8],[33,15,37,13,"_timer"],[33,21,37,4],[33,23,37,21,"global"],[33,29,37,27],[33,30,37,28,"clearTimeout"],[33,42,37,21],[33,43,37,41],[33,48,37,46,"_timer"],[33,54,37,21],[34,0,39,4],[34,11,39,9,"then"],[34,15,39,4],[35,0,41,4],[35,10,41,8,"status"],[35,16,41,14],[35,21,41,19],[35,32,41,4],[35,34,42,6],[35,39,42,11,"_resolve"],[35,47,42,6],[35,48,42,20,"value"],[35,53,42,6],[35,55,41,4],[35,60,43,9],[35,64,43,13,"status"],[35,70,43,19],[35,75,43,24],[35,83,43,9],[35,85,44,6],[35,90,44,11,"_reject"],[35,97,44,6],[35,98,44,19,"value"],[35,103,44,6],[35,105,43,9],[35,110,46,6],[35,117,46,13],[35,122,46,18,"_promise"],[35,130,46,6],[36,0,47,3],[37,0,5,17],[37,3,5,0]],"functionMap":{"names":["<global>","module.exports.then","Promise$argument_0","module.exports.callback","then$argument_0","module.exports.errback","then$argument_1","module.exports.timeout","global.setTimeout$argument_0","module.exports.setDeferredStatus"],"mappings":"AAA;QCK;kCCG;ODG;GDM;YGE;qBCC,iDD;GHC;WKE;2BCC,mDD;GLC;WOE;oCCG;KDE;GPC;qBSE;GTW"}},"type":"js/module"}]}