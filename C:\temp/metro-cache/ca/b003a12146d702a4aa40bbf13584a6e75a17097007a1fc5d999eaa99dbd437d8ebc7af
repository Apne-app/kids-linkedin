{"dependencies":[{"name":"./globals","data":{"isAsync":false}},{"name":"./constants","data":{"isAsync":false}},{"name":"./attach-listener","data":{"isAsync":false}},{"name":"./attach-shared-listeners","data":{"isAsync":false}},{"name":"./manage-subscribers","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createOrJoinSocket=void 0;var t=r(d[0]),s=r(d[1]),c=r(d[2]),o=r(d[3]),n=r(d[4]),u=function(c,o,u,S){return function(){if(n.removeSubscriber(c,o),!n.hasSubscribers(c)){try{t.sharedWebSockets[c].onclose=function(t){u.current.onClose&&u.current.onClose(t),S(s.ReadyState.CLOSED)},t.sharedWebSockets[c].close()}catch(t){}delete t.sharedWebSockets[c]}}};e.createOrJoinSocket=function(S,b,h,k,W,f,l){if(k.current.share){void 0===t.sharedWebSockets[b]?(h(s.ReadyState.CONNECTING),t.sharedWebSockets[b]=new WebSocket(b,k.current.protocols),o.attachSharedListeners(t.sharedWebSockets[b],b)):h(t.sharedWebSockets[b].readyState);var y={setLastMessage:W,setReadyState:h,optionsRef:k,reconnectCount:l,reconnect:f};return n.addSubscriber(b,y),S.current=t.sharedWebSockets[b],u(b,y,k,h)}return h(s.ReadyState.CONNECTING),S.current=new WebSocket(b,k.current.protocols),c.attachListeners(S.current,{setLastMessage:W,setReadyState:h},k,f.current,l)}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"createOrJoinSocket"],[1,116,3,0,"undefined"],[1,118,4,0],[1,122,4,4,"globals_1"],[1,124,4,16,"require"],[1,126,4,23,"d"],[1,128,4,23],[1,132,5,4,"constants_1"],[1,134,5,18,"require"],[1,136,5,25,"d"],[1,138,5,25],[1,142,6,4,"attach_listener_1"],[1,144,6,24,"require"],[1,146,6,31,"d"],[1,148,6,31],[1,152,7,4,"attach_shared_listeners_1"],[1,154,7,32,"require"],[1,156,7,39,"d"],[1,158,7,39],[1,162,8,4,"manage_subscribers_1"],[1,164,8,27,"require"],[1,166,8,34,"d"],[1,168,8,34],[1,172,10,4,"cleanSubscribers"],[1,174,10,23],[1,183,10,33,"url"],[1,185,10,38,"subscriber"],[1,187,10,50,"optionsRef"],[1,189,10,62,"setReadyState"],[1,192,11,4],[1,199,11,11],[1,210,13,8],[1,213,12,8,"manage_subscribers_1"],[1,215,12,29,"removeSubscriber"],[1,232,12,46,"url"],[1,234,12,51,"subscriber"],[1,238,13,13,"manage_subscribers_1"],[1,240,13,34,"hasSubscribers"],[1,255,13,49,"url"],[1,258,13,55],[1,259,14,12],[1,263,15,16,"globals_1"],[1,265,15,26,"sharedWebSockets"],[1,282,15,43,"url"],[1,285,15,48,"onclose"],[1,293,15,58],[1,302,15,68,"event"],[1,305,16,24,"optionsRef"],[1,307,16,35,"current"],[1,315,16,43,"onClose"],[1,324,17,24,"optionsRef"],[1,326,17,35,"current"],[1,334,17,43,"onClose"],[1,342,17,51,"event"],[1,345,19,20,"setReadyState"],[1,347,19,34,"constants_1"],[1,349,19,46,"ReadyState"],[1,360,19,57,"CLOSED"],[1,369,21,16,"globals_1"],[1,371,21,26,"sharedWebSockets"],[1,388,21,43,"url"],[1,391,21,48,"close"],[1,399,23,12],[1,405,23,19,"e"],[1,416,25,19,"globals_1"],[1,418,25,29,"sharedWebSockets"],[1,435,25,46,"url"],[1,441,29,0,"exports"],[1,443,29,8,"createOrJoinSocket"],[1,462,29,29],[1,471,29,39,"webSocketRef"],[1,473,29,53,"url"],[1,475,29,58,"setReadyState"],[1,477,29,73,"optionsRef"],[1,479,29,85,"setLastMessage"],[1,481,29,101,"startRef"],[1,483,29,111,"reconnectCount"],[1,486,30,4],[1,489,30,8,"optionsRef"],[1,491,30,19,"current"],[1,499,30,27,"share"],[1,505,30,34],[1,511,31,48,"undefined"],[1,515,31,12,"globals_1"],[1,517,31,22,"sharedWebSockets"],[1,534,31,39,"url"],[1,538,32,12,"setReadyState"],[1,540,32,26,"constants_1"],[1,542,32,38,"ReadyState"],[1,553,32,49,"CONNECTING"],[1,565,33,12,"globals_1"],[1,567,33,22,"sharedWebSockets"],[1,584,33,39,"url"],[1,587,33,46],[1,591,33,50,"WebSocket"],[1,601,33,60,"url"],[1,603,33,65,"optionsRef"],[1,605,33,76,"current"],[1,613,33,84,"protocols"],[1,624,34,12,"attach_shared_listeners_1"],[1,626,34,38,"attachSharedListeners"],[1,648,34,60,"globals_1"],[1,650,34,70,"sharedWebSockets"],[1,667,34,87,"url"],[1,670,34,93,"url"],[1,674,37,12,"setReadyState"],[1,676,37,26,"globals_1"],[1,678,37,36,"sharedWebSockets"],[1,695,37,53,"url"],[1,698,37,58,"readyState"],[1,710,39,8],[1,714,39,12,"subscriber"],[1,717,40,12,"setLastMessage"],[1,732,40,28,"setLastMessage"],[1,734,41,12,"setReadyState"],[1,748,41,27,"setReadyState"],[1,750,42,12,"optionsRef"],[1,761,42,24,"optionsRef"],[1,763,43,12,"reconnectCount"],[1,778,43,28,"reconnectCount"],[1,780,44,12,"reconnect"],[1,790,44,23,"startRef"],[1,793,48,8],[1,800,46,8,"manage_subscribers_1"],[1,802,46,29,"addSubscriber"],[1,816,46,43,"url"],[1,818,46,48,"subscriber"],[1,821,47,8,"webSocketRef"],[1,823,47,21,"current"],[1,831,47,31,"globals_1"],[1,833,47,41,"sharedWebSockets"],[1,850,47,58,"url"],[1,853,48,15,"cleanSubscribers"],[1,855,48,32,"url"],[1,857,48,37,"subscriber"],[1,859,48,49,"optionsRef"],[1,861,48,61,"setReadyState"],[1,864,53,8],[1,871,51,8,"setReadyState"],[1,873,51,22,"constants_1"],[1,875,51,34,"ReadyState"],[1,886,51,45,"CONNECTING"],[1,898,52,8,"webSocketRef"],[1,900,52,21,"current"],[1,908,52,31],[1,912,52,35,"WebSocket"],[1,922,52,45,"url"],[1,924,52,50,"optionsRef"],[1,926,52,61,"current"],[1,934,52,69,"protocols"],[1,945,53,15,"attach_listener_1"],[1,947,53,33,"attachListeners"],[1,963,53,49,"webSocketRef"],[1,965,53,62,"current"],[1,974,54,12,"setLastMessage"],[1,989,54,28,"setLastMessage"],[1,991,55,12,"setReadyState"],[1,1005,55,27,"setReadyState"],[1,1008,56,11,"optionsRef"],[1,1010,56,23,"startRef"],[1,1012,56,32,"current"],[1,1020,56,41,"reconnectCount"]],"functionMap":{"names":["<global>","cleanSubscribers","<anonymous>","globals_1.sharedWebSockets.url.onclose","exports.createOrJoinSocket"],"mappings":"AAA;uBCS;WCC;0DCI;iBDK;KDO;CDC;6BIC;CJ6B"}},"type":"js/module"}]}