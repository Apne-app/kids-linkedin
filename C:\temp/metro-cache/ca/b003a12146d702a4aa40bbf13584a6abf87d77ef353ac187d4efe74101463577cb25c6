{"dependencies":[{"name":"./globals","data":{"isAsync":false}},{"name":"./constants","data":{"isAsync":false}},{"name":"./attach-listener","data":{"isAsync":false}},{"name":"./attach-shared-listeners","data":{"isAsync":false}},{"name":"./manage-subscribers","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var t=r(d[0]),s=r(d[1]),c=r(d[2]),o=r(d[3]),n=r(d[4]);e.createOrJoinSocket=function(u,S,b,h,k,W,l){if(h.current.share){void 0===t.sharedWebSockets[S]?(b(s.ReadyState.CONNECTING),t.sharedWebSockets[S]=new WebSocket(S,h.current.protocols),o.attachSharedListeners(t.sharedWebSockets[S],S)):b(t.sharedWebSockets[S].readyState);var f={setLastMessage:k,setReadyState:b,optionsRef:h,reconnectCount:l,reconnect:W};return n.addSubscriber(S,f),u.current=t.sharedWebSockets[S],function(){if(n.removeSubscriber(S,f),!n.hasSubscribers(S)){try{t.sharedWebSockets[S].onclose=function(t){h.current.onClose&&h.current.onClose(t),b(s.ReadyState.CLOSED)},t.sharedWebSockets[S].close()}catch(t){}delete t.sharedWebSockets[S]}}}return b(s.ReadyState.CONNECTING),u.current=new WebSocket(S,h.current.protocols),c.attachListeners(u.current,{setLastMessage:k,setReadyState:b},h,W.current,l)}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0],[1,94,3,4,"globals_1"],[1,96,3,16,"require"],[1,98,3,23,"d"],[1,100,3,23],[1,104,4,4,"constants_1"],[1,106,4,18,"require"],[1,108,4,25,"d"],[1,110,4,25],[1,114,5,4,"attach_listener_1"],[1,116,5,24,"require"],[1,118,5,31,"d"],[1,120,5,31],[1,124,6,4,"attach_shared_listeners_1"],[1,126,6,32,"require"],[1,128,6,39,"d"],[1,130,6,39],[1,134,7,4,"manage_subscribers_1"],[1,136,7,27,"require"],[1,138,7,34,"d"],[1,140,7,34],[1,144,8,0,"exports"],[1,146,8,8,"createOrJoinSocket"],[1,165,8,29],[1,174,8,39,"webSocketRef"],[1,176,8,53,"url"],[1,178,8,58,"setReadyState"],[1,180,8,73,"optionsRef"],[1,182,8,85,"setLastMessage"],[1,184,8,101,"startRef"],[1,186,8,111,"reconnectCount"],[1,189,9,4],[1,192,9,8,"optionsRef"],[1,194,9,19,"current"],[1,202,9,27,"share"],[1,208,9,34],[1,214,10,48,"undefined"],[1,218,10,12,"globals_1"],[1,220,10,22,"sharedWebSockets"],[1,237,10,39,"url"],[1,241,11,12,"setReadyState"],[1,243,11,26,"constants_1"],[1,245,11,38,"ReadyState"],[1,256,11,49,"CONNECTING"],[1,268,12,12,"globals_1"],[1,270,12,22,"sharedWebSockets"],[1,287,12,39,"url"],[1,290,12,46],[1,294,12,50,"WebSocket"],[1,304,12,60,"url"],[1,306,12,65,"optionsRef"],[1,308,12,76,"current"],[1,316,12,84,"protocols"],[1,327,13,12,"attach_shared_listeners_1"],[1,329,13,38,"attachSharedListeners"],[1,351,13,60,"globals_1"],[1,353,13,70,"sharedWebSockets"],[1,370,13,87,"url"],[1,373,13,93,"url"],[1,377,16,12,"setReadyState"],[1,379,16,26,"globals_1"],[1,381,16,36,"sharedWebSockets"],[1,398,16,53,"url"],[1,401,16,58,"readyState"],[1,413,18,8],[1,417,18,12,"subscriber_1"],[1,420,19,12,"setLastMessage"],[1,435,19,28,"setLastMessage"],[1,437,20,12,"setReadyState"],[1,451,20,27,"setReadyState"],[1,453,21,12,"optionsRef"],[1,464,21,24,"optionsRef"],[1,466,22,12,"reconnectCount"],[1,481,22,28,"reconnectCount"],[1,483,23,12,"reconnect"],[1,493,23,23,"startRef"],[1,496,27,8],[1,503,25,8,"manage_subscribers_1"],[1,505,25,29,"addSubscriber"],[1,519,25,43,"url"],[1,521,25,48,"subscriber_1"],[1,524,26,8,"webSocketRef"],[1,526,26,21,"current"],[1,534,26,31,"globals_1"],[1,536,26,41,"sharedWebSockets"],[1,553,26,58,"url"],[1,556,27,15],[1,567,29,12],[1,570,28,12,"manage_subscribers_1"],[1,572,28,33,"removeSubscriber"],[1,589,28,50,"url"],[1,591,28,55,"subscriber_1"],[1,595,29,17,"manage_subscribers_1"],[1,597,29,38,"hasSubscribers"],[1,612,29,53,"url"],[1,615,29,59],[1,616,30,16],[1,620,31,20,"globals_1"],[1,622,31,30,"sharedWebSockets"],[1,639,31,47,"url"],[1,642,31,52,"onclose"],[1,650,31,62],[1,659,31,72,"event"],[1,662,32,28,"optionsRef"],[1,664,32,39,"current"],[1,672,32,47,"onClose"],[1,681,33,28,"optionsRef"],[1,683,33,39,"current"],[1,691,33,47,"onClose"],[1,699,33,55,"event"],[1,702,35,24,"setReadyState"],[1,704,35,38,"constants_1"],[1,706,35,50,"ReadyState"],[1,717,35,61,"CLOSED"],[1,726,37,20,"globals_1"],[1,728,37,30,"sharedWebSockets"],[1,745,37,47,"url"],[1,748,37,52,"close"],[1,756,39,16],[1,762,39,23,"e"],[1,773,41,23,"globals_1"],[1,775,41,33,"sharedWebSockets"],[1,792,41,50,"url"],[1,797,48,8],[1,804,46,8,"setReadyState"],[1,806,46,22,"constants_1"],[1,808,46,34,"ReadyState"],[1,819,46,45,"CONNECTING"],[1,831,47,8,"webSocketRef"],[1,833,47,21,"current"],[1,841,47,31],[1,845,47,35,"WebSocket"],[1,855,47,45,"url"],[1,857,47,50,"optionsRef"],[1,859,47,61,"current"],[1,867,47,69,"protocols"],[1,878,48,15,"attach_listener_1"],[1,880,48,33,"attachListeners"],[1,896,48,49,"webSocketRef"],[1,898,48,62,"current"],[1,907,49,12,"setLastMessage"],[1,922,49,28,"setLastMessage"],[1,924,50,12,"setReadyState"],[1,938,50,27,"setReadyState"],[1,941,51,11,"optionsRef"],[1,943,51,23,"startRef"],[1,945,51,32,"current"],[1,953,51,41,"reconnectCount"]],"functionMap":{"names":["<global>","exports.createOrJoinSocket","<anonymous>","globals_1.sharedWebSockets.url.onclose"],"mappings":"AAA;6BCO;eCmB;8DCI;qBDK;SDO;CDU"}},"type":"js/module"}]}