{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"url","data":{"isAsync":false}},{"name":"qs","data":{"isAsync":false}},{"name":"./errors","data":{"isAsync":false}},{"name":"./utils","data":{"isAsync":false}},{"name":"./signing","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = createRedirectUrl;\n\n  var _url = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"url\"));\n\n  var _qs = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"qs\"));\n\n  var _errors = _$$_REQUIRE(_dependencyMap[3], \"./errors\");\n\n  var _utils = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./utils\"));\n\n  var _signing = _$$_REQUIRE(_dependencyMap[5], \"./signing\");\n\n  function createRedirectUrl(targetUrl, userId, events) {\n    var uri = _url.default.parse(targetUrl);\n\n    if (!(uri.host || uri.hostname && uri.port)) {\n      throw new _errors.MissingSchemaError(\"Invalid URI: \\\"\".concat(_url.default.format(uri), \"\\\"\"));\n    }\n\n    var authToken = (0, _signing.JWTScopeToken)(this.apiSecret, 'redirect_and_track', '*', {\n      userId: '*',\n      expireTokens: this.expireTokens\n    });\n    var analyticsUrl = \"\".concat(this.baseAnalyticsUrl, \"redirect/\");\n    var kwargs = {\n      auth_type: 'jwt',\n      authorization: authToken,\n      url: targetUrl,\n      api_key: this.apiKey,\n      events: JSON.stringify(events)\n    };\n\n    var qString = _utils.default.rfc3986(_qs.default.stringify(kwargs));\n\n    return \"\".concat(analyticsUrl, \"?\").concat(qString);\n  }\n});","lineCount":45,"map":[[2,0,1,0],[4,0,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,42,3,36],[4,109,3,0],[6,0,5,0,"Object"],[6,2,5,0,"Object"],[6,8,5,6],[6,9,5,7,"defineProperty"],[6,23,5,0],[6,24,5,22,"exports"],[6,31,5,0],[6,33,5,31],[6,45,5,0],[6,47,5,45],[7,0,6,2,"value"],[7,4,6,2,"value"],[7,9,6,7],[7,11,6,9],[8,0,5,45],[8,3,5,0],[9,0,8,0,"exports"],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"default"],[9,17,8,0],[9,20,8,18,"createRedirectUrl"],[9,37,8,0],[11,0,10,0],[11,6,10,4,"_url"],[11,10,10,8],[11,13,10,11,"_interopRequireDefault"],[11,35,10,33],[11,36,10,34,"require"],[11,47,10,41],[11,73,10,33],[11,74,10,0],[13,0,12,0],[13,6,12,4,"_qs"],[13,9,12,7],[13,12,12,10,"_interopRequireDefault"],[13,34,12,32],[13,35,12,33,"require"],[13,46,12,40],[13,71,12,32],[13,72,12,0],[15,0,14,0],[15,6,14,4,"_errors"],[15,13,14,11],[15,16,14,14,"require"],[15,27,14,21],[15,58,14,0],[17,0,16,0],[17,6,16,4,"_utils"],[17,12,16,10],[17,15,16,13,"_interopRequireDefault"],[17,37,16,35],[17,38,16,36,"require"],[17,49,16,43],[17,79,16,35],[17,80,16,0],[19,0,18,0],[19,6,18,4,"_signing"],[19,14,18,12],[19,17,18,15,"require"],[19,28,18,22],[19,60,18,0],[21,0,33,0],[21,11,33,9,"createRedirectUrl"],[21,28,33,0],[21,29,33,27,"targetUrl"],[21,38,33,0],[21,40,33,38,"userId"],[21,46,33,0],[21,48,33,46,"events"],[21,54,33,0],[21,56,33,54],[22,0,34,2],[22,8,34,6,"uri"],[22,11,34,9],[22,14,34,12,"_url"],[22,18,34,16],[22,19,34,17,"default"],[22,26,34,12],[22,27,34,25,"parse"],[22,32,34,12],[22,33,34,31,"targetUrl"],[22,42,34,12],[22,43,34,2],[24,0,36,2],[24,8,36,6],[24,10,36,8,"uri"],[24,13,36,11],[24,14,36,12,"host"],[24,18,36,8],[24,22,36,20,"uri"],[24,25,36,23],[24,26,36,24,"hostname"],[24,34,36,20],[24,38,36,36,"uri"],[24,41,36,39],[24,42,36,40,"port"],[24,46,36,6],[24,47,36,2],[24,49,36,47],[25,0,37,4],[25,12,37,10],[25,16,37,14,"_errors"],[25,23,37,21],[25,24,37,22,"MissingSchemaError"],[25,42,37,10],[25,43,37,41],[25,61,37,59,"concat"],[25,67,37,41],[25,68,37,66,"_url"],[25,72,37,70],[25,73,37,71,"default"],[25,80,37,66],[25,81,37,79,"format"],[25,87,37,66],[25,88,37,86,"uri"],[25,91,37,66],[25,92,37,41],[25,94,37,92],[25,98,37,41],[25,99,37,10],[25,100,37,4],[26,0,38,3],[28,0,40,2],[28,8,40,6,"authToken"],[28,17,40,15],[28,20,40,18],[28,21,40,19],[28,24,40,22,"_signing"],[28,32,40,30],[28,33,40,31,"JWTScopeToken"],[28,46,40,18],[28,48,40,46],[28,53,40,51,"apiSecret"],[28,62,40,18],[28,64,40,62],[28,84,40,18],[28,86,40,84],[28,89,40,18],[28,91,40,89],[29,0,41,4,"userId"],[29,6,41,4,"userId"],[29,12,41,10],[29,14,41,12],[29,17,40,89],[30,0,42,4,"expireTokens"],[30,6,42,4,"expireTokens"],[30,18,42,16],[30,20,42,18],[30,25,42,23,"expireTokens"],[31,0,40,89],[31,5,40,18],[31,6,40,2],[32,0,44,2],[32,8,44,6,"analyticsUrl"],[32,20,44,18],[32,23,44,21],[32,26,44,24,"concat"],[32,32,44,21],[32,33,44,31],[32,38,44,36,"baseAnalyticsUrl"],[32,54,44,21],[32,56,44,54],[32,67,44,21],[32,68,44,2],[33,0,45,2],[33,8,45,6,"kwargs"],[33,14,45,12],[33,17,45,15],[34,0,46,4,"auth_type"],[34,6,46,4,"auth_type"],[34,15,46,13],[34,17,46,15],[34,22,45,15],[35,0,47,4,"authorization"],[35,6,47,4,"authorization"],[35,19,47,17],[35,21,47,19,"authToken"],[35,30,45,15],[36,0,48,4,"url"],[36,6,48,4,"url"],[36,9,48,7],[36,11,48,9,"targetUrl"],[36,20,45,15],[37,0,49,4,"api_key"],[37,6,49,4,"api_key"],[37,13,49,11],[37,15,49,13],[37,20,49,18,"apiKey"],[37,26,45,15],[38,0,50,4,"events"],[38,6,50,4,"events"],[38,12,50,10],[38,14,50,12,"JSON"],[38,18,50,16],[38,19,50,17,"stringify"],[38,28,50,12],[38,29,50,27,"events"],[38,35,50,12],[39,0,45,15],[39,5,45,2],[41,0,53,2],[41,8,53,6,"qString"],[41,15,53,13],[41,18,53,16,"_utils"],[41,24,53,22],[41,25,53,23,"default"],[41,32,53,16],[41,33,53,31,"rfc3986"],[41,40,53,16],[41,41,53,39,"_qs"],[41,44,53,42],[41,45,53,43,"default"],[41,52,53,39],[41,53,53,51,"stringify"],[41,62,53,39],[41,63,53,61,"kwargs"],[41,69,53,39],[41,70,53,16],[41,71,53,2],[43,0,55,2],[43,11,55,9],[43,14,55,12,"concat"],[43,20,55,9],[43,21,55,19,"analyticsUrl"],[43,33,55,9],[43,35,55,33],[43,38,55,9],[43,40,55,38,"concat"],[43,46,55,9],[43,47,55,45,"qString"],[43,54,55,9],[43,55,55,2],[44,0,56,1]],"functionMap":{"names":["<global>","createRedirectUrl"],"mappings":"AAA;ACgC"}},"type":"js/module"}]}