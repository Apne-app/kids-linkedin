{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"./nativeInterface","data":{"isAsync":false}},{"name":"./internetReachability","data":{"isAsync":false}},{"name":"./privateTypes","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _nativeInterface = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./nativeInterface\"));\n\n  var _internetReachability = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./internetReachability\"));\n\n  var PrivateTypes = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[7], \"./privateTypes\"));\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  var State = function State(configuration) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, State);\n    this._nativeEventSubscription = null;\n    this._subscriptions = new Set();\n    this._latestState = null;\n\n    this._handleNativeStateUpdate = function (state) {\n      _this._internetReachability.update(state);\n\n      var convertedState = _this._convertState(state);\n\n      _this._latestState = convertedState;\n\n      _this._subscriptions.forEach(function (handler) {\n        return handler(convertedState);\n      });\n    };\n\n    this._handleInternetReachabilityUpdate = function (isInternetReachable) {\n      if (!_this._latestState) {\n        return;\n      }\n\n      var nextState = _objectSpread(_objectSpread({}, _this._latestState), {}, {\n        isInternetReachable: isInternetReachable\n      });\n\n      _this._latestState = nextState;\n\n      _this._subscriptions.forEach(function (handler) {\n        return handler(nextState);\n      });\n    };\n\n    this._fetchCurrentState = function _callee(requestedInterface) {\n      var state, convertedState;\n      return _regenerator.default.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regenerator.default.awrap(_nativeInterface.default.getCurrentState(requestedInterface));\n\n            case 2:\n              state = _context.sent;\n\n              _this._internetReachability.update(state);\n\n              convertedState = _this._convertState(state);\n\n              if (!requestedInterface) {\n                _this._latestState = convertedState;\n              }\n\n              return _context.abrupt(\"return\", convertedState);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    this._convertState = function (input) {\n      if (typeof input.isInternetReachable === 'boolean') {\n        return input;\n      } else {\n        return _objectSpread(_objectSpread({}, input), {}, {\n          isInternetReachable: _this._internetReachability.currentState()\n        });\n      }\n    };\n\n    this.latest = function (requestedInterface) {\n      if (requestedInterface) {\n        return _this._fetchCurrentState(requestedInterface);\n      } else if (_this._latestState) {\n        return Promise.resolve(_this._latestState);\n      } else {\n        return _this._fetchCurrentState();\n      }\n    };\n\n    this.add = function (handler) {\n      _this._subscriptions.add(handler);\n\n      if (_this._latestState) {\n        handler(_this._latestState);\n      } else {\n        _this.latest().then(handler);\n      }\n    };\n\n    this.remove = function (handler) {\n      _this._subscriptions.delete(handler);\n    };\n\n    this.tearDown = function () {\n      if (_this._internetReachability) {\n        _this._internetReachability.tearDown();\n      }\n\n      if (_this._nativeEventSubscription) {\n        _this._nativeEventSubscription.remove();\n      }\n\n      _this._subscriptions.clear();\n    };\n\n    this._internetReachability = new _internetReachability.default(configuration, this._handleInternetReachabilityUpdate);\n    this._nativeEventSubscription = _nativeInterface.default.eventEmitter.addListener(PrivateTypes.DEVICE_CONNECTIVITY_EVENT, this._handleNativeStateUpdate);\n\n    this._fetchCurrentState();\n  };\n\n  exports.default = State;\n});","lineCount":146,"map":[[17,0,11,0],[19,0,12,0],[21,0,14,0],[27,6,16,21,"State"],[27,11],[27,14,22,2],[27,29,22,14,"configuration"],[27,42,22,2],[27,44,22,57],[28,0,22,57],[30,0,22,57],[31,0,22,57],[31,9,17,10,"_nativeEventSubscription"],[31,33,22,57],[31,36,17,69],[31,40,22,57],[32,0,22,57],[32,9,18,10,"_subscriptions"],[32,23,22,57],[32,26,18,27],[32,30,18,31,"Set"],[32,33,18,27],[32,35,22,57],[33,0,22,57],[33,9,19,10,"_latestState"],[33,21,22,57],[33,24,19,52],[33,28,22,57],[35,0,22,57],[35,9,39,10,"_handleNativeStateUpdate"],[35,33,22,57],[35,36,39,37],[35,46,40,4,"state"],[35,51,39,37],[35,53,41,13],[36,0,43,4],[36,6,43,4],[36,11,43,8],[36,12,43,9,"_internetReachability"],[36,33,43,4],[36,34,43,31,"update"],[36,40,43,4],[36,41,43,38,"state"],[36,46,43,4],[38,0,46,4],[38,10,46,10,"convertedState"],[38,24,46,24],[38,27,46,27],[38,32,46,31],[38,33,46,32,"_convertState"],[38,46,46,27],[38,47,46,46,"state"],[38,52,46,27],[38,53,46,4],[40,0,49,4],[40,6,49,4],[40,11,49,8],[40,12,49,9,"_latestState"],[40,24,49,4],[40,27,49,24,"convertedState"],[40,41,49,4],[42,0,50,4],[42,6,50,4],[42,11,50,8],[42,12,50,9,"_subscriptions"],[42,26,50,4],[42,27,50,24,"forEach"],[42,34,50,4],[42,35,50,32],[42,45,50,33,"handler"],[42,52,50,32],[43,0,50,32],[43,15,50,51,"handler"],[43,22,50,58],[43,23,50,59,"convertedState"],[43,37,50,58],[43,38,50,32],[44,0,50,32],[44,7,50,4],[45,0,51,3],[45,5,22,57],[47,0,22,57],[47,9,53,10,"_handleInternetReachabilityUpdate"],[47,42,22,57],[47,45,53,46],[47,55,54,4,"isInternetReachable"],[47,74,53,46],[47,76,55,13],[48,0,56,4],[48,10,56,8],[48,11,56,9],[48,16,56,13],[48,17,56,14,"_latestState"],[48,29,56,4],[48,31,56,28],[49,0,57,6],[50,0,58,5],[52,0,60,4],[52,10,60,10,"nextState"],[52,19,60,19],[52,54,61,9],[52,59,61,13],[52,60,61,14,"_latestState"],[52,72,60,19],[53,0,62,6,"isInternetReachable"],[53,8,62,6,"isInternetReachable"],[53,27,62,25],[53,29,62,6,"isInternetReachable"],[54,0,60,19],[54,8,60,4],[56,0,64,4],[56,6,64,4],[56,11,64,8],[56,12,64,9,"_latestState"],[56,24,64,4],[56,27,64,24,"nextState"],[56,36,64,4],[58,0,65,4],[58,6,65,4],[58,11,65,8],[58,12,65,9,"_subscriptions"],[58,26,65,4],[58,27,65,24,"forEach"],[58,34,65,4],[58,35,65,32],[58,45,65,33,"handler"],[58,52,65,32],[59,0,65,32],[59,15,65,51,"handler"],[59,22,65,58],[59,23,65,59,"nextState"],[59,32,65,58],[59,33,65,32],[60,0,65,32],[60,7,65,4],[61,0,66,3],[61,5,22,57],[63,0,22,57],[63,9,68,10,"_fetchCurrentState"],[63,27,22,57],[63,30,68,31],[63,47,69,4,"requestedInterface"],[63,65,68,31],[64,0,68,31],[65,0,68,31],[66,0,68,31],[67,0,68,31],[68,0,68,31],[69,0,68,31],[70,0,68,31],[70,48,71,24,"NativeInterface"],[70,73,71,40,"getCurrentState"],[70,88,71,24],[70,89,71,56,"requestedInterface"],[70,107,71,24],[70,108,68,31],[72,0,68,31],[73,0,71,10,"state"],[73,14,71,10,"state"],[73,19,68,31],[75,0,74,4],[75,14,74,4],[75,19,74,8],[75,20,74,9,"_internetReachability"],[75,41,74,4],[75,42,74,31,"update"],[75,48,74,4],[75,49,74,38,"state"],[75,54,74,4],[77,0,76,10,"convertedState"],[77,14,76,10,"convertedState"],[77,28,68,31],[77,31,76,27],[77,36,76,31],[77,37,76,32,"_convertState"],[77,50,76,27],[77,51,76,46,"state"],[77,56,76,27],[77,57,68,31],[79,0,77,4],[79,18,77,8],[79,19,77,9,"requestedInterface"],[79,37,77,4],[79,39,77,29],[80,0,78,6],[80,16,78,6],[80,21,78,10],[80,22,78,11,"_latestState"],[80,34,78,6],[80,37,78,26,"convertedState"],[80,51,78,6],[81,0,79,5],[83,0,68,31],[83,47,81,11,"convertedState"],[83,61,68,31],[85,0,68,31],[86,0,68,31],[87,0,68,31],[88,0,68,31],[89,0,68,31],[90,0,68,31],[91,0,68,31],[91,5,22,57],[93,0,22,57],[93,9,84,10,"_convertState"],[93,22,22,57],[93,25,84,26],[93,35,85,4,"input"],[93,40,84,26],[93,42,86,27],[94,0,87,4],[94,10,87,8],[94,17,87,15,"input"],[94,22,87,20],[94,23,87,21,"isInternetReachable"],[94,42,87,8],[94,47,87,45],[94,56,87,4],[94,58,87,56],[95,0,88,6],[95,15,88,13,"input"],[95,20,88,6],[96,0,89,5],[96,7,87,4],[96,13,89,11],[97,0,90,6],[97,47,91,11,"input"],[97,52,90,6],[98,0,92,8,"isInternetReachable"],[98,10,92,8,"isInternetReachable"],[98,29,92,27],[98,31,92,29],[98,36,92,33],[98,37,92,34,"_internetReachability"],[98,58,92,29],[98,59,92,56,"currentState"],[98,71,92,29],[99,0,90,6],[100,0,94,5],[101,0,95,3],[101,5,22,57],[103,0,22,57],[103,9,97,9,"latest"],[103,15,22,57],[103,18,97,18],[103,28,98,4,"requestedInterface"],[103,46,97,18],[103,48,99,36],[104,0,100,4],[104,10,100,8,"requestedInterface"],[104,28,100,4],[104,30,100,28],[105,0,101,6],[105,15,101,13],[105,20,101,17],[105,21,101,18,"_fetchCurrentState"],[105,39,101,13],[105,40,101,37,"requestedInterface"],[105,58,101,13],[105,59,101,6],[106,0,102,5],[106,7,100,4],[106,13,102,11],[106,17,102,15],[106,22,102,19],[106,23,102,20,"_latestState"],[106,35,102,11],[106,37,102,34],[107,0,103,6],[107,15,103,13,"Promise"],[107,22,103,20],[107,23,103,21,"resolve"],[107,30,103,13],[107,31,103,29],[107,36,103,33],[107,37,103,34,"_latestState"],[107,49,103,13],[107,50,103,6],[108,0,104,5],[108,7,102,11],[108,13,104,11],[109,0,105,6],[109,15,105,13],[109,20,105,17],[109,21,105,18,"_fetchCurrentState"],[109,39,105,13],[109,41,105,6],[110,0,106,5],[111,0,107,3],[111,5,22,57],[113,0,22,57],[113,9,109,9,"add"],[113,12,22,57],[113,15,109,15],[113,25,109,16,"handler"],[113,32,109,15],[113,34,109,62],[114,0,111,4],[114,6,111,4],[114,11,111,8],[114,12,111,9,"_subscriptions"],[114,26,111,4],[114,27,111,24,"add"],[114,30,111,4],[114,31,111,28,"handler"],[114,38,111,4],[116,0,114,4],[116,10,114,8],[116,15,114,12],[116,16,114,13,"_latestState"],[116,28,114,4],[116,30,114,27],[117,0,115,6,"handler"],[117,8,115,6,"handler"],[117,15,115,13],[117,16,115,14],[117,21,115,18],[117,22,115,19,"_latestState"],[117,34,115,13],[117,35,115,6],[118,0,116,5],[118,7,114,4],[118,13,116,11],[119,0,117,6],[119,8,117,6],[119,13,117,10],[119,14,117,11,"latest"],[119,20,117,6],[119,23,117,20,"then"],[119,27,117,6],[119,28,117,25,"handler"],[119,35,117,6],[120,0,118,5],[121,0,119,3],[121,5,22,57],[123,0,22,57],[123,9,121,9,"remove"],[123,15,22,57],[123,18,121,18],[123,28,121,19,"handler"],[123,35,121,18],[123,37,121,65],[124,0,122,4],[124,6,122,4],[124,11,122,8],[124,12,122,9,"_subscriptions"],[124,26,122,4],[124,27,122,24,"delete"],[124,33,122,4],[124,34,122,31,"handler"],[124,41,122,4],[125,0,123,3],[125,5,22,57],[127,0,22,57],[127,9,125,9,"tearDown"],[127,17,22,57],[127,20,125,20],[127,32,125,32],[128,0,126,4],[128,10,126,8],[128,15,126,12],[128,16,126,13,"_internetReachability"],[128,37,126,4],[128,39,126,36],[129,0,127,6],[129,8,127,6],[129,13,127,10],[129,14,127,11,"_internetReachability"],[129,35,127,6],[129,36,127,33,"tearDown"],[129,44,127,6],[130,0,128,5],[132,0,130,4],[132,10,130,8],[132,15,130,12],[132,16,130,13,"_nativeEventSubscription"],[132,40,130,4],[132,42,130,39],[133,0,131,6],[133,8,131,6],[133,13,131,10],[133,14,131,11,"_nativeEventSubscription"],[133,38,131,6],[133,39,131,36,"remove"],[133,45,131,6],[134,0,132,5],[136,0,134,4],[136,6,134,4],[136,11,134,8],[136,12,134,9,"_subscriptions"],[136,26,134,4],[136,27,134,24,"clear"],[136,32,134,4],[137,0,135,3],[137,5,22,57],[139,0,24,4],[139,9,24,9,"_internetReachability"],[139,30,24,4],[139,33,24,33],[139,37,24,37,"InternetReachability"],[139,66,24,33],[139,67,25,6,"configuration"],[139,80,24,33],[139,82,26,6],[139,87,26,11,"_handleInternetReachabilityUpdate"],[139,120,24,33],[139,121,24,4],[140,0,30,4],[140,9,30,9,"_nativeEventSubscription"],[140,33,30,4],[140,36,30,36,"NativeInterface"],[140,61,30,52,"eventEmitter"],[140,73,30,36],[140,74,30,65,"addListener"],[140,85,30,36],[140,86,31,6,"PrivateTypes"],[140,98,31,18],[140,99,31,19,"DEVICE_CONNECTIVITY_EVENT"],[140,124,30,36],[140,126,32,6],[140,131,32,11,"_handleNativeStateUpdate"],[140,155,30,36],[140,156,30,4],[142,0,36,4],[142,9,36,9,"_fetchCurrentState"],[142,27,36,4],[143,0,37,3],[143,3]],"functionMap":{"names":["<global>","State","State#constructor","State#_handleNativeStateUpdate","_subscriptions.forEach$argument_0","State#_handleInternetReachabilityUpdate","State#_fetchCurrentState","State#_convertState","State#latest","State#add","State#remove","State#tearDown"],"mappings":"AAA;eCe;ECM;GDe;qCEE;gCCW,0CD;GFC;8CIE;gCDY,qCC;GJC;+BKE;GLc;0BME;GNW;kBOE;GPU;eQE;GRU;kBSE;GTE;oBUE;GVU;CDC"}},"type":"js/module"}]}