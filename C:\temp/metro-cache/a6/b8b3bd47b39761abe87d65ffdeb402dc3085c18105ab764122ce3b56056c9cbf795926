{"dependencies":[{"name":"./socket-io","data":{"isAsync":false}},{"name":"./constants","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.attachListeners=void 0;var n=r(d[0]),t=r(d[1]),c=function(n,t,c){n.onmessage=function(n){t.current.onMessage&&t.current.onMessage(n),'function'==typeof t.current.filter&&!0!==t.current.filter(n)||c(n)}},o=function(n,c,o,u){n.onopen=function(n){c.current.onOpen&&c.current.onOpen(n),u.current=0,o(t.ReadyState.OPEN)}},u=function(n,c,o,u,s){var l;return n.onclose=function(n){var f,E;if(c.current.onClose&&c.current.onClose(n),o(t.ReadyState.CLOSED),c.current.shouldReconnect&&c.current.shouldReconnect(n)){var p=null!==(f=c.current.reconnectAttempts)&&void 0!==f?f:t.DEFAULT_RECONNECT_LIMIT;s.current<p?l=window.setTimeout(function(){s.current++,u()},null!==(E=c.current.reconnectInterval)&&void 0!==E?E:t.DEFAULT_RECONNECT_INTERVAL_MS):(c.current.onReconnectStop&&c.current.onReconnectStop(p),console.warn(\"Max reconnect attempts of \"+p+\" exceeded\"))}},function(){return l&&window.clearTimeout(l)}},s=function(n,c,o,u){var s;return n.onerror=function(n){var l,f;c.current.onError&&c.current.onError(n),c.current.retryOnError&&(u.current<(null!==(l=c.current.reconnectAttempts)&&void 0!==l?l:t.DEFAULT_RECONNECT_LIMIT)?s=window.setTimeout(function(){u.current++,o()},null!==(f=c.current.reconnectInterval)&&void 0!==f?f:t.DEFAULT_RECONNECT_INTERVAL_MS):(c.current.onReconnectStop&&c.current.onReconnectStop(c.current.reconnectAttempts),console.warn(\"Max reconnect attempts of \"+c.current.reconnectAttempts+\" exceeded\")))},function(){return s&&window.clearTimeout(s)}};e.attachListeners=function(l,f,E,p,v){var R,T,S,_=f.setLastMessage,L=f.setReadyState;return E.current.fromSocketIO&&(R=n.setUpSocketIOPing(l)),c(l,E,_),o(l,E,L,v),T=u(l,E,L,p,v),S=s(l,E,p,v),function(){L(t.ReadyState.CLOSING),T(),S(),l.close(),R&&clearInterval(R)}}});","lineCount":1,"map":[[1,28,1,0],[1,41,2,0,"Object"],[1,48,2,7,"defineProperty"],[1,63,2,22,"exports"],[1,65,2,31],[1,79,2,47,"value"],[1,86,2,54],[1,90,3,0,"exports"],[1,92,3,8,"attachListeners"],[1,113,3,0,"undefined"],[1,115,4,0],[1,119,4,4,"socket_io_1"],[1,121,4,18,"require"],[1,123,4,25,"d"],[1,125,4,25],[1,129,5,4,"constants_1"],[1,131,5,18,"require"],[1,133,5,25,"d"],[1,135,5,25],[1,139,6,4,"bindMessageHandler"],[1,141,6,25],[1,150,6,35,"webSocketInstance"],[1,152,6,54,"optionsRef"],[1,154,6,66,"setLastMessage"],[1,157,7,4,"webSocketInstance"],[1,159,7,22,"onmessage"],[1,169,7,34],[1,178,7,44,"message"],[1,181,8,8,"optionsRef"],[1,183,8,19,"current"],[1,191,8,27,"onMessage"],[1,202,8,40,"optionsRef"],[1,204,8,51,"current"],[1,212,8,59,"onMessage"],[1,222,8,69,"message"],[1,225,9,49],[1,244,9,19,"optionsRef"],[1,246,9,30,"current"],[1,254,9,38,"filter"],[1,263,9,102],[1,267,9,63,"optionsRef"],[1,269,9,74,"current"],[1,277,9,82,"filter"],[1,284,9,89,"message"],[1,288,12,8,"setLastMessage"],[1,290,12,23,"message"],[1,295,15,4,"bindOpenHandler"],[1,297,15,22],[1,306,15,32,"webSocketInstance"],[1,308,15,51,"optionsRef"],[1,310,15,63,"setReadyState"],[1,312,15,78,"reconnectCount"],[1,315,16,4,"webSocketInstance"],[1,317,16,22,"onopen"],[1,324,16,31],[1,333,16,41,"event"],[1,336,17,8,"optionsRef"],[1,338,17,19,"current"],[1,346,17,27,"onOpen"],[1,354,17,37,"optionsRef"],[1,356,17,48,"current"],[1,364,17,56,"onOpen"],[1,371,17,63,"event"],[1,374,18,8,"reconnectCount"],[1,376,18,23,"current"],[1,384,18,33],[1,386,19,8,"setReadyState"],[1,388,19,22,"constants_1"],[1,390,19,34,"ReadyState"],[1,401,19,45,"OPEN"],[1,409,22,4,"bindCloseHandler"],[1,411,22,23],[1,420,22,33,"webSocketInstance"],[1,422,22,52,"optionsRef"],[1,424,22,64,"setReadyState"],[1,426,22,79,"reconnect"],[1,428,22,90,"reconnectCount"],[1,431,23,4],[1,435,23,8,"reconnectTimeout"],[1,437,42,4],[1,444,24,4,"webSocketInstance"],[1,446,24,22,"onclose"],[1,454,24,32],[1,463,24,42,"event"],[1,466,25,8],[1,470,25,12,"_a"],[1,472,25,16,"_b"],[1,474,28,8],[1,477,26,8,"optionsRef"],[1,479,26,19,"current"],[1,487,26,27,"onClose"],[1,496,26,38,"optionsRef"],[1,498,26,49,"current"],[1,506,26,57,"onClose"],[1,514,26,65,"event"],[1,517,27,8,"setReadyState"],[1,519,27,22,"constants_1"],[1,521,27,34,"ReadyState"],[1,532,27,45,"CLOSED"],[1,540,28,12,"optionsRef"],[1,542,28,23,"current"],[1,550,28,31,"shouldReconnect"],[1,567,28,50,"optionsRef"],[1,569,28,61,"current"],[1,577,28,69,"shouldReconnect"],[1,593,28,85,"event"],[1,596,28,93],[1,597,29,12],[1,601,29,16,"reconnectAttempts"],[1,603,29,84],[1,611,29,37,"_a"],[1,613,29,42,"optionsRef"],[1,615,29,53,"current"],[1,623,29,61,"reconnectAttempts"],[1,648,29,94,"undefined"],[1,652,29,92,"_a"],[1,654,29,108,"_a"],[1,656,29,113,"constants_1"],[1,658,29,125,"DEFAULT_RECONNECT_LIMIT"],[1,682,30,16,"reconnectCount"],[1,684,30,31,"current"],[1,692,30,41,"reconnectAttempts"],[1,694,31,16,"reconnectTimeout"],[1,696,31,35,"window"],[1,703,31,42,"setTimeout"],[1,714,31,53],[1,725,32,20,"reconnectCount"],[1,727,32,35,"current"],[1,737,33,20,"reconnect"],[1,742,34,67],[1,750,34,20,"_b"],[1,752,34,25,"optionsRef"],[1,754,34,36,"current"],[1,762,34,44,"reconnectInterval"],[1,787,34,77,"undefined"],[1,791,34,75,"_b"],[1,793,34,91,"_b"],[1,795,34,96,"constants_1"],[1,797,34,108,"DEFAULT_RECONNECT_INTERVAL_MS"],[1,829,37,16,"optionsRef"],[1,831,37,27,"current"],[1,839,37,35,"onReconnectStop"],[1,856,37,54,"optionsRef"],[1,858,37,65,"current"],[1,866,37,73,"onReconnectStop"],[1,882,37,89,"reconnectAttempts"],[1,885,38,16,"console"],[1,893,38,24,"warn"],[1,898,38,29],[1,927,38,60,"reconnectAttempts"],[1,929,38,80],[1,945,42,11],[1,956,42,25],[1,963,42,32,"reconnectTimeout"],[1,966,42,52,"window"],[1,973,42,59,"clearTimeout"],[1,986,42,72,"reconnectTimeout"],[1,991,44,4,"bindErrorHandler"],[1,993,44,23],[1,1002,44,33,"webSocketInstance"],[1,1004,44,52,"optionsRef"],[1,1006,44,64,"reconnect"],[1,1008,44,75,"reconnectCount"],[1,1011,45,4],[1,1015,45,8,"reconnectTimeout"],[1,1017,62,4],[1,1024,46,4,"webSocketInstance"],[1,1026,46,22,"onerror"],[1,1034,46,32],[1,1043,46,42,"error"],[1,1046,47,8],[1,1050,47,12,"_a"],[1,1052,47,16,"_b"],[1,1054,48,8,"optionsRef"],[1,1056,48,19,"current"],[1,1064,48,27,"onError"],[1,1073,48,38,"optionsRef"],[1,1075,48,49,"current"],[1,1083,48,57,"onError"],[1,1091,48,65,"error"],[1,1094,49,12,"optionsRef"],[1,1096,49,23,"current"],[1,1104,49,31,"retryOnError"],[1,1119,50,16,"reconnectCount"],[1,1121,50,31,"current"],[1,1130,50,90],[1,1138,50,43,"_a"],[1,1140,50,48,"optionsRef"],[1,1142,50,59,"current"],[1,1150,50,67,"reconnectAttempts"],[1,1175,50,100,"undefined"],[1,1179,50,98,"_a"],[1,1181,50,114,"_a"],[1,1183,50,119,"constants_1"],[1,1185,50,131,"DEFAULT_RECONNECT_LIMIT"],[1,1210,51,16,"reconnectTimeout"],[1,1212,51,35,"window"],[1,1219,51,42,"setTimeout"],[1,1230,51,53],[1,1241,52,20,"reconnectCount"],[1,1243,52,35,"current"],[1,1253,53,20,"reconnect"],[1,1258,54,67],[1,1266,54,20,"_b"],[1,1268,54,25,"optionsRef"],[1,1270,54,36,"current"],[1,1278,54,44,"reconnectInterval"],[1,1303,54,77,"undefined"],[1,1307,54,75,"_b"],[1,1309,54,91,"_b"],[1,1311,54,96,"constants_1"],[1,1313,54,108,"DEFAULT_RECONNECT_INTERVAL_MS"],[1,1345,57,16,"optionsRef"],[1,1347,57,27,"current"],[1,1355,57,35,"onReconnectStop"],[1,1372,57,54,"optionsRef"],[1,1374,57,65,"current"],[1,1382,57,73,"onReconnectStop"],[1,1398,57,89,"optionsRef"],[1,1400,57,100,"current"],[1,1408,57,108,"reconnectAttempts"],[1,1427,58,16,"console"],[1,1435,58,24,"warn"],[1,1440,58,29],[1,1469,58,60,"optionsRef"],[1,1471,58,71,"current"],[1,1479,58,79,"reconnectAttempts"],[1,1497,58,99],[1,1513,62,11],[1,1524,62,25],[1,1531,62,32,"reconnectTimeout"],[1,1534,62,52,"window"],[1,1541,62,59,"clearTimeout"],[1,1554,62,72,"reconnectTimeout"],[1,1559,64,0,"exports"],[1,1561,64,8,"attachListeners"],[1,1577,64,26],[1,1586,64,36,"webSocketInstance"],[1,1588,64,55,"setters"],[1,1590,64,64,"optionsRef"],[1,1592,64,76,"reconnect"],[1,1594,64,87,"reconnectCount"],[1,1597,65,4],[1,1601,66,8,"interval"],[1,1603,67,8,"cancelReconnectOnClose"],[1,1605,68,8,"cancelReconnectOnError"],[1,1607,65,8,"setLastMessage"],[1,1609,65,25,"setters"],[1,1611,65,33,"setLastMessage"],[1,1626,65,49,"setReadyState"],[1,1628,65,65,"setters"],[1,1630,65,73,"setReadyState"],[1,1644,76,4],[1,1651,69,8,"optionsRef"],[1,1653,69,19,"current"],[1,1661,69,27,"fromSocketIO"],[1,1676,70,8,"interval"],[1,1678,70,19,"socket_io_1"],[1,1680,70,31,"setUpSocketIOPing"],[1,1698,70,49,"webSocketInstance"],[1,1702,72,4,"bindMessageHandler"],[1,1704,72,23,"webSocketInstance"],[1,1706,72,42,"optionsRef"],[1,1708,72,54,"setLastMessage"],[1,1711,73,4,"bindOpenHandler"],[1,1713,73,20,"webSocketInstance"],[1,1715,73,39,"optionsRef"],[1,1717,73,51,"setReadyState"],[1,1719,73,66,"reconnectCount"],[1,1722,74,4,"cancelReconnectOnClose"],[1,1724,74,29,"bindCloseHandler"],[1,1726,74,46,"webSocketInstance"],[1,1728,74,65,"optionsRef"],[1,1730,74,77,"setReadyState"],[1,1732,74,92,"reconnect"],[1,1734,74,103,"reconnectCount"],[1,1737,75,4,"cancelReconnectOnError"],[1,1739,75,29,"bindErrorHandler"],[1,1741,75,46,"webSocketInstance"],[1,1743,75,65,"optionsRef"],[1,1745,75,77,"reconnect"],[1,1747,75,88,"reconnectCount"],[1,1750,76,11],[1,1761,77,8,"setReadyState"],[1,1763,77,22,"constants_1"],[1,1765,77,34,"ReadyState"],[1,1776,77,45,"CLOSING"],[1,1785,78,8,"cancelReconnectOnClose"],[1,1789,79,8,"cancelReconnectOnError"],[1,1793,80,8,"webSocketInstance"],[1,1795,80,26,"close"],[1,1803,81,12,"interval"],[1,1806,82,12,"clearInterval"],[1,1820,82,26,"interval"]],"functionMap":{"names":["<global>","bindMessageHandler","webSocketInstance.onmessage","bindOpenHandler","webSocketInstance.onopen","bindCloseHandler","webSocketInstance.onclose","window.setTimeout$argument_0","<anonymous>","bindErrorHandler","webSocketInstance.onerror","exports.attachListeners"],"mappings":"AAA;yBCK;kCCC;KDM;CDC;sBGC;+BCC;KDI;CHC;uBKC;gCCE;qDCO;iBDG;KDO;WGC,iFH;CLC;uBSC;gCCE;qDHK;iBGG;KDO;WDC,iFC;CTC;0BWC;WHY;KGO;CXC"}},"type":"js/module"}]}